{"version":3,"sources":["components/Navigation/icons8-chat-filled-32.png","components/Navigation/icons8-contacts-32.png","components/Navigation/icons8-marker-32.png","components/Navigation/icons8-waypoint-map-32.png","components/RightBar/informant_images sync /^/.//.*$","components/HelpView/images/navigatorhome.png","components/HelpView/images/navigator1.png","components/HelpView/images/navigator2.png","components/HelpView/images/timeline1.png","components/HelpView/images/timeline2.png","components/HelpView/images/sidebar.png","components/HelpView/images/nexus1.png","components/HelpView/images/nexus2.png","components/HelpView/images/nexus3.png","components/HelpView/images/tab1.png","components/HelpView/images/tab2.png","components/HelpView/images/storyviewhome.png","components/HelpView/images/storyview1.png","components/HelpView/images/storyview2.png","components/HelpView/images/storyview3.png","components/HelpView/images/storyview4.png","components/HelpView/images/storyview5.png","components/HelpView/images/storyview6.png","components/HelpView/images/storyview7.png","components/HelpView/images/storyview8.png","components/HelpView/images/storyview9.png","components/HelpView/images/personviewhome.png","components/HelpView/images/placeviewhome.png","components/HelpView/images/placeview1.png","components/HelpView/images/placeview2.png","components/HelpView/images/placeview3.png","components/HelpView/images/placeview4.png","components/HelpView/images/fieldtripviewhome.png","components/MapView/fieldtrip_layers/field_trip_geojsons/aug_1895_photo1.geojson","components/RightBar/informant_images/123.jpg","components/RightBar/informant_images/150.jpg","components/RightBar/informant_images/235.jpg","components/RightBar/informant_images/241.jpg","components/RightBar/informant_images/90.jpg","components/RightBar/informant_images/noprofile.png","components/Heading/assets/DENM0001.png","actions/actionTypes.js","actions/tabViewerActions.js","components/HelpView/HelpView.js","utils.js","data-stores/DisplayArtifactModel.js","data-stores/SessionStorageModel.js","components/NexusGraph/NexusGraphModel.js","components/MapView/MapView.js","components/Navigation/NavigationDropdownMenu.js","actions/navigatorActions.js","actions/searchActions.js","components/Navigation/NavigatorComponent.js","components/NexusGraph/NexusGraph.js","components/Navigation/SearchComponent.js","components/Navigation/Navigation.js","components/RightBar/RightBar.js","components/StoryView/StoryView.js","components/PlaceView/PlaceView.js","components/PeopleView/PeopleView.js","components/FieldtripView/FieldtripView.js","components/BookView/BookView.js","components/NexusGraph/GraphView.js","components/FieldtripTool/FieldtripTool.js","components/TabViewer/TabViewer.js","components/Heading/Heading.js","Home.js","App.js","registerServiceWorker.js","reducers/initialState.js","reducers/navigatorReducer.js","reducers/searchReducer.js","reducers/tabViewerReducer.js","reducers/rootReducer.js","data-stores/configureStore.js","index.js"],"names":["module","exports","map","./123.jpg","./150.jpg","./235.jpg","./241.jpg","./90.jpg","./noprofile.png","webpackContext","req","id","webpackContextResolve","__webpack_require__","e","Error","code","keys","Object","resolve","p","ADD_TAB","CLOSE_TAB","DISPLAY_ITEMS","FUZZY_SEARCH","MOVE_TAB","SEARCH_ARTIFACT","SEARCH_KEYWORD","SET_SEARCH_STATE","SWITCH_TABS","TIME_FILTER_HANDLER","UPDATE_ITEMS","UPDATE_TAB","PIN_TAB","addTab","DisplayArtifactID","name","type","types","payload","closeTab","TabKey","switchTabs","moveTab","OldTabIndex","NewTabIndex","updateTab","TabIndex","updates","pinTab","HelpView","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","objectSpread","activeView","views","viewIndex","headers","actions","_this2","setState","requestAnimationFrame","_this3","rowLength","length","row","index","react_default","a","createElement","className","key","title","offset","onClick","setView","bind","renderHeader","src","require","React","Component","connect","tabViewer","dispatch","bindActionCreators","tabViewerActions","arrayTransformation","item","Array","isArray","arrOfObjToObj","arrOfObj","resultObj","forEach","obj","getSiblings","list","includes","filter","value","indexOf","console","error","allFieldtripId","fieldtripsData","FieldtripsData","fieldtrip","formattedStoryData","AllStories","placesData","places","place","placesMentionedData","PlacesMentionedData","realPeopleData","AllInformants","storiesCollectedData","StoriesCollectedData","data","keywords","dataKeywords","keyword","tango","dataTango","tango_index","etk","dataETK","etk_index","genre","dataGenre","fieldtrips","people","informants","informant","stories","storySearch","story","children","ListModel","People","level","Places","Stories","ETK Index","Keywords","Fieldtrips","Genres","Tangherlini Index","getChildren","isObj","items","OccupationDictionary","occupations","ontologyToDisplayKey","Keyword","DisplayArtifactToOntology","DisplayArtifact","hasOwnProperty","warn","ontologyToID","tangoTypes","People Classes","Place Classes","Tools, Items and Conveyances","Supernatural Beings","Animals","Actions or events","Time, Season, Weather","Resolution","childArray","Stylistics","getFieldtripsByID","fieldtrip_id","fieldtripObject","people_visited","person","places_visited","stories_collected","concat","allFieldtrip","fieldtripIdLoop","toString","_loop","ontology","_allFieldtrip$ontolog","allFieldtripKeyNames","element","full_name","currentKey","fieldtripValue","push","apply","toConsumableArray","datum","end_date","fieldtrip_name","shapefile","start_date","getKeywords","getPeopleByID","person_id","personObject","DefinedPlaces","DefinedStories","DefinedPlace","DefinedStory","getPlacesByID","place_id","placeObject","storiesCollected","storiesMentioned","getStoryByID","story_id","getGenreByID","genre_id","find","matchingGenre","getETKByID","etk_id","matchingETK","getTangoByID","tango_id","matchingTango","setSessionStorage","object","sessionStorage","setItem","JSON","stringify","getSessionStorage","ItemName","SessionItem","parse","getItem","nodeColors","default","linkColors","primary","secondary","primaryLinkNames","secondaryLinkNames","Places-Places-Fieldtrips","Stories-Stories-People","Stories-Stories-Fieldtrips","commonElements","array1","array2","nodesToIDArray","nodeCategories","node","itemID","initializeGraph","graphData","nodes","links","initializeNodeCategories","getPrimaryAssociates","primaryAssociates","model","_model$getStoryByID","informant_id","makePrimaryLabel","sourceID","sourceType","target","targetType","relationship","replace","undefined","makeSecondaryLabel","linkName","linkType","createLinkage","_ref","pastNodes","nodeType","matchID","targetNode","source","linkNode","color","label","hiddenLabel","_loop2","linkID","secondaryAssociates","_loop3","prevNodeType","findIndex","testLink","addNode","_graphData$links","newNode","createNode","splice","_graphData$links2","link","BaseLayer","LayersControl","DEFAULT_MAP_CENTER","MapView","lastclick","popup","time","tiles","url","attribution","checked","layers","format","placeID","prunePlaces","view","AvgLongitude","TotalLongitude","longitude","latitude","initialPlace","tile","i","TileLayer","WMSTileLayer","temp","renderMarker","place2","myCustomColour","renderPopup","markerHtmlStyles","icon","Leaflet","divIcon","iconAnchor","labelAnchor","popupAnchor","html","Marker","position","handleClick","Popup","Date","now","GeoJSON","style","weight","opacity","crs","properties","features","Id","geometry","coordinates","Map","ref","center","defineMapCenter","zoom","defineMapZoom","boundsOptions","paddingBottomRight","paddingTopLeft","renderTiles","renderMarkers","renderFieldtripLayer","display_name","Navigation","selectedItem","displayKey","handleMenuSelect","selectValue","onChange","handleDropdownChange","optionsRender","displayItems","timeFilterHandler","fuzzySearch","SearchInput","DisplayList","searchArtifact","searchKeyword","setSearch","newState","dataNav","TINav","activeList","dataNavView","dropdownLists","navigators","tabClass","path","searchState","inputValue","handleLevelTwoClick","prevDropdowns","selectMenu","setDisplayLabel","getList","setStateAndPathLabel","_ref3","listObject","slice","some","defineProperty","_ref5","isTango","heading_english","oldState","_ref6","_ref7","_ref8","callback","join","ontologyType","_ref9","setActiveTab","NavigationDropdownMenu","search","searchActions","navigatorActions","settings","nodeHighlightBehavior","panAndZoom","directed","size","highlightStrokeColor","highlightColor","labelProperty","renderLabel","fontSize","NexusGraph","lastNodeClicked","lastNodeClickTime","handleClickNode","assertThisInitialized","nodeName","nodeToTest","getNodeById","lib","config","onClickNode","defaultProps","SearchComponent","preventDefault","contains","log","navigatorState","itemsList","renderListofSuggestions","switchKeywordSearch","results","cursor","event","keywordSearch","onSubmit","placeholder","htmlFor","searchingState","navigator","displayLabel","fromSelect","toSelect","timeFilterLoad","createRef","timeInputClickHandler","timeInputEnd","setTimeout","displayOntology","displayName","image","alt","handleIDQuery","_ref2","timeFilterOn","toDisplay","_this$props","_this$props$actions","_this$props$navigator","displayList","fromDate","placeList","toDate","Navigation_SearchComponent","NavigatorComponent","stopPropagation","renderTimeSwitch","min","max","onMouseUp","components_NexusGraph_NexusGraph","height","window","innerHeight","width","innerWidth","components_MapView_MapView","RightBar","isPaneOpen","active","clickHandler","Modal","setAppElement","el","section","marginTop","marginBottom","PPSClickHandler","_this$props$object","informant_first_name","informant_last_name","renderBiography","renderPlaces","renderStories","renderPeople","_this4","mentioned","_this5","_this6","_this$props2","bio","birth_date","death_date","intro_bio","_this7","dist_react_sliding_pane_default","overlayClassName","isOpen","onRequestClose","renderControls","renderContent","indexToVersion","0","1","2","3","StoryView","isMapExpanded","lastStoryVersionOpen","openTab","storyVersionOpen","twoVersions","placeRecorded","placesMentioned","renderRelatedStories","renderProperty","accordionHandler","stories_mentioned","tab","bibliography_references","reference","display_string","dangerouslySetInnerHTML","__html","version","prevState","versionCount","Boolean","property","component","annotation","fielddiary_page_end","fielddiary_page_start","fieldtrip_end_date","fieldtrip_start_date","informant_full_name","order_told","tango_indices","personData","PlaceObjectArray","_this$state","lineHeight","textAlign","expandMap","data-accordian","bibliographicReferences","marginRight","marginLeft","increaseFontSize","decreaseFontSize","float","storyViewerClickHandler","renderComponentView","components_RightBar_RightBar","margin","wide","PlaceView","fontWeight","display","CIToChapterID","4","5","PeopleView","jobList","occupation","occupation_name","testOccupation","ID","occupation_id","reduce","res","job","substring","CoreInformantID","QueryID","getOccupation","openCoreInformantTab","FieldtripView","PlacesVisited","BookView","dropdownActive","searchActive","searchJSX","searchValue","book","rendition","dropdownJSX","bookRef","handleKeyPress","minimumFontSize","maximumFontSize","document","addEventListener","ePub","process","loaded","navigation","then","toc","chapter","href","trim","location","current","renderTo","menuList","themes","on","newPage","start","removeEventListener","next","prev","query","Promise","all","spine","spineItems","load","finally","unload","queries","entry","cfi","excerpt","change","_ref4","newSize","handleSearch","changeFontSize","GraphView","showPrimaryLinks","showSecondaryLinks","showLinkLabels","highlighted","togglePrimaryLinks","toggleSecondaryLinks","toggleLinkLabels","NewState","allFalse","highlightGraphNode","unhighlightGraphNode","nodeData","csvNodeContent","edgeData","targetID","csvEdgeContent","zip","JSZip","file","generateAsync","content","FileSaver","saveAs","finalData","toggleNodeHighlight","legendCircleColor","createCSVFiles","openNode","FieldtripTool","activeFieldtrips","handleSelect","TabViewer","dragIndicatorX","dragIndicatorY","dragIndicatorHeight","desiredIndex","originalIndex","tabs","renderActiveTab","tabIndex","components_PeopleView_PeopleView","components_PlaceView_PlaceView","components_FieldtripView_FieldtripView","components_StoryView_StoryView","components_Navigation_Navigation","components_NexusGraph_GraphView","components_BookView_BookView","components_HelpView_HelpView","components_FieldtripTool_FieldtripTool","activeViewIndex","renderPPFS","backgroundColor","dataTransfer","setData","effectAllowed","dropEffect","newIndex","right","left","instance","getBoundingClientRect","y","draggable","onDragStart","handleDragStart","onDragEnter","handleDragEnter","onDragEnd","handleDragEnd","pinned","top","Heading","menuActive","menuToggle","xmlns","viewBox","fill","fillRule","stroke","strokeWidth","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeDasharray","strokeDashoffset","fontFamily","textAnchor","mixBlendMode","d","paddingTop","paddingLeft","menuItem","Home","loading","components_Heading_Heading","components_TabViewer_TabViewer","App","BrowserRouter","basename","src_Home","isLocalhost","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","initialState","tabState","CachedState","InitializeTabs","updateItems","idKey","idsInRange","startYear","endYear","fieldtripKey","fieldtripsInDates","parseInt","IDKey","UniqueItemIDs","UniqueItems","firstKey","secondKey","dateFilterHelper","switchTab","OldState","SwitchToIndex","currentView","currentIndex","rootReducer","combineReducers","arguments","PlaceList","InitialItem","residence_place","place_recorded","ShallowPrevState","action","SearchResults","SearchableData","fuse","Fuse","shouldSort","threshold","distance","maxPatternLength","minMatchCharLength","handleFuzzySearch","artifact","InputValue","SearchList","keyword_name","search_string","asyncDispatch","setSearchState","ShallowNewState","matchingViewIndex","newView","updatedViews","RemoveTab","RemoveIndex","_OldState","viewToMove","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","asyncDispatchMiddleware","store","syncActivityFinished","actionQueue","flushQueue","actionWithAsyncDispatch","assign","asyncAction","createStore","applyMiddleware","thunk","ReactDOM","render","es","src_App_0","getElementById","URL","origin","fetch","response","status","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.6d9cabcc.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAI3AAACNwBn+hfPAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAJjSURBVFiFvddLSFVRFAbg76plKBnRO4NCs8eoFwmZjWoQJVSCDYqoScOoQZMKRKKCCKJGTYIGUVAjJYMeFORAggYS1KCgoheVQUIvU7PbYN8DN7lXz331wxrcffba/3/3WXv/6ySMj+XYjI1YhJmYjK94jUe4iQf4M8FaGZHIMt6IdmzBG9zHE/RjCNPRgLVoTolpx1Uk8xESoRzH8RtdWBcjZwFOYxD3MC9f8km4gQG05pG/GI/xAUtyTU4I29cvvPd8US3UwyuhXmJjL35hdQHkEWrwHNfiJkzFZ3QUgTxCs1CMTXEm7xGOVVURBcBd3MHciSZ24XKRyWG3sAvDuI5l2SY+w4ESCGhICYhiBEdkuHt+YEcJBFSNERDFJZRFk8qE6q8ugYDKLOP7cDZdwHssLIGA+nGeHcTW6Md5PCyBgJMyv4IoXqIC1gtOVsgNOBaVgkGNJyCJbVHCLfTI7o65oiMGeRIXo4QVwnk9XATyRvyMKaAvPXGXYMP7CyDfgC8xyZOCc/6DXsGSc0WN0BMM50CexIv0RVpSgy0xSRNYiWP4mCNxFD0VqcVacQXn0J1Gskqw6hbB4weErmk26jA/pths6IVDGMUJzMAmnBI8PYlPef67OLEG3qYEDKQ9eCo0mfWoFb+qc4nb0TbMwna0CU1oTYatOlpk8kEszcCTFeUpxcUgH8XOXMgjTEFnEQR05kMeISEU7fcCBAwJF1ZBmIMz8j//34SvroLNp1wo3CahBZsmFNi71PO21HgmjAgNcUmREFr0C8JFNnYn+oplv3FRJ3y21QqnoXv86f8BfwGvMTgOG2kEBAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGFSURBVFiF7Za7SsNgGIYfM3kclNprEN10EIeKV6AoUhG7CApuSkHEQQpegaDOXoCCOHgTFYTiaMFFFFEQrYelJg7/G1qhTf+kySJ94eMP5D18OX1/oIMOwiMNFIAi8KQqAnvAcNLhy8AH4DWpCpBNKnwRcBV0CmSAQdU0cKZzLjAfd3gKeFPAZgAvL84rMBRnA/vUrrwVzsUtxNlASaYZC+6MuNdxNlCRaZ8Fd0Dcdxtjx7KBH0teaI1tA2Wt4xbcCa23lt5W2MXc1gsL7qW4O3E2kAZeZJwP4G2L80wCU3EBqPJ3EHUDPfwdRFUSGEQ+lqhNw0blkuAozgGPAeF+PQArcQY7wHFdQAkzjscwIzql4y3gpo53CHTF0cCRDL+AdYI/XQfYAL6lOWg3PFsXPhlCNyWNh9lFI6EX8zw9YDWCfk3ae8zXEho5GVwR7Vk6mA3Jw/zINCU1w6zWE5mEhSstwFwEPXcKHokiFkblUW5FbAT/JepvowF/a/5sw6ODDv45fgFve3PVQ80KJwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHiSURBVFiF7dbbi01RHAfwzxnlcgxexNu8kKSYYjwypSblkkd5VnL5G8j1neTN5Uki/AdElHcURiR3uTUuL2SOh/U7bZ32nLPP7H1mIt9ardX6fX+/72/vtdZvLf7jL8RGnMEoPkQbxWmM9FJ4Be6g0aHdxvKqxYfxOQTe4iCGsCjaWhzCu+B8wrqqxJdFwAbOo96GOxcXgvsRS6pI4GYEvIhaAX4Nl8PnWlnxkQj0BvO68FsgW44N7Yh9HQJtj/44vnaRwBhOtMSYFB5JX7Eyx7YFT/EEm3Lsg+H7oEwCXyJIf47tuezoPcuxzw/bWDuBTkswI/q8nd83wbiJOUU0OiXwMPqhHNtuvMarGLei6VNqCY5Kv/HsJHzPhe/hMgksxbi0ju0KUCvq0v4ZV0ExahaiPV347AufG2XFYXMEe4GZBfizpb3RkH88u0YN9yPgzgL8XcG9q1jpLoQdEfSldOFMhH7Z15eqgK2oSfd8A0fa8I7J3gSVYziCf8NAjn0A34OzvhcJwKUQuJJjuyq7tnuGxbLHydY/5rfF3Hss7GUCZGf8sVRw6tKN2MDeXouTNuStEDyJUzG+rsJj1wmD+Ilf0X5g1VSJN3FA9h7YP9XiMEuqkPdiPC1Yg9XTJf5v4DfD0XufNLPaZQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALlSURBVFhHzddZyA1hHMfxY1+zlLVsyZqyliVJWZOlKL3lQiIXEhcoa5ZccEPJkguyZicXSiGy3MhyJylS1pIsiex8v+ecR2Pec+adIxm/+vTOmbeZ5z/PeeZ5npP7H7Ibs1A3/yl9umEb1qKVJypIYyzHIj/8wHc8QJpCbHgPvuAGvO49tqMrkuK95+AZbPcq8gezsQne6D5KFRJveBJMHVThFr7iKAYhnim4g3dYj634VcBED0hbxAvpiXjDtVAqY3AO3vMCxmMYLsPrd6I9zAZUKyAkWoj/v4nJKNdwPANwGPaI159Cb0STWECIhQxF2oZrF/+GdEHfwmG1lCzgBKYWDivOavjEDsRROI8+KJeSBXRCo8JhYhqiPgbjJfqhBfy+7a2OWAd7YDQOoSWiKfsVeLNrKPduz8QnOD6WYj7iXR9NZxxB/BUtW4CTxDGU676H8Bo5ONPG+24p/jWpBuFBrCoc5sZhGS4iFOCYSZumeATfJpOqgOlYXDjMV+973AE7ip9bo5I4dkJSFfC3Yy84AzqAMymgDT7DAZlJAcYiTCYFOAZ8bZ0rMilgIFz6HQuZFFAPzpYmkwJ8rZsUDv9tAU7VvWD39/AE+eMC2sHVLk1coFxXXCX3YwhCEgvojuNwEXFFcwvlqudKuRJv4CLjDshNbbmFawG8fxC+f5NYwBWEi9xiuewORzxuNnwyJ5YJcBtmF/uuby4K97EX3FeGJBZwF+HC255IEXvEPYB7AXvwNHziFTgDN67R/FaAk0M0FvQCzzHWEyXSHC5U7g+c2yuJg3Iv8gUcgKPzEkZ6oobY8Bq8wlO8xWMsQTPUFMeNvfoB8zxh/C5PIqmQaMNP4ABzanWku0+wt15jI8LWO5r+OItv8Ond/lWLhbiFjhYSf+KFiK7rIQ0wF/fwEbvgbwob2gcbtgALqTHRQuyqpIbj8fudhuuwUYuxy+36imMhM5Bmp1wqI+BPsqRNa5bJ5X4C+1vUVnQ/E5gAAAAASUVORK5CYII=\"","var map = {\n\t\"./123.jpg\": 271,\n\t\"./150.jpg\": 272,\n\t\"./235.jpg\": 273,\n\t\"./241.jpg\": 274,\n\t\"./90.jpg\": 275,\n\t\"./noprofile.png\": 276\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 158;","module.exports = __webpack_public_path__ + \"static/media/navigatorhome.81d44ebb.png\";","module.exports = __webpack_public_path__ + \"static/media/navigator1.74dcaacd.png\";","module.exports = __webpack_public_path__ + \"static/media/navigator2.f2e9d569.png\";","module.exports = __webpack_public_path__ + \"static/media/timeline1.d3118d4f.png\";","module.exports = __webpack_public_path__ + \"static/media/timeline2.1bc00f90.png\";","module.exports = __webpack_public_path__ + \"static/media/sidebar.af70856a.png\";","module.exports = __webpack_public_path__ + \"static/media/nexus1.4d012a8e.png\";","module.exports = __webpack_public_path__ + \"static/media/nexus2.4a08f3a4.png\";","module.exports = __webpack_public_path__ + \"static/media/nexus3.4689eb54.png\";","module.exports = __webpack_public_path__ + \"static/media/tab1.dfaf5dd3.png\";","module.exports = __webpack_public_path__ + \"static/media/tab2.18e93a21.png\";","module.exports = __webpack_public_path__ + \"static/media/storyviewhome.c3610362.png\";","module.exports = __webpack_public_path__ + \"static/media/storyview1.19f2e50c.png\";","module.exports = __webpack_public_path__ + \"static/media/storyview2.08ba0636.png\";","module.exports = __webpack_public_path__ + \"static/media/storyview3.bf88f6d3.png\";","module.exports = __webpack_public_path__ + \"static/media/storyview4.a4c9f576.png\";","module.exports = __webpack_public_path__ + \"static/media/storyview5.f35912a9.png\";","module.exports = __webpack_public_path__ + \"static/media/storyview6.7cb95119.png\";","module.exports = __webpack_public_path__ + \"static/media/storyview7.65d1046b.png\";","module.exports = __webpack_public_path__ + \"static/media/storyview8.3ab577c2.png\";","module.exports = __webpack_public_path__ + \"static/media/storyview9.3da70c87.png\";","module.exports = __webpack_public_path__ + \"static/media/personviewhome.26037d8c.png\";","module.exports = __webpack_public_path__ + \"static/media/placeviewhome.4c02b925.png\";","module.exports = __webpack_public_path__ + \"static/media/placeview1.fc267738.png\";","module.exports = __webpack_public_path__ + \"static/media/placeview2.cfa72579.png\";","module.exports = __webpack_public_path__ + \"static/media/placeview3.42708c0a.png\";","module.exports = __webpack_public_path__ + \"static/media/placeview4.df3670d7.png\";","module.exports = __webpack_public_path__ + \"static/media/fieldtripviewhome.c9b2bbfc.png\";","module.exports = __webpack_public_path__ + \"static/media/aug_1895_photo1.ff77ffb4.geojson\";","module.exports = __webpack_public_path__ + \"static/media/123.da74c139.jpg\";","module.exports = __webpack_public_path__ + \"static/media/150.32184947.jpg\";","module.exports = __webpack_public_path__ + \"static/media/235.81d4b369.jpg\";","module.exports = __webpack_public_path__ + \"static/media/241.a447f74b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/90.7f8b02ad.jpg\";","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","export const ADD_TAB = \"ADD_TAB\",\n    CLOSE_TAB = \"CLOSE_TAB\",\n    DISPLAY_ITEMS = \"DISPLAY_ITEMS\",\n    FUZZY_SEARCH = \"FUZZY_SEARCH\",\n    INITIALIZE_TABS = \"INITIALIZE_TABS\",\n    MOVE_TAB = \"MOVE_TAB\",\n    SEARCH_ARTIFACT = \"SEARCH_ARTIFACT\",\n    SEARCH_KEYWORD = \"SEARCH_KEYWORRD\",\n    SET_SEARCH_STATE = \"SET_SEARCH_STATE\",\n    SWITCH_TABS = \"SWITCH_TABS\",\n    TIME_FILTER_HANDLER = \"TIME_FILTER_HANDLER\",\n    UPDATE_ITEMS = \"UPDATE_ITEMS\",\n    UPDATE_TAB = \"UPDATE_TAB\",\n    PIN_TAB = \"PIN_TAB\";\n","import * as types from \"./actionTypes\";\n\n/**\n * Add a tab to the view\n * @param {Number} DisplayArtifactID ID referring to the item to display\n * @param {String} name Display name of the tab\n * @param {String} type Type of the display\n */\nexport function addTab(DisplayArtifactID, name, type) {\n    return {\n        \"type\": types.ADD_TAB,\n        \"payload\": {DisplayArtifactID, name, type},\n    };\n}\n\n/**\n * Close a tab\n * @param {Number} TabKey Index of the tab to close\n */\nexport function closeTab(TabKey) {\n    return {\n        \"type\": types.CLOSE_TAB,\n        \"payload\": TabKey,\n    };\n}\n\n/**\n * Switch to the specified tab\n * @param {Number} TabKey Index of the tab to switch to\n */\nexport function switchTabs(TabKey) {\n    return {\n        \"type\": types.SWITCH_TABS,\n        \"payload\": TabKey,\n    };\n}\n\n/**\n * Move a tab to a new index\n * @param {Number} OldTabIndex The tab to move\n * @param {Number} NewTabIndex The spot to move the tab to\n */\nexport function moveTab(OldTabIndex, NewTabIndex) {\n    return {\n        \"type\": types.MOVE_TAB,\n        \"payload\": {OldTabIndex, NewTabIndex},\n    };\n}\n\n/**\n * Update some of a tab's properties\n * @param {Number} TabIndex The tab to update\n * @param {*} updates The properties of the tab to update with their desired values\n */\nexport function updateTab(TabIndex, updates) {\n    return {\n        \"type\": types.UPDATE_TAB,\n        \"payload\": {TabIndex, updates},\n    };\n}\n\n/**\n * Pin a tab so it won't be removed\n * @param {Number} TabIndex to pin\n * */\nexport function pinTab(TabIndex){\n    return {\n        \"type\": types.PIN_TAB,\n        \"payload\": TabIndex,\n    }\n}\n","// CSS styling\nimport \"./HelpView.css\";\n// react functionality\nimport React from \"react\";\nimport {bindActionCreators} from \"redux\";\nimport * as tabViewerActions from \"../../actions/tabViewerActions\";\nimport connect from \"react-redux/es/connect/connect\";\n\nclass HelpView extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            // which page is currently being viewed\n            \"activeView\": 0,\n            // update with any previous state stored in redux\n            ...props.state.views[props.viewIndex].state,\n        };\n        // headers for the top links\n        this.headers = [\n            [\n                \"Getting Started\",\n                \"Story View / Person View\",\n                \"Place View / Fieldtrip View\",\n            ],\n            [\n                \"User Nexus Graph\",\n                \"Search Features\",\n                \"Book Chapters\",\n            ],\n        ];\n    }\n\n    componentWillUnmount() {\n        // save state to redux for later\n        this.props.actions.updateTab(this.props.viewIndex, {\n            \"state\": this.state,\n        });\n    }\n\n    setView(activeView) {\n        // initially clear the view so that the user is forced to the top\n        this.setState({\n            \"activeView\": -1,\n        }, () => {\n            // once the view has been cleared\n            requestAnimationFrame(() => {\n                // load the desired page\n                this.setState({\n                    activeView,\n                });\n            });\n        });\n    }\n\n    renderHeader() {\n        // length of each row\n        const rowLength = this.headers[0].length;\n        // for each row of headers\n        return this.headers.map((row, index) => (\n            // create a row\n            <div className=\"grid-container\" key={index}>\n                <div className=\"grid-x grid-padding-x small-up-2 medium-up-3\">\n                    {/* add in each of the cards\n                    with the title that links to the appropriate place */}\n                    {row.map((title, offset) => (\n                        <a\n                            className=\"cell\"\n                            onClick={this.setView.bind(this, (index * rowLength) + offset)}\n                            key={title}>\n                            <h4 className=\"card card-section\">\n                                {title}\n                            </h4>\n                        </a>\n                    ))}\n                </div>\n            </div>\n        ));\n    }\n\n    render() {\n        // currently viewed page\n        const {activeView} = this.state;\n        return (\n            <div className=\"HelpView\">\n                <div className=\"grid-container\">\n                    <h1>Need Help on...</h1>\n                </div>\n                {this.renderHeader()}\n                <div id=\"mainContent\">\n                    {activeView === 0 &&\n                        <div>\n                            <h1 id=\"gettingStarted\">Getting Started</h1>\n                            <p>\n                            Welcome to the ETK Danish Folklore Nexus application! As a user, you are able to navigate through some of ETKs vast collection of Danish folklore from his various fieldtrips across Denmark. <br />\n                            Lets start with the home tab!\n                            </p>\n                            <h2>Navigator and Display Tools</h2>\n                            <img src={require(\"./images/navigatorhome.png\")} />\n                            <p>\n                                On the home tab, you can navigate to any story, person, or place in the collection via the search bar or the navigator tools below it. To learn more about the search bar, please reference the <a onClick={this.setView.bind(this, 4)}>Search Features help page</a>.\n                            </p>\n                            <img src={require(\"./images/navigator1.png\")} />\n                            <p>\n                            The data navigator tools allow you to select specific stories, people, or places which will be displayed in the center of the page. By default, stories will already be selected and displayed to you. You can use the search bar to help you find a specific item within the category youve selected!\n                            </p>\n                            <img src={require(\"./images/navigator2.png\")} />\n                            <p>\n                            The topic and indices navigator tool will allow you to filter the stories by various indices organized by ETK, Professor Tangherlini, and other scholars. You will also be able to access fieldtrips through this navigator tool. Youll also notice the results section will display whats being selected at the moment. In this case, the Topic &amp; Index Navigator is being selected, but no specific index is selected so the display area is blank.\n                            </p>\n                            <h2>Timeline</h2>\n                            <img src={require(\"./images/timeline1.png\")} />\n                            <p>\n                            Select the item of interest from the display in the center. You can also filter the results shown in the center by time using the timeline feature at the top. To use the timeline feature, turn it on by clicking the switch on the top left. Then select the dates you wish to filter by.\n                            </p>\n                            <img src={require(\"./images/timeline2.png\")} />\n                            <p>\n                            You can click on the date fields and use the red dot to drag the dates around.\n                            </p>\n                            <h2>Mini User Nexus and Map Tools</h2>\n                            <img src={require(\"./images/sidebar.png\")} />\n                            <p>\n                            Once youve mastered these sections, you will notice you have access to the Nexus Graph tool and the Map on the right side.\n                            </p>\n                            <h2>Nexus Graph</h2>\n                            <img src={require(\"./images/nexus1.png\")} />\n                            <p>\n                            The Nexus Graph displays all of the items you have opened and all of the connections between them. For instance, if you opened up a person and a story, and the story was told by the person, two dots will appear to represent the person and the story as well as a line between the two dots to indicate a direct relationship. If you havent opened an item then a blank green dot will appear.<br />\n                            You can also double click on each dot to take you back to the tab with the person/place/story. This tool can help you discover the relationships between everything youve opened!\n                            </p>\n                            <img src={require(\"./images/nexus2.png\")} />\n                            <p>\n                            Explore the tool more in depth by opening the nexus graph in a new tab. For more information on the nexus graph, click <a onClick={this.setView.bind(this, 3)}>here</a>.\n                            </p>\n                            <img src={require(\"./images/nexus3.png\")} />\n                            <p>\n                            The Map below shows the location of all of the items from the center display. Click on the pin to see the location name and double click to open up the tab.\n                            </p>\n                            <h2>Tabs</h2>\n                            <img src={require(\"./images/tab1.png\")} />\n                            <p>\n                            As you open more tabs, drag the tabs around to re-order them.\n                            </p>\n                            <img src={require(\"./images/tab2.png\")} />\n                            <p id=\"num2\">\n                            Pin the tab by pressing the left pin icon. This will save the tab since there is a maximum number of tabs you can have open at a time to prevent overcrowding.\n                            </p>\n                        </div>}\n                    {activeView === 1 &&\n                        <div>\n                            <h1>Story View and Person View</h1>\n                            <h2>Story View</h2>\n                            <img src={require(\"./images/storyviewhome.png\")} />\n                            <h3>Left Bar</h3>\n                            <p>\n                                The Story View centralizes all indexical information on the left bar as well as a map with all the associated places pinned onto the map. This contains various story-specific information or indices associated with the story.\n                            </p>\n                            <img src={require(\"./images/storyview1.png\")} />\n                            <p>\n                                Click on a grey box to see other stories are related to that keyword in the home tab.\n                            </p>\n                            <img src={require(\"./images/storyview2.png\")} />\n                            <p>\n                                The clicking the keyword will take you directly to the home tab and we can see the other stories related to the keyword!\n                            </p>\n                            <h3>Selecting Story Versions</h3>\n                            <img src={require(\"./images/storyview3.png\")} />\n                            <p>\n                                View the story in different versions by clicking on the top labels.\n                            </p>\n                            <img src={require(\"./images/storyview4.png\")} />\n                            <p>\n                                You can select up to 2 labels. When there are two labels active and you want to eliminate a label, just click the label again.\n                            </p>\n                            <h3>Bottom Annotations and Related Stories</h3>\n                            <img src={require(\"./images/storyview5.png\")} />\n                            <p>\n                                Below each story contains applicable annotations and related stories. Related stories are generated through network analysis similar to the Nexus Graph.\n                            </p>\n                            <h3>Right Bar</h3>\n                            <img src={require(\"./images/storyview6.png\")} />\n                            <p>\n                                The right grey bar contains all of the associated person, places, and stories.\n                            </p>\n                            <img src={require(\"./images/storyview7.png\")} />\n                            <p>\n                                The associated person is the storyteller who was recorded sharing that story.\n                            </p>\n                            <img src={require(\"./images/storyview8.png\")} />\n                            <p>\n                                Associated places are labeled with each places relationship to the story.\n                            </p>\n                            <img src={require(\"./images/storyview9.png\")} />\n                            <p>\n                                Associated stories are other stories told by the same story teller.\n                            </p>\n                            <h2>Person View</h2>\n                            <img src={require(\"./images/personviewhome.png\")} />\n                            <p>\n                                The Person View contains basic information regarding the storyteller. Theres a short biography related to the person below, and the full biography can be found in the book if the informant was one of the primary informant. The map on the right displays all the places associated with the person.\n                            </p>\n                            <h1>Place View and Fieldtrip View</h1>\n                            <img src={require(\"./images/placeviewhome.png\")} />\n                            <p>\n                                Both views are map-focused to allow you to focus exploring the geographical relationships of the location presented. Blue pin represents a story was mentioned at this location. Red pin represents a story was told at this location. Purple pin typically represents a location unrelated to a story or an uncategorized location.\n                            </p>\n                        </div>}\n                    {activeView === 2 &&\n                        <div>\n                            <h2>Place View</h2>\n                            <h3>Zoom</h3>\n                            <img src={require(\"./images/placeview1.png\")} />\n                            <p>\n                                On the Place View, scroll up/down to zoom or use the plus/minus tool in the top left.\n                            </p>\n                            <h3>Switching Maps (Layers)</h3>\n                            <img src={require(\"./images/placeview2.png\")} />\n                            <img src={require(\"./images/placeview3.png\")} />\n                            <p>Use the layers button on the top right to switch between the high board map, low board map, and the modern-day map.</p>\n                            <img src={require(\"./images/placeview4.png\")} />\n                            <p>The right bar will have associated people, stories that mention the place, and stories that were collected at the place. </p>\n                            <h2>Fieldtrip View</h2>\n                            <img src={require(\"./images/fieldtripviewhome.png\")} />\n                            <p>\n                                On the Fieldtrip View, all the places visited by ETK on this particular trip will be displayed.<br />\n                                The right bar will have associated people, places, and stories that were encountered on the fieldtrip.\n                            </p>\n                        </div>}\n                    {activeView === 3 &&\n                        <div>\n                            <h2>Nexus Graph</h2>\n                            <p>\n                                This is a tool to help you visualize the relationship between all of the people, places, stories, and fieldtrips youve opened.<br />\n                                Each person, place, story, and fieldtrip is represented by a colored dot (node). Theres a legend for explaining the color codes for each node on the left bar. <br />\n                                Drag the node to get a better view of the connects.<br />\n                                Double click on each node to return to the tab that created it.<br />\n                                There are two types of connections (edges) that can be formed between two nodes: primary and secondary.<br />\n                                A primary edge is a direct relationship with the nodes. For instance, Jens (Bitte Jens) Kristensen told 150 - 1.23 - DS_1_533 or Jens (Bitte Jens) Kristensen was born in Ersted. These edges are color coded light blue.<br />\n                                A secondary edge is an indirect relationship with the nodes. For instance, 150 - 1.23 - DS_1_533 and 150 - 0.02 - JAH_IV_348 are both told by Jens (Bitte Jens) Kristensen. These edges are color coded light green.<br />\n                                Rule of thumb: Anytime when only one connection phrase is required to connect two nodes will be considered a primary edge. Anytime when an edge requires another node to explain the relationship will be considered a secondary edge.\n                            </p>\n                        </div>}\n                    {activeView === 4 &&\n                        <div>\n                            <h2>Search Features</h2>\n                            <p>\n                                By default, the search bar on the home tab will search through whatever is in the results displayed on the right. Use the Data Navigator as well as the Topic &amp; Index Navigator to specify what youd like to search through.<br />\n                                If youd like to search a particular keyword across all the stories, people, and places select the Keyword Search Only checkbox. This will clear whats in the results section to allow you to search across the whole dataset. <br />\n                                In the case there is no exact matches for your search, the most closely related results will be displayed.\n                            </p>\n                        </div>}\n                    {activeView === 5 &&\n                        <div>\n                            <h2>Book Chapters</h2>\n                            <p>\n                                The companion book with this application is displayed through an e-reader. You can select a specific chapter in the book by click on the book icon on the top right. This will create a new tab opened to the specific chapter.<br />\n                                Navigate through the book by using the left and right arrows.<br />\n                                You can also navigate through the entire book through the table of contents on the top left. By clicking on a chapter/section from there you will be able to skip to the location within the same book tab.<br />\n                                You can also search through the entire book by using the search bar at the top. Clicking on one of the results will take you to the location of the result, but the result will not be highlighted (a feature still in process!)\n                            </p>\n                        </div>}\n                    <div className=\"clearfix\">\n                        {/* previous button, only display if there is a previous page */}\n                        {activeView > 0 &&\n                            <button\n                                className=\"button primary float-left\"\n                                onClick={this.setView.bind(this, activeView - 1)}>\n                                &lt; Previous: {this.headers[activeView > 3 ? 1 : 0][(activeView - 1) % 3]}\n                            </button>}\n                        {/* next button, onlt display if there is a next page */}\n                        {activeView < 5 &&\n                            <button\n                                className=\"button primary float-right\"\n                                onClick={this.setView.bind(this, activeView + 1)}>\n                                Next: {this.headers[activeView < 2 ? 0 : 1][(activeView + 1) % 3]} &gt;\n                            </button>}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\n/**\n * Set certain props to access Redux states\n * @param {Object} state All possible Redux states\n * @returns {Object} Certain states that are set on props\n */\nfunction mapStateToProps(state) {\n    return {\n        \"state\": state.tabViewer,\n    };\n}\n\n/**\n * Set the \"actions\" prop to access Redux actions\n * @param {*} dispatch Redux actions\n * @returns {Object} The actions that are mapped to props.actions\n */\nfunction mapDispatchToProps(dispatch) {\n    return {\n        \"actions\": bindActionCreators(tabViewerActions, dispatch),\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(HelpView);\n","/**\n * Ensure that the input is an array\n * @param {*} item The input to array-ify\n * @returns {Array} Either the input if it was already an array, or a single element array containing the input\n */\nexport function arrayTransformation(item) {\n    if (Array.isArray(item)) {\n        // if the input is already an array, just return it\n        return item;\n    } else if (typeof item !== \"undefined\" && item !== null) {\n        // assuming it is defined properly, return a single element array with the input in it\n        return [item];\n    } else {\n        // return empty if the item is undefined/null\n        return [];\n    }\n}\n\n/**\n * Convert a list of places to a list of IDs\n * @param {Array} places The list of places to convert\n * @returns {Array} A list of the places' IDs\n */\nexport function getPlaceIDList(places) {\n    return places.map((places) => places.place_id);\n}\n\n/**\n * Creates a given array to only have unique values\n * @param {Array} array array we want to remove duplicates for\n * @return {Array} the array with unique values\n */\nexport function ArrNoDupe(array) {\n    return array.filter((item, index) => array.indexOf(item) === index);\n}\n","// import raw people data\nimport AllInformants from \"../data/allinformants.json\";\n// import raw story data\nimport AllStories from \"../data/allstories.json\";\n// import ETK data\nimport dataETK from \"../data/cetk_indices.json\";\n// import data for fieldtrips\nimport FieldtripsData from \"../data/cfieldtrips.json\";\n// import genre data\nimport dataGenre from \"../data/cgenres.json\";\n// import people data\nimport informants from \"../data/cinformants.json\";\n// import keyword data\nimport dataKeywords from \"../data/ckeywords.json\";\n// import occupation data\nimport occupations from \"../data/coccupations.json\";\n// import place data\nimport places from \"../data/cplaces.json\";\n// import data for mentioned places\nimport PlacesMentionedData from \"../data/cplaces_mentioned.json\";\n// import story data\nimport storySearch from \"../data/cstories.json\";\n// import data for places with collected stories\nimport StoriesCollectedData from \"../data/cstories_collected.json\";\n// import tango indices data\nimport dataTango from \"../data/ctango_indices.json\";\n// import the arrayTransformation() function\nimport {arrayTransformation} from \"../utils\";\n// import manuscript image data based on stories\nimport ManuscriptData from \"../data/cmanuscript_images\";\n\n// helper functions\n\n// not sure about this\nfunction arrOfObjToObj(arrOfObj, id) {\n    // store the resulting object\n    let resultObj = {};\n\n    // for each obj in the arrOfObj\n    arrOfObj.forEach((obj) => {\n        // my brain can't comprehend this for some reason\n        // something about about setting the data inside the resulting object based on its appropriate or specified place i think\n        resultObj[obj[id]] = obj;\n    });\n\n    // return the object\n    return resultObj;\n}\n\n/**\n * @param {Array} list The list to search through\n * @param {*} key The key to check for\n * @returns {Array} An array of values with the same key\n */\nfunction getSiblings(list, key) {\n    // if key is one of these types\n    if ([\"MAIN\", \"TOPIC\", \"PPS\", \"\"].includes(key)) {\n        // no need to modify it, apparently\n        return list;\n    } else if (typeof list !== \"undefined\" && typeof key !== \"undefined\") {\n        // if we have a defined list and key\n        // return the list, with any duplicates filtered out\n        return list.filter((value, index) => list.indexOf(value) === index);\n    } else {\n        // failed to obtain anything, better alert this\n        console.error(\"Can't get siblings!\");\n    }\n}\n\n// fieldtrip_id of all fieldtrip is -1\nconst allFieldtripId = -1;\n// converted data for fieldtrips\nconst fieldtripsData = arrOfObjToObj(FieldtripsData.fieldtrip, \"fieldtrip_id\");\n// converted data for stories\nconst formattedStoryData = arrOfObjToObj(AllStories, \"story_id\");\n// converted general place data\nconst placesData = arrOfObjToObj(places.place, \"place_id\");\n// converted data for mentioned places\nconst placesMentionedData = arrOfObjToObj(PlacesMentionedData.place, \"place_id\");\n// converted data for people\nconst realPeopleData = arrOfObjToObj(AllInformants, \"person_id\");\n// converted data for places with collected stories\nconst storiesCollectedData = arrOfObjToObj(StoriesCollectedData.place, \"place_id\");\n\n// data for the ontology types\nconst data = {\n    \"keywords\": dataKeywords.keyword,\n    \"tango\": dataTango.tango_index,\n    \"etk\": dataETK.etk_index,\n    \"genre\": dataGenre.genre,\n    \"fieldtrips\": FieldtripsData.fieldtrip,\n    \"people\": informants.informant,\n    \"places\": places.place,\n    \"stories\": storySearch.story,\n};\n\n// data for keywords\nconst keywords = {\n    \"name\": \"keywords\",\n    \"children\": getSiblings(data.keywords, \"keyword_name\"),\n};\n\n// just a bunch of data for the ontologies\nconst ListModel = {\n    \"People\": {\n        \"name\": \"People\",\n        \"children\": getSiblings(data.people, \"full_name\"),\n        \"level\": 2,\n    },\n    \"Places\": {\n        \"name\": \"Places\",\n        \"children\": getSiblings(data.places, \"name\"),\n        \"level\": 2,\n    },\n    \"Stories\": {\n        \"name\": \"Stories\",\n        \"children\": getSiblings(data.stories, \"full_name\"),\n        \"level\": 2,\n    },\n    \"ETK Index\": {\n        \"name\": \"ETK Index\",\n        \"children\": getSiblings(data.etk, \"heading_english\"),\n        \"level\": 2,\n    },\n    \"Keywords\": {\n        \"name\": \"Keywords\",\n        \"children\": getSiblings(data.keywords, \"keyword_name\"),\n        \"level\": 2,\n    },\n    \"Fieldtrips\": {\n        \"name\": \"Fieldtrips\",\n        \"children\": getSiblings(data.fieldtrips, \"fieldtrip_name\"),\n        \"level\": 2,\n    },\n    \"Genres\": {\n        \"name\": \"Genres\",\n        \"children\": getSiblings(data.genre, \"name\"),\n        \"level\": 2,\n    },\n    \"Tangherlini Index\": {\n        \"name\": \"Tangherlini Index\",\n        \"children\": getSiblings(data.tango, \"type\"),\n        \"level\": 2,\n    },\n};\n\n/**\n * Used for tangoTypes\n * @param {*} value The value that the key should match\n * @param {boolean} isObj Controls whether the objects or their names should be returned\n * @returns {Array} An array of same key:pair value (i.e. gets me a list of all children of \"Places\")\n */\nfunction getChildren(value, isObj) {\n    // data.tango filtered for items whose type matches the passed value\n    let items = data.tango.filter(item => item.type === value);\n    // if objects are not desired\n    if (isObj === false) {\n        // replace each object in the result with its name\n        items = items.map(item => item.name);\n    }\n    // return the filtered, possibly modified list\n    return items;\n}\n\n// array of occupations\nexport const OccupationDictionary = occupations.occupations;\n\n// use this to get the display attribute for different ontologies\nexport const ontologyToDisplayKey = {\n    \"ETK Index\": \"heading_english\",\n    \"Tangherlini Index\": \"type\",\n    \"Fieldtrips\": \"fieldtrip_name\",\n    \"Genres\": \"name\",\n    \"People\": \"full_name\",\n    \"Places\": \"name\",\n    \"Stories\": \"full_name\",\n    \"Keyword\": \"keyword_name\",\n};\n\n// given an object, return the appropriate display attribute\n/**\n * @return {string}\n */\nexport function DisplayArtifactToDisplayKey(DisplayArtifact) {\n    if (\"keyword_name\" in DisplayArtifact) {\n        return \"keyword_name\";\n    } else if (\"search_string\" in DisplayArtifact) {\n        return \"search_string\";\n    } else if (\"full_name\" in DisplayArtifact) {\n        return \"full_name\";\n    } else if (\"name\" in DisplayArtifact) {\n        return \"name\";\n    } else if (\"fieldtrip_name\" in DisplayArtifact) {\n        return \"fieldtrip_name\";\n    }\n}\n\n/**\n * Find the ontology of a display artifact\n * @param {Object} DisplayArtifact Display Artifact to find ontology of\n * @returns {String} Ontology of the artifact\n */\nexport function DisplayArtifactToOntology(DisplayArtifact) {\n    if (DisplayArtifact.hasOwnProperty(\"story_id\")) {\n        return \"Stories\";\n    } else if (DisplayArtifact.hasOwnProperty(\"place_id\")) {\n        return \"Places\";\n    } else if (DisplayArtifact.hasOwnProperty(\"person_id\")) {\n        return \"People\";\n    } else if (DisplayArtifact.hasOwnProperty(\"fieldtrip_id\")) {\n        return \"Fieldtrips\";\n    } else {\n        console.warn(\"Artifact is invalid!\", DisplayArtifact);\n    }\n}\n\n// the ID attribute for different data types\nexport const ontologyToID = {\n    \"Stories\": \"story_id\",\n    \"Places\": \"place_id\",\n    \"People\": \"person_id\",\n    \"Fieldtrips\": \"fieldtrip_id\",\n};\n\n// get the id\n/**\n * @return {string}\n */\nexport function ArtifactoID(DisplayArtifact) {\n    if (typeof DisplayArtifact === \"string\") {\n        if (\"story_id\" in DisplayArtifact) {\n            return \"story_id\";\n        } else if (\"place_id\" in DisplayArtifact) {\n            return \"place_id\";\n        } else if (\"people_id\" in DisplayArtifact) {\n            return \"people_id\";\n        }\n    }\n    return \"you screwed up. this doesnt have an id\";\n}\n\n// data for the tangherlini index part of topic & index navigator\nexport const tangoTypes = {\n    \"People Classes\": {\n        \"name\": \"People Classes\",\n        \"children\": getChildren(\"People Classes\", true),\n        \"level\": 3,\n    },\n    \"Place Classes\": {\n        \"name\": \"Places\",\n        \"children\": getChildren(\"Place Classes\", true),\n        \"level\": 3,\n    },\n    \"Tools, Items and Conveyances\": {\n        \"name\": \"Tools, Items and Conveyances\",\n        \"children\": getChildren(\"Tools, Items and Conveyances\", true),\n        \"level\": 3,\n    },\n    \"Supernatural Beings\": {\n        \"name\": \"Supernatural Beings\",\n        \"children\": getChildren(\"Supernatural Beings\", true),\n        \"level\": 3,\n    },\n    \"Animals\": {\n        \"name\": \"Animals\",\n        \"children\": getChildren(\"Animals\", true),\n        \"level\": 3,\n    },\n    \"Actions or events\": {\n        \"name\": \"Actions or events\",\n        \"children\": getChildren(\"Actions or events\", true),\n        \"level\": 3,\n    },\n    \"Time, Season, Weather\": {\n        \"name\": \"Time, Season, Weather\",\n        \"children\": getChildren(\"Time, Season, Weather\", true),\n        \"level\": 3,\n    },\n    \"Resolution\": {\n        \"name\": \"Resolution\",\n        \"childArray\": getChildren(\"Resolution\", false),\n        \"children\": getChildren(\"Resolution\", true),\n        \"level\": 3,\n    },\n    \"Stylistics\": {\n        \"name\": \"Stylistics\",\n        \"children\": getChildren(\"Stylistics\", true),\n        \"level\": 3,\n    },\n};\n\n/**\n * Retrieve items between two specified years\n * @param {*} startYear Earlier boundary of the time interval\n * @param {*} endYear Later boundary of the time interval\n * @param {*} ontology Ontology of the items to retrieve\n * @returns {Array} All desired items in the specified range\n */\nexport function dateFilterHelper(startYear, endYear, ontology) {\n    // go through fieldtrips to see which fieldtrips fit within dates\n    const fieldtripsInDates = data.fieldtrips.filter((fieldtrip) =>\n        parseInt(fieldtrip.start_date, 10) >= startYear &&\n        parseInt(fieldtrip.end_date, 10) <= endYear),\n        // get the key needed to retrieve IDs\n        IDKey = ontologyToID[ontology];\n    let fieldtripKey,\n        // array to store IDs of items to return\n        UniqueItemIDs = [],\n        // array to store the actual items to return\n        UniqueItems = [];\n    // handling to get the necessary objects from fieldtrips, due to weird data\n    switch (ontology) {\n        case \"Fieldtrips\":\n            // we already have the fieldtrips in range, so we can return that and stop\n            return fieldtripsInDates;\n        case \"People\":\n            fieldtripKey = {\n                \"firstKey\": \"people_visited\",\n                \"secondKey\": \"person\",\n            };\n            break;\n        case \"Places\":\n            fieldtripKey = {\n                \"firstKey\": \"places_visited\",\n                \"secondKey\": \"place\",\n            };\n            break;\n        case \"Stories\":\n            fieldtripKey = {\n                \"firstKey\": \"stories_collected\",\n                \"secondKey\": \"story\",\n            };\n            break;\n        default:\n            // invalid ontology, warn this and return nothing\n            console.warn(`Invalid ontology: ${ontology}`);\n            return [];\n    }\n    // for fieldtrips that fit within dates\n    fieldtripsInDates.forEach((fieldtrip) => {\n        let uncleanedItems;\n        // if we can directly get an array, it is good data and we can just use that\n        if (Array.isArray(fieldtrip[fieldtripKey.firstKey]) === true) {\n            uncleanedItems = fieldtrip[fieldtripKey.firstKey];\n        } else {\n            // bad data, must use the ugly double key access to get the proper array\n            uncleanedItems = fieldtrip[fieldtripKey.firstKey][fieldtripKey.secondKey];\n        }\n        // for each of the retrieved items\n        arrayTransformation(uncleanedItems).forEach((item) => {\n            // make sure we aren't adding a dupe item\n            if (UniqueItemIDs.includes(item[IDKey]) === false) {\n                // add it to our array to return\n                UniqueItems.push(item);\n                // add it to the ID list of found items\n                UniqueItemIDs.push(item[IDKey]);\n            }\n        });\n    });\n    return UniqueItems;\n}\n\n/**\n * Retrieve a fieldtrip by its ID\n * @param {Number} fieldtrip_id The ID of the fieldtrip to get\n * @returns {Fieldtrip} The requested fieldtrip, or null if the ID is invalid\n */\nexport function getFieldtripsByID(fieldtrip_id) {\n    // if anything but the all fieldtrip is selected\n    if (fieldtrip_id !== allFieldtripId) {\n        // check if the fieldtrip ID is valid\n        if (fieldtripsData.hasOwnProperty(fieldtrip_id)) {\n            // retrieve the relevant information\n            // iMPORTANT: use spread syntax so that we don't mutate the original fieldtrip data\n            let fieldtripObject = {...fieldtripsData[fieldtrip_id]};\n            // if people_visited exists in fieldtripObject\n            if (\"people_visited\" in fieldtripObject) {\n                // ensure that people_visited is an array\n                fieldtripObject.people_visited = arrayTransformation(fieldtripObject.people_visited.person);\n            }\n            // if places_visited in fieldtripObject\n            if (\"places_visited\" in fieldtripObject) {\n                // ensure that places_visited is an array\n                fieldtripObject.places_visited = arrayTransformation(fieldtripObject.places_visited.place);\n            }\n            // if stories_collected in fieldtripObject\n            if (\"stories_collected\" in fieldtripObject) {\n                // ensure that stories_collected is an array\n                fieldtripObject.stories_collected = arrayTransformation(fieldtripObject.stories_collected.story);\n            }\n            // return the object\n            return fieldtripObject;\n        } else {\n            // if not, return null and warn of an invalid ID\n            console.warn(`Fieldtrip ID ${fieldtrip_id} is invalid.`);\n            return null;\n        }\n    } else { // else, the all fieldtrip is selected\n        // basic object to store the people, places, stories\n        let allFieldtrip = {\n            \"people_visited\": [],\n            \"places_visited\": [],\n            \"stories_collected\": [],\n        };\n        // loop through all fieldtrips\n        for (let fieldtripIdLoop in fieldtripsData) {\n            // get the fieldtrip\n            let fieldtrip = fieldtripsData[fieldtripIdLoop];\n            // don't use the all fieldtrip\n            if (fieldtripIdLoop !== allFieldtripId.toString()) {\n                // for people, places, associated with each fieldtrip\n                for (let ontology in allFieldtrip) {\n                    // get an array of the current ontology's names already stored\n                    const allFieldtripKeyNames = allFieldtrip[ontology].map(element => element.full_name);\n                    // handling for the weirdly structured data, the key needed to get the relevant array from the fieldtrip\n                    const currentKey = Object.keys(fieldtrip[ontology])[0];\n                    // obtain the array from the fieldtrip\n                    let fieldtripValue = fieldtrip[ontology][currentKey];\n                    // enssure that the data is indeed an array\n                    fieldtripValue = arrayTransformation(fieldtripValue);\n                    // add to our ontology's array the elements from the current fieldtrip's ontology\n                    allFieldtrip[ontology].push(...fieldtripValue.filter(\n                        // but make sure we don't add duplicates\n                        datum => allFieldtripKeyNames.includes(datum.full_name) === false\n                    ));\n                }\n            }\n        }\n        // add in other necessary info for the total fieldtrip\n        allFieldtrip = {\n            ...allFieldtrip,\n            \"end_date\": \"1898-06-08\",\n            \"fieldtrip_id\": allFieldtripId,\n            \"fieldtrip_name\": \"All fieldtrips\",\n            \"shapefile\": \"\",\n            \"start_date\": \"1887-02-03\",\n        };\n        // return our created mash of the fieldtrips\n        return allFieldtrip;\n    }\n}\n\n// sometimes it's used with a parameter...but it has no parameters\n/**\n * Retrieves keywords, combined with stories.\n * @returns {Array} Keywords\n */\nexport function getKeywords() {\n    return keywords.children.concat(ListModel.Stories.children);\n}\n\n/**\n * Retrieve the children of the specified ontology in ListModel\n * @param {*} ontology The property of ListModel to use\n * @returns {Array} The requested ontology's children array\n */\nexport function getList(ontology) {\n    // just get the data from ListModel\n    return ListModel[ontology].children;\n}\n\n/**\n * Retrieve a person by its ID\n * @param {Number} person_id The ID of the person to get\n * @returns {Person} The requested person, or null if the ID is invalid\n */\nexport function getPeopleByID(person_id) {\n    // check if the person ID is valid\n    if (realPeopleData.hasOwnProperty(person_id)) {\n        // an object to store the person;\n        let personObject = realPeopleData[person_id];\n        if (typeof personObject === \"object\") {\n            // if places exists in personObject\n            const DefinedPlaces = \"places\" in personObject,\n                // if stories exists in personObject\n                DefinedStories = \"stories\" in personObject,\n                // if place exists in  places\n                DefinedPlace = \"place\" in personObject.places,\n                // if story defined inside story\n                DefinedStory = \"story\" in personObject.stories;\n            // if places attribute is valid\n            if (DefinedPlaces && DefinedPlace) {\n                // ensure that places is a proper array\n                personObject.places = arrayTransformation(personObject.places.place);\n            }\n            // if stories attribute is valid\n            if (DefinedStories && DefinedStory) {\n                // ensure that stories is a proper array\n                personObject.stories = arrayTransformation(personObject.stories.story);\n            }\n            // return the object\n            return personObject;\n        } else {\n            // if the ID is invalid, warn this and return null\n            console.warn(`Person ID ${person_id} is invalid.`);\n            return null;\n        }\n    } else {\n        // if the ID is invalid, warn this and return null\n        console.warn(`Person ID ${person_id} is invalid.`);\n        return null;\n    }\n}\n\n/**\n * Retrieve a place by its id\n * @param {Number} place_id The ID of the place to get\n * @returns {Place} The requested place, or null if the ID is invalid\n */\nexport function getPlacesByID(place_id) {\n    // if the place ID is valid\n    if (placesData.hasOwnProperty(place_id)) {\n        // retrieve the relevant place\n        let placeObject = placesData[place_id];\n        // if the people attribute is properly defined\n        if (typeof placeObject.people !== \"undefined\" && placeObject.people !== [] && placeObject.people !== null) {\n            // ensure that the placeData's people is an array, and set the object's people to it\n            placeObject.people = arrayTransformation(placesData[place_id].people);\n        } else {\n            // delete people if it's not defined\n            delete placeObject.people;\n        }\n        // if place is a collected story here place\n        if (place_id in storiesCollectedData) {\n            // ensure that storiesCollected is an array\n            placeObject.storiesCollected = arrayTransformation(storiesCollectedData[place_id].stories.story);\n        }\n        // if place is mentioned\n        if (place_id in placesMentionedData) {\n            // ensure that storiesMentioned is an array\n            placeObject.storiesMentioned = arrayTransformation(placesMentionedData[place_id].stories.story);\n        }\n        return placeObject;\n    } else {\n        // if the place ID is invalid, warn this and return null\n        console.warn(`Place ID ${place_id} is invalid.`);\n        return null;\n    }\n}\n\n/**\n * Retrieve a story by its ID\n * @param {Number} story_id The ID of the story to get\n * @returns {Story} The requested story, or null if the ID is invalid\n */\nexport function getStoryByID(story_id) {\n    // if the story ID is valid\n    if (formattedStoryData.hasOwnProperty(story_id)) {\n        // just get it from the relevant array\n        return formattedStoryData[story_id];\n    } else {\n        // if the story ID is invalid, warn this and return null\n        console.warn(`Story ID ${story_id} is invalid.`);\n        return null;\n    }\n}\n\n/**\n * Retrieve a story's manuscript image URI by its ID\n * @param {Number} story_id The ID of the story to get\n * @returns {Array} The URLs of the image as strings\n */\nexport function getManuscriptURI(story_id){\n    let StoryManuscriptData = ManuscriptData[\"story\"].filter(obj => {\n        return obj.id === story_id\n    })[0];\n    let ManuscriptImgObjs = StoryManuscriptData[\"images\"];\n    if(ManuscriptImgObjs !== undefined){\n        // there are images!\n        ManuscriptImgObjs = ManuscriptImgObjs[\"image\"];\n        if(!Array.isArray(ManuscriptImgObjs)){\n            // IF it's just 1 image, wrap it in an array\n            ManuscriptImgObjs = [ManuscriptImgObjs]\n        }\n        let ManuscriptURLs = [];\n        ManuscriptImgObjs.forEach((image)=>{\n            let ImagePath = image[\"image_path\"];\n            // Check if there's a valid image filename (they all start with \"B\")\n            let BIndex = ImagePath.indexOf(\"B\");\n            let BASEURL = \"https://s3-us-west-1.amazonaws.com/etkdiary/\";\n            if(BIndex > 0){\n                ImagePath = ImagePath.substring(BIndex);\n                ImagePath = ImagePath.replace(\".gif\",\".tif\");\n                ManuscriptURLs.push(BASEURL + ImagePath); // only save the image path which contains the image name\n            }\n        });\n        console.log(ManuscriptURLs);\n        return ManuscriptURLs;\n    }\n    console.warn(\"No images!\");\n    return [];\n}\n\n/**\n * Retrieve a genre by its ID\n * @param {Number} genre_id The ID of the genre to get\n * @returns {Object} The genre object\n */\nexport function getGenreByID(genre_id) {\n    const genre = dataGenre.genre.find((matchingGenre) => matchingGenre.id === genre_id);\n    if (genre) {\n        return genre;\n    } else {\n        console.warn(\"Invalid genre ID\");\n        return null;\n    }\n}\n\n/**\n * Retrieve an ETK index by its ID\n * @param {Number} etk_id The ID of the ETK index to get\n * @returns {Object} The ETK object\n */\nexport function getETKByID(etk_id) {\n    const etk = dataETK.etk_index.find((matchingETK) => matchingETK.id === etk_id);\n    if (etk) {\n        return etk;\n    } else {\n        console.warn(\"Invalid ETK ID\");\n        return null;\n    }\n}\n\n/**\n * Retrieve a Tango index by its ID\n * @param {Number} tango_id The ID of the Tango index to get\n * @returns {Object} The Tango object\n */\nexport function getTangoByID(tango_id) {\n    const tango = data.tango.find((matchingTango) => matchingTango.id === tango_id);\n    if (tango) {\n        return tango;\n    } else {\n        console.warn(\"Invalid Tango ID\");\n        return null;\n    }\n}\n","/*\n* Session Storage Functions with type + data checking\n* */\n\n/**\n* Sets Session Storage Data - Performs typecheck of data stored in Session Storage before setting it in sessionStorage\n* @param {String} name Name of the item to be stored\n* @param {Object} object Object to be stored\n* */\nexport function setSessionStorage(name, object) {\n    // make sure the name is a string\n    if (typeof name !== \"string\") {\n        throw new Error(\"Name is not a String!\");\n    }\n    // make sure that we are setting an object\n    if (!(object instanceof Object)) {\n        throw new Error(\"Object is not an Object!\");\n    }\n    sessionStorage.setItem(name, JSON.stringify(object));\n}\n\n/**\n * Gets Session Storage Data - Performs typecheck of data retrieved, returns false if data is null or not an object\n * @param {String} ItemName Name of the item to be retrieved\n * @returns {Object} null if invalid session retrieval, or the SessionItem found in sessionStorage\n* */\nexport function getSessionStorage(ItemName) {\n    // get the relevant item from session storage\n    const SessionItem = JSON.parse(sessionStorage.getItem(ItemName));\n    // return null if it isn't an object\n    if (!(SessionItem instanceof Object)) {\n        return null;\n    } else {\n        // success! return the retrieved item\n        return SessionItem;\n    }\n}\n","// functions to get people, places, stories\nimport * as model from \"../../data-stores/DisplayArtifactModel\";\n// function to ensure an input is an array\nimport {arrayTransformation} from \"../../utils\";\n// functions to get and set sesion storage\nimport {getSessionStorage, setSessionStorage} from \"../../data-stores/SessionStorageModel\";\nimport {getPeopleByID} from \"../../data-stores/DisplayArtifactModel\";\nimport {getPlacesByID} from \"../../data-stores/DisplayArtifactModel\";\n\n// colors of the nodes on the graph\nexport const nodeColors = {\n    \"People\": \"blue\",\n    \"Places\": \"red\",\n    \"Stories\": \"grey\",\n    \"Fieldtrips\": \"green\",\n    \"default\": \"black\",\n};\n\n// colors of primary + secondary links\nconst linkColors = {\n    \"primary\": \"lightblue\",\n    \"secondary\": \"lightgreen\",\n};\n\n// labels for primary links with only one possible relationship\nconst primaryLinkNames = {\n    \"People\": {\n        \"Fieldtrips\": \"met during\",\n        \"Stories\": \"told\",\n    },\n    \"Fieldtrips\": {\n        \"People\": \"met\",\n        \"Places\": \"visited\",\n        \"Stories\": \"told\",\n    },\n    \"Stories\": {\n        \"People\": \"told by\",\n        \"Fieldtrips\": \"told during\",\n    },\n    \"Places\": {\n        \"Fieldtrips\": \"visited during\",\n    },\n};\n\n// labels for secondary links with only one possible relationship\nconst secondaryLinkNames = {\n    \"Places-Places-Fieldtrips\": \"also visited during \",\n    \"Stories-Stories-People\": \"also told by \",\n    \"Stories-Stories-Fieldtrips\": \"also told during \",\n};\n\n/**\n * Get the common elements of two arrays\n * @param {Array} array1 An array to check for common elements with\n * @param {Array} array2 Another array to check for common elements with\n * @returns {Array} An array contianing the elements present in both arrays\n */\nexport function commonElements(array1, array2) {\n    // return array1, filtered for only elements that are also in array2\n    return array1.filter((element) => array2.includes(element));\n}\n\n/**\n * Get all IDs of a specified node type\n * @param {Array} nodeCategories An array containing all the nodes\n * @param {String} type Type of node to get\n * @returns {Array} An array containing the relevant nodes' IDs\n */\nfunction nodesToIDArray(nodeCategories, type) {\n    // for each node of the specified type, extract its ID\n    return nodeCategories[type].map(node => node.itemID);\n}\n\n/**\n * Retrieve the graph data from storage\n * @returns {Object} Nodes and links found in storage\n */\nexport function initializeGraph() {\n    // get data from sessionStorage\n    const graphData = getSessionStorage(\"graphData\");\n    // if we couldn't load any data default to this\n    if (!graphData) {\n        return {\n            // nodes needs a minimum of 1 object\n            \"nodes\": [{\"id\": \"blank\"}],\n            // links is empty since no data\n            \"links\": [],\n        };\n    } else {\n        // get the nodes and links from loaded data\n        return graphData;\n    }\n}\n\n/**\n * Retrieve all nodes of the graph from storage\n * @returns {Object} An object containing the relevant nodes, categorized by type\n */\nexport function initializeNodeCategories() {\n    // get the saved data from sessionStorage\n    const nodeCategories = getSessionStorage(\"nodeCategories\");\n    // if we were unable to get anything from sessionStorage\n    if (!nodeCategories) {\n        // set the arrays to be empty\n        return {\n            \"Fieldtrips\": [],\n            \"People\": [],\n            \"Places\": [],\n            \"Stories\": [],\n        };\n    } else {\n        return nodeCategories;\n    }\n}\n\n/**\n * Get primarily associated data\n * @param {Number} itemID The numeric ID referring to the node\n * @param {String} type The type of the node\n * @returns {Object} An object with \"Fieldtrips\", \"People\", \"Places\", \"Stories\" attributes containing any primarily related data\n */\nfunction getPrimaryAssociates(itemID, type) {\n    // object to store the associated data.\n    let primaryAssociates = {\n        \"Fieldtrips\": [],\n        \"People\": [],\n        \"Places\": [],\n        \"Stories\": [],\n    };\n    // based on the type of the node\n    switch (type) {\n        case \"Stories\": {\n            // get the story\n            const story = model.getStoryByID(itemID);\n            // if it's an actual story\n            if (story !== null) {\n                // get the informant's ID, fieldtrip, places relevant to this story\n                const {fieldtrip, informant_id, places} = model.getStoryByID(itemID);\n                // set the associated person to be the author.\n                primaryAssociates.People = arrayTransformation(informant_id);\n                // extract relevant places, ensure that it is an array, and get their IDs\n                primaryAssociates.Places = arrayTransformation(places.place).map(place => place.place_id);\n                // get the fieldtrip associated with the story, array-ified\n                primaryAssociates.Fieldtrips = arrayTransformation(fieldtrip.id);\n            } else {\n                // return null since the story wasn't defined\n                return null;\n            }\n            break;\n        }\n        case \"People\": {\n            // get the person\n            const person = model.getPeopleByID(itemID);\n            // if it's an actual person\n            if (person !== null) {\n                // get the person's relevant places and stories\n                const {places, stories} = person;\n                // extract relevant places, ensure that it is an array, and get their IDs\n                primaryAssociates.Places = arrayTransformation(places).map(place => place.place_id);\n                // extract stories, ensure that it is an array, and get their IDs\n                primaryAssociates.Stories = arrayTransformation(stories).map(story => story.story_id);\n            } else {\n                // return null since the person wasn't defined\n                return null;\n            }\n            break;\n        }\n        case \"Places\": {\n            // get the place\n            const place = model.getPlacesByID(itemID);\n            // if it's an actual place\n            if (place !== null) {\n                // get the place's relevant people and stories\n                const {fieldtrips, people, storiesCollected, storiesMentioned} = place;\n                // oh dear god please fix the data so i dont have to do this weird stuff\n                // basically here's how the data currently looks:\n                // [\n                //     person: {\n                //         personObject\n                //     }\n                // ]\n                // so we need to extract person, then extract attributes from the object inside it\n                // get the relevant people, ensure that it is an array, and get their IDs\n                primaryAssociates.People = arrayTransformation(people).map(person => person.person.person_id);\n                // extract stories collected here, ensure that it is an array, get their IDs\n                // repeat for stories mentioning this\n                // combine the two arrays\n                primaryAssociates.Stories = [\n                    ...arrayTransformation(storiesCollected).map(story => story.story_id),\n                    ...arrayTransformation(storiesMentioned).map(story => story.story_id),\n                ];\n                // get the fieldtrips associated with the place, array-ified\n                if (fieldtrips !== null) {\n                    primaryAssociates.Fieldtrips = arrayTransformation(fieldtrips.fieldtrip_id);\n                }\n            } else {\n                // return null since the place wasn't defined\n                return null;\n            }\n            break;\n        }\n        case \"Fieldtrips\": {\n            // get the fieldtrip\n            const fieldtrip = model.getFieldtripsByID(itemID);\n            // if it's an actual fieldtrip\n            if (fieldtrip !== null) {\n                // get the people and places visited as well as the collected stories\n                const {people_visited, places_visited, stories_collected} = fieldtrip;\n                // get the people visited, ensure that it is an array, and get their IDs\n                primaryAssociates.People = arrayTransformation(people_visited).map(person => person.person_id);\n                // get places visited, ensure that it is an array, and get their IDs\n                primaryAssociates.Places = arrayTransformation(places_visited).map(place => place.place_id);\n                // get collected stories, ensure that it is an array, and get their IDs\n                primaryAssociates.Stories = arrayTransformation(stories_collected).map(story => story.story_id);\n            } else {\n                // return null since the fieldtrip wasn't defined\n                return null;\n            }\n            break;\n        }\n        default:\n            // unhandled node type, log that out and stop\n            console.warn(`Linkages not yet implemented for node type: ${type}`);\n            return;\n    }\n    return primaryAssociates;\n}\n\n/**\n * Retrieve a node by its name\n * @param {String} name The display name of the node\n * @param {Object} nodeCategories The nodes to search through (should be all nodes on the graph)\n * @returns {Node} A node that matches the specified name, or null if no match was found\n */\nexport function getNodeById(name, nodeCategories) {\n    // for each of the categories of nodes (people, places, fieldtrips, stories)\n    for (let nodeType in nodeCategories) {\n        // attempt to find a node whose name matches the passed name\n        let node = nodeCategories[nodeType].find(nodeToTest => nodeToTest.id === name);\n        // if we actually found such a node\n        if (typeof node !== \"undefined\") {\n            // return that node\n            return node;\n        }\n    }\n    // if we couldn't find a match, return null\n    return null;\n}\n\n/**\n * Create label for primary link between nodes\n * @param {Number} sourceID The id of the source node\n * @param {String} sourceType The node type of the source\n * @param {Object} target The target node\n * @returns {String} A string describing the connection between two nodes\n */\nfunction makePrimaryLabel(sourceID, sourceType, target) {\n    let targetType = target.type;\n    if (sourceType === \"People\" && targetType === \"Places\") {\n        let source = getPeopleByID(sourceID);\n        let targetPlace = source.places.find(place => place.place_id === target.itemID);\n        switch (targetPlace.type) {\n            case \"birth_place\":\n                return \"born\";\n            case \"death_place\":\n                return \"died\";\n            case \"story_place\":\n                return \"stories recorded at\";\n            case \"place_mentioned\":\n                return \"mentions\";\n            default:\n                return \"\";\n        }\n    }\n    if (sourceType === \"Places\") {\n        let place = getPlacesByID(sourceID);\n        if (targetType === \"People\") {\n            let targetPerson = place.people.find(person => person.person.person_id === target.itemID);\n            return targetPerson.person.relationship.replace(\",\", \" &\");\n        }\n        if (targetType === \"Stories\") {\n            if (place.storiesMentioned.find(story => story.story_id === target.itemID) !== undefined) {\n                return \"mentioned in\";\n            } else {\n                return \"collected\";\n            }\n        }\n    }\n    if (sourceType === \"Stories\" && targetType === \"Places\") {\n        let targetPlace = getPlacesByID(target.itemID);\n        if (targetPlace.storiesMentioned.find(story => story.story_id === sourceID) !== undefined) {\n            return \"mentions\";\n        } else {\n            return \"collected\";\n        }\n    }\n    return primaryLinkNames[sourceType][targetType];\n}\n\n/**\n * Create label for secondary link between nodes\n * @param {String} linkName The name of the link node\n * @param {String} linkType The node type of the link node\n * @param {String} sourceType The node type of the source node\n * @param {String} targetType The node type of the target node\n * @returns {String} A string describing the connection between two nodes\n */\nfunction makeSecondaryLabel(linkName, linkType, sourceType, targetType) {\n    let types = sourceType + \"-\" + targetType + \"-\" + linkType;\n    if (secondaryLinkNames.hasOwnProperty(types)) {\n        return secondaryLinkNames[types] + linkName;\n    } else {\n        return \"related by \" + linkName;\n    }\n}\n\n/**\n * Create linkages for a node\n * @param {Node} node The node to create linkages for\n * @param {Array} nodeCategories An array of nodes to use to find linkages\n * @returns {Array} An array containing the formed linkages\n */\nexport function createLinkage({id, itemID, type}, nodeCategories) {\n    // array to contain links\n    let links = [];\n    // get primary associates for the node\n    const primaryAssociates = getPrimaryAssociates(itemID, type);\n    // get the nodes already on the graph\n    // TODO: ask Tango about priority of types\n    const pastNodes = {\n        \"Fieldtrips\": nodesToIDArray(nodeCategories, \"Fieldtrips\"),\n        \"People\": nodesToIDArray(nodeCategories, \"People\"),\n        \"Places\": nodesToIDArray(nodeCategories, \"Places\"),\n        \"Stories\": nodesToIDArray(nodeCategories, \"Stories\"),\n    };\n    // for fieldtrips, people, places, stories\n    for (let nodeType in pastNodes) {\n        // add to links a series of links, not an array of links\n        links.push(\n            // get any primarily related nodes that are already on the the graph\n            ...commonElements(primaryAssociates[nodeType], (pastNodes[nodeType]))\n                // for all the matches, use their numeric ID\n                .map(function(matchID) {\n                    // create a link\n                    let targetNode = nodeCategories[nodeType].find(node => node.itemID === matchID);\n                    return {\n                        // from the current node\n                        \"source\": id,\n                        // to the node specified by matchID\n                        \"target\": targetNode.id,\n                        // no intermediate node connecting the two\n                        \"linkNode\": null,\n                        // set its color to primary link color\n                        \"color\": linkColors.primary,\n                        // describe connection between nodes\n                        \"label\": makePrimaryLabel(itemID, type, targetNode),\n                        // copy of label\n                        \"hiddenLabel\": makePrimaryLabel(itemID, type, targetNode),\n                    };\n                })\n        );\n    }\n    // for fieldtrips, people, places, stories\n    for (let nodeType in primaryAssociates) {\n        // for the array of associated nodes by ontology, retrieve their IDs\n        primaryAssociates[nodeType].forEach(function(linkID) {\n            // variable to store the name of the linking node\n            let object;\n            // based on the type of node, get the object associated with the current ID\n            switch (nodeType) {\n                case \"Fieldtrips\":\n                    object = model.getFieldtripsByID(linkID);\n                    break;\n                case \"People\":\n                    object = model.getPeopleByID(linkID);\n                    break;\n                case \"Places\":\n                    object = model.getPlacesByID(linkID);\n                    break;\n                case \"Stories\":\n                    object = model.getStoryByID(linkID);\n                    break;\n                default:\n                    // new node type we haven't prepared for yet, warn this and stop\n                    console.warn(`Unhandled node type ${nodeType}`);\n                    return;\n            }\n            // assuming that the ID is valid\n            if (object !== null) {\n                // get the name of the object\n                const name = object[model.ontologyToDisplayKey[nodeType]];\n                // get any potential secondary associates\n                const secondaryAssociates = getPrimaryAssociates(linkID, nodeType);\n                // for fieldtrips, people, places, stories\n                for (let prevNodeType in pastNodes) {\n                    // if any secondary associated nodes that are already on the graph\n                    commonElements(secondaryAssociates[prevNodeType], pastNodes[prevNodeType])\n                        // convert each of the numeric IDs to the node's name\n                        .map(matchID => nodeCategories[prevNodeType].find(node => node.itemID === matchID).id)\n                        // filter out links that point right back to the current node\n                        .filter(matchID => matchID !== id)\n                        // and, for each of the remaining secondarily associated nodes' links\n                        .forEach(function(matchID) {\n                            // if the link doesn't already exist in some sort of way\n                            if (links.findIndex(\n                                // the link currently being checked\n                                testLink => (\n                                    // if that link stems from the current node\n                                    (testLink.source === id &&\n                                        // and points to the secondary node\n                                        testLink.target === matchID) ||\n                                    // or, if that link starts at the secondary node\n                                    (testLink.source === matchID &&\n                                        // and points to the current node\n                                        testLink.target === id)\n                                    // whenever this condition is -1, the connection between the two doesn't exist yet, so add the link\n                                )) === -1) {\n                                // add a link\n                                links.push({\n                                    // from the current node\n                                    \"source\": id,\n                                    // to the secondarily-linked node\n                                    \"target\": matchID,\n                                    // via the intermediate primary linked node\n                                    \"linkNode\": name,\n                                    // set its color to secondary link color\n                                    \"color\": linkColors.secondary,\n                                    // describe connection between nodes\n                                    \"label\": makeSecondaryLabel(name, nodeType, type, prevNodeType),\n                                    // copy of label\n                                    \"hiddenLabel\": makeSecondaryLabel(name, nodeType, type, prevNodeType),\n                                });\n                            }\n                        });\n                }\n            }\n        });\n    }\n    // return our composite of primary and secondary links\n    return links;\n}\n\n/**\n * Creates a node object from the given inputs\n * @param {*} id The ID of the new node\n * @param {*} name The name of the new node\n * @param {String} type The type of the new node\n * @param {*} item The item associated with the node\n * @returns {Node} The node corresponding to the given input\n */\nexport function createNode(id, name, type, item) {\n    // color of the final node\n    let color = \"\";\n    // if the type has a corresponding color, in nodeColors\n    if (nodeColors.hasOwnProperty(type)) {\n        // set the color to that of nodeColors\n        color = nodeColors[type];\n    } else {\n        // use the default if we couldn't find the type in nodeColors\n        color = nodeColors.default;\n    }\n    // assemble the node\n    return {\n        // id of the node\n        \"id\": name,\n        // color of the node on the graph\n        color,\n        // item associated with the node\n        item,\n        // type of the node\n        type,\n        // id referring to item\n        \"itemID\": id,\n    };\n}\n\n/**\n * Adds a node to the graph\n * @param {*} id The ID of the node\n * @param {*} name The name of the node\n * @param {string} type The type of the node\n * @param {*} item The item associated with the node\n */\nexport function addNode(id, name, type, item) {\n    // create the node object\n    const newNode = createNode(id, name, type, item);\n    // get graph info from localstorage\n    let graphData = initializeGraph();\n    let nodeCategories = initializeNodeCategories();\n    // check if the blank node still is present\n    if (graphData.nodes[0].id === \"blank\") {\n        // remove the blank node\n        graphData.nodes.splice(0, 1);\n    }\n    // if newNode doesn't already exist\n    if (!graphData.nodes.includes(newNode)) {\n        // add it to the nodes of graphData\n        graphData.nodes.push(newNode);\n        // add it to the relevant array in nodeCategories and update sessionStorage\n        nodeCategories[type].push(newNode);\n        setSessionStorage(\"nodeCategories\", nodeCategories);\n        // add any links for this node\n        graphData.links.push(...createLinkage(newNode, nodeCategories));\n        // because people don't have a \"fieldtrip\" attribute\n        if (type === \"People\") {\n            // when a person is added, go through each of the preexisting fieldtrip nodes\n            nodeCategories.Fieldtrips.forEach(function(fieldtrip) {\n                // get any links they may have with the person\n                graphData.links.push(...createLinkage(fieldtrip, nodeCategories));\n            });\n        }\n        // filter out graph links\n        graphData.links = graphData.links\n            .filter((link, index) =>\n                // if the current link to check doesn't already exist in some sort of way\n                graphData.links.findIndex(\n                    // the link to test against\n                    testLink => (\n                        // if both share a soucre\n                        (testLink.source === link.source &&\n                            // and a target (dupes)\n                            testLink.target === link.target) ||\n                        // or, if that link ends where this one starts\n                        (testLink.source === link.source &&\n                            // and that starts where this ends (dupes, but in reverse direction)\n                            testLink.target === link.target)\n                        // this should be the first of that sort of link in order to keep it\n                    )) === index\n            );\n        // update the general graph data in session\n        setSessionStorage(\"graphData\", graphData);\n    }\n}\n","// react functionality\nimport React from \"react\";\n// prop validation\nimport PropTypes from \"prop-types\";\n// styling for the map\nimport \"./MapView.css\";\n// map functionality\nimport {\n    LayersControl,\n    Map,\n    Marker,\n    Popup,\n    TileLayer,\n    WMSTileLayer,\n    GeoJSON\n} from \"react-leaflet\";\nimport Leaflet from \"leaflet\";\nimport AugFieldtrip from \"./fieldtrip_layers/field_trip_geojsons/aug_1895_photo1.geojson\"\n\nimport {getPlacesByID} from \"../../data-stores/DisplayArtifactModel\";\nimport {arrayTransformation, getPlaceIDList} from \"../../utils\";\nimport {bindActionCreators} from \"redux\";\nimport * as tabViewerActions from \"../../actions/tabViewerActions\";\nimport connect from \"react-redux/es/connect/connect\";\n\n// constants + defaults for our map\nconst {BaseLayer} = LayersControl,\n    DEFAULT_MAP_CENTER = [56.2639, 9.5018],\n    DEFAULT_ZOOM_LEVEL = 7;\n\nclass MapView extends React.Component {\n    constructor(props) {\n        super(props);\n        this.lastclick = {\n            \"popup\": null,\n            \"time\": 0,\n        };\n        // start off with defaults\n        this.tiles = [{\n            \"name\": \"Default OpenStreet Map\",\n            \"type\": \"TILE\",\n            \"url\": \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n            \"attribution\": \"&amp;copy <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n            \"checked\": false,\n        }, {\n            \"name\": \"High Boards\",\n            \"type\": \"WMS\",\n            \"layers\": \"dtk_hoeje_maalebordsblade\",\n            \"url\": \"http://kortforsyningen.kms.dk/service?servicename=topo20_hoeje_maalebordsblade&client=arcGIS&request=GetCapabilities&service=WMS&version=1.1.1&login=tango1963&password=heimskr1;\",\n            \"format\": \"image/png\",\n            \"checked\": false,\n        }, {\n            \"name\": \"Low Boards\",\n            \"type\": \"WMS\",\n            \"layers\": \"dtk_lave_maalebordsblade\",\n            \"url\": \"http://kortforsyningen.kms.dk/service?servicename=topo20_lave_maalebordsblade&client=arcGIS&request=GetCapabilities&service=WMS&version=1.1.1&login=tango1963&password=heimskr1;\",\n            \"format\": \"image/png\",\n            \"checked\": true,\n        }];\n    }\n\n    /**\n     * Filters out invalid places from props\n     * @returns {Array<Places>} Only the valid places from props\n     */\n    prunePlaces() {\n        // for each of prop's places\n        return getPlaceIDList(arrayTransformation(this.props.places)).map((placeID) => getPlacesByID(placeID)).filter((place) =>\n            // make sure it isn't undefined\n            typeof place !== \"undefined\" &&\n            // or null\n            place !== null &&\n            // and it should have a latitude\n            place.hasOwnProperty(\"latitude\") &&\n            // and longitude\n            place.hasOwnProperty(\"longitude\"));\n    }\n\n    /**\n     * Defines the center coordinates of the map\n     * @returns {Array<Number>} 2 element array for the coordinates of the center\n     */\n    defineMapCenter() {\n        // get filtered places\n        const places = this.prunePlaces();\n        if (this.props.view === \"Fieldtrip\") {\n            //find longitude average\n            var AvgLongitude;\n            var TotalLongitude = 0;\n            places.forEach((place) => {\n                TotalLongitude += place.longitude;\n            });\n            AvgLongitude = TotalLongitude / places.length;\n            const MedianPlaceIndex = places.length / 2 | 0;\n            const MedianPlace = places[MedianPlaceIndex];\n            return [MedianPlace.latitude, AvgLongitude];\n        }\n        // if places is of an adequate size\n        else if (places.length > 0 && places.length < 20) {\n            // get the first place\n            const initialPlace = places[0];\n            // use that as the map center\n            return [initialPlace.latitude, initialPlace.longitude];\n        } else {\n            // bad places, use the default\n            return DEFAULT_MAP_CENTER;\n        }\n    }\n\n    /**\n     * Defines the zoom of the map\n     * @returns {Number} THe zoom of the map\n     */\n    defineMapZoom() {\n        // get filtered places\n        const places = this.prunePlaces();\n        if (this.props.view === \"Fieldtrip\") {\n            return 9;\n        }\n        // if places is of an adequate size\n        else if (places.length > 0 && places.length < 20) {\n            // use 14 at the zoom (any reason why 14?)\n            return 14;\n        } else {\n            // bad places, use the default\n            return DEFAULT_ZOOM_LEVEL;\n        }\n    }\n\n    renderTiles() {\n        return this.tiles.map((tile, i) => {\n            switch (tile.type) {\n                case \"TILE\":\n                    return (\n                        <BaseLayer checked={tile.checked} name={tile.name} key={i}>\n                            <TileLayer\n                                attribution={tile.attribution}\n                                url={tile.url}\n                                checked={tile.checked}\n                            />\n                        </BaseLayer>\n                    );\n                case \"WMS\":\n                    return (\n                        <BaseLayer checked={tile.checked} name={tile.name} key={i}>\n                            <WMSTileLayer\n                                layers={tile.layers}\n                                format={tile.format}\n                                url={tile.url}\n                            />\n                        </BaseLayer>\n                    );\n                default:\n                    return (\n                        <BaseLayer checked={tile.checked} name={tile.name}>\n                            <TileLayer\n                                attribution={tile.attribution}\n                                url={tile.url}\n                            />\n                        </BaseLayer>\n                    );\n            }\n        });\n    }\n\n    /**\n     * Generate the popups for the map\n     * @returns {Array<Marker>} Markers + popups\n     */\n    renderMarkers() {\n        const temp = arrayTransformation(this.props.places).map((place) => place.name);\n        // get filtered places\n        return arrayTransformation(this.props.places).filter((item, i) =>\n            temp.indexOf(item.name) === i)\n            // for each of the places, create a marker and popup\n            .map((place, i) => this.renderMarker(place, i));\n    }\n\n    renderMarker(place, i) {\n        const place2 = getPlacesByID(place.place_id);\n        if (place2 !== null) {\n            // color of the marker, default purple\n            let myCustomColour = \"#8800ff\";\n            // special non-mentioned places are red\n            if (place.type === \"story_place\" || place.type === \"birth_place\" || place.type === \"death_place\") {\n                myCustomColour = \"#ff0000\";\n                // mentioned places are blue\n            } else if (place.type === \"place_mentioned\") {\n                myCustomColour = \"#0000ff\";\n            }\n            // get name to show on the popup\n            const name = MapView.renderPopup(place2),\n                // style the popups\n                markerHtmlStyles =\n                    `background-color: ${myCustomColour};\n                    width: 1rem;\n                    height: 1rem;\n                    display: block;\n                    left: -.5rem;\n                    top: -.5rem;\n                    position: relative;\n                    border-radius: 100px;\n                    transform: rotate(45deg);\n                    border: 1px solid #FFFFFF`,\n                // create the actual icon\n                icon = Leaflet.divIcon({\n                    \"className\": \"my-custom-pin\",\n                    \"iconAnchor\": [0, 8],\n                    \"labelAnchor\": [-2, 0],\n                    \"popupAnchor\": [0, -12],\n                    \"html\": `<span style=\"${markerHtmlStyles}\" />`,\n                });\n            // return a marker at the place with the marker, opens up the place's tab on double click\n            return (\n                <Marker\n                    position={[place2.latitude, place2.longitude]}\n                    icon={icon}\n                    key={i}\n                    onClick={this.handleClick.bind(this, place, name)}>\n                    <Popup>{name}</Popup>\n                </Marker>\n            );\n        } else {\n            return null;\n        }\n    }\n\n    // click handler for popup\n    handleClick(place, name) {\n        // if double click, go to the place\n        if (this.lastclick.popup === place && Date.now() - this.lastclick.time <= 1000) {\n            this.props.actions.addTab(place.place_id, name, \"Places\");\n        } else {\n            // otherwise just update last click\n            this.lastclick = {\n                \"popup\": place,\n                \"time\": Date.now(),\n            };\n        }\n    }\n\n    /**\n     * Render text for a place's popup\n     * @param {Object} place The place to render the pop up for\n     * @returns {String} The text for the popup\n     */\n    static renderPopup(place) {\n        if (place.hasOwnProperty(\"display_name\")) {\n            return place.display_name;\n            // if it has a full_name property\n        } else if (place.hasOwnProperty(\"full_name\")) {\n            // use that for the text\n            return place.full_name;\n            // or if it has a name property\n        } else if (place.hasOwnProperty(\"name\")) {\n            // use that instead\n            return place.name;\n        } else {\n            // bad place, warn this\n            console.warn(\"Place does not have full_name or name\", place);\n            // don't return anything\n            return null;\n        }\n    }\n\n    renderFieldtripLayer(){\n        let json = {\n            \"type\": \"FeatureCollection\",\n            \"name\": \"aug_1895_photo1\",\n            \"crs\": { \"type\": \"name\", \"properties\": { \"name\": \"urn:ogc:def:crs:EPSG::3857\" } },\n            \"features\": [\n                { \"type\": \"Feature\", \"properties\": { \"Id\": 0 }, \"geometry\": { \"type\": \"LineString\", \"coordinates\": [ [ 564439.55929391970858, 6242814.630248315632343 ], [ 564714.726510920911096, 6242814.630248315632343 ], [ 564903.903972609085031, 6242797.43229725304991 ], [ 565179.071189610171132, 6242728.640493002720177 ], [ 565351.050700235879049, 6242591.056884502992034 ], [ 565488.634308736422099, 6242591.056884502992034 ], [ 565695.009721487294883, 6242556.660982377827168 ], [ 565849.791281050420366, 6242436.275324939750135 ], [ 565952.97898742579855, 6242419.077373877167702 ], [ 566245.344155489467084, 6242539.463031315244734 ], [ 566572.105225678300485, 6242677.046639814972878 ], [ 566812.87654055422172, 6242728.640493002720177 ], [ 567122.439659680472687, 6242831.828199378214777 ], [ 567346.013023493927903, 6242866.224101503379643 ], [ 567552.388436244684272, 6242935.015905753709376 ], [ 567775.961800058139488, 6242986.609758941456676 ], [ 568051.129017059225589, 6243021.005661066621542 ], [ 568205.910576622351073, 6243055.401563191786408 ], [ 568395.088038310525008, 6243055.401563191786408 ], [ 568584.265499998815358, 6243055.401563191786408 ], [ 568859.43271699990146, 6243106.995416379533708 ], [ 569100.204031875939108, 6243192.985171692445874 ], [ 569289.381493564113043, 6243244.579024880193174 ], [ 569444.163053127238527, 6243382.16263338085264 ], [ 569598.944612690364011, 6243502.548290818929672 ], [ 569805.320025441236794, 6243571.340095069259405 ], [ 569994.497487129527144, 6243588.538046131841838 ], [ 570218.070850942865945, 6243657.329850382171571 ], [ 570544.831921131699346, 6243777.715507820248604 ], [ 570630.821676444495097, 6243829.309361007995903 ], [ 570819.999138132785447, 6243880.903214194811881 ], [ 570923.186844508163631, 6243880.903214194811881 ], [ 571026.37455088365823, 6243829.309361007995903 ], [ 571249.947914696997032, 6243760.517556757666171 ], [ 571456.323327447869815, 6243657.329850382171571 ], [ 571714.292593386373483, 6243588.538046131841838 ], [ 571920.668006137246266, 6243588.538046131841838 ], [ 572281.824978451128118, 6243622.933948257006705 ], [ 572505.398342264583334, 6243691.725752507336438 ], [ 572642.981950765126385, 6243726.121654632501304 ], [ 573021.33687414159067, 6243743.319605695083737 ], [ 573348.09794433042407, 6243794.913458882831037 ], [ 573623.265161331510171, 6243863.705263132229447 ], [ 573623.265161331510171, 6243708.923703569918871 ], [ 573588.869259206345305, 6243588.538046131841838 ], [ 573588.869259206345305, 6243502.548290818929672 ], [ 573812.442623019800521, 6243536.944192944094539 ], [ 574104.807791083469056, 6243536.944192944094539 ], [ 574259.589350646594539, 6243588.538046131841838 ], [ 574465.964763397350907, 6243674.527801444754004 ] ] } },\n                { \"type\": \"Feature\", \"properties\": { \"Id\": 0 }, \"geometry\": { \"type\": \"LineString\", \"coordinates\": [ [ 574465.964763397350907, 6243674.527801444754004 ], [ 574534.75656764768064, 6243536.944192944094539 ], [ 574655.142225085641257, 6243450.954437631182373 ], [ 574741.131980398437008, 6243364.964682318270206 ], [ 574861.517637836514041, 6243227.381073817610741 ], [ 574930.309442086727358, 6243210.183122755028307 ], [ 574947.507393149309792, 6243055.401563191786408 ], [ 574981.903295274474658, 6242866.224101503379643 ], [ 575033.497148462105542, 6242677.046639814972878 ], [ 575085.091001649852842, 6242505.067129190079868 ], [ 575222.674610150395893, 6242333.087618564255536 ], [ 575274.268463338143192, 6242281.493765376508236 ], [ 575274.268463338143192, 6242161.108107938431203 ], [ 575205.476659087813459, 6242040.722450500354171 ], [ 575188.278708025231026, 6241937.534744124859571 ], [ 575136.684854837600142, 6241731.159331373870373 ], [ 575119.486903775017709, 6241559.179820748046041 ], [ 575119.486903775017709, 6241249.616701622493565 ], [ 575085.091001649852842, 6241008.8453867463395 ], [ 575085.091001649852842, 6240716.480218682438135 ], [ 575085.091001649852842, 6240510.104805931448936 ], [ 575085.091001649852842, 6240355.323246368207037 ], [ 575050.695099524687976, 6240114.551931492984295 ], [ 575119.486903775017709, 6240080.156029367819428 ] ] } },\n                { \"type\": \"Feature\", \"properties\": { \"Id\": 0 }, \"geometry\": { \"type\": \"LineString\", \"coordinates\": [ [ 575119.486903775017709, 6240080.156029367819428 ], [ 575432.489613113924861, 6240028.562176180072129 ], [ 575690.458879052428529, 6240080.156029367819428 ], [ 575931.230193928466178, 6240080.156029367819428 ], [ 576086.011753491591662, 6240080.156029367819428 ], [ 576361.178970492677763, 6240114.551931492984295 ], [ 576601.950285368598998, 6240131.749882555566728 ], [ 576842.721600244636647, 6240200.541686805896461 ], [ 577100.690866183140315, 6240234.937588931061327 ], [ 577341.46218105906155, 6240252.135539993643761 ], [ 577616.629398060147651, 6240252.135539993643761 ], [ 577926.192517186398618, 6240234.937588931061327 ], [ 578132.567929937271401, 6240148.947833618149161 ], [ 578373.339244813192636, 6240114.551931492984295 ], [ 578596.912608626647852, 6240011.364225117489696 ], [ 578734.496217127190903, 6239942.572420867159963 ], [ 578923.673678815364838, 6239804.988812366500497 ], [ 579044.05933625344187, 6239581.415448552928865 ], [ 579164.444993691402487, 6239495.425693240016699 ], [ 579233.236797941615805, 6239633.009301740676165 ], [ 579370.820406442158855, 6239770.59291024133563 ], [ 579577.195819193031639, 6239890.978567679412663 ], [ 579903.956889381865039, 6240045.760127242654562 ], [ 580144.728204257786274, 6240131.749882555566728 ], [ 580316.707714883494191, 6240234.937588931061327 ], [ 580437.093372321454808, 6240372.521197430789471 ], [ 580660.666736134910025, 6240578.896610181778669 ], [ 580815.448295698035508, 6240768.074071870185435 ], [ 580901.438051010831259, 6240957.2515335585922 ], [ 580987.42780632362701, 6241043.241288871504366 ], [ 581125.011414824286476, 6241180.824897372163832 ], [ 581142.209365886752494, 6241301.210554810240865 ], [ 581107.813463761704043, 6241404.398261185735464 ], [ 581107.813463761704043, 6241490.388016497716308 ], [ 581314.188876512460411, 6241610.77367393579334 ], [ 581503.366338200750761, 6241731.159331373870373 ], [ 581658.147897763876244, 6241817.149086686782539 ] ] } },\n                { \"type\": \"Feature\", \"properties\": { \"Id\": 0 }, \"geometry\": { \"type\": \"LineString\", \"coordinates\": [ [ 581658.147897763876244, 6241817.149086686782539 ], [ 581726.939702014089562, 6241679.565478186123073 ], [ 581933.315114764962345, 6241593.575722873210907 ], [ 582191.284380703466013, 6241541.981869685463607 ], [ 582518.045450892299414, 6241421.596212248317897 ], [ 582930.796276393928565, 6241387.200310123153031 ], [ 583205.963493395014666, 6241370.002359060570598 ], [ 583498.3286614586832, 6241370.002359060570598 ], [ 583704.704074209555984, 6241507.585967560298741 ], [ 583911.079486960428767, 6241645.169576060958207 ], [ 583979.871291210642084, 6241748.357282436452806 ], [ 584065.861046523554251, 6241971.930646250024438 ], [ 584255.038508211728185, 6242367.483520689420402 ], [ 584478.611872025183402, 6242728.640493002720177 ], [ 584616.195480525726452, 6242935.015905753709376 ], [ 584719.383186901104636, 6243141.391318504698575 ], [ 584874.16474646423012, 6243364.964682318270206 ], [ 584942.956550714559853, 6243554.142144006676972 ], [ 584908.560648589394987, 6243657.329850382171571 ], [ 585080.540159215102904, 6243880.903214194811881 ], [ 585321.311474091024138, 6243949.695018445141613 ], [ 585596.478691092110239, 6244087.278626945801079 ], [ 585923.23976128094364, 6244242.060186509042978 ], [ 586215.604929344612174, 6244328.049941821955144 ], [ 586714.345510159153491, 6244379.643795009702444 ], [ 586783.137314409366809, 6244396.841746072284877 ], [ 586937.918873972492293, 6244396.841746072284877 ], [ 587075.502482473035343, 6244448.435599260032177 ], [ 587247.48199309874326, 6244500.029452447779477 ], [ 587419.461503724451177, 6244482.831501385197043 ], [ 587608.638965412625112, 6244482.831501385197043 ], [ 587797.816427100915462, 6244448.435599260032177 ], [ 587918.202084538876079, 6244396.841746072284877 ], [ 588107.379546227166429, 6244414.039697134867311 ], [ 588210.567252602544613, 6244534.425354572944343 ], [ 588451.338567478582263, 6244775.196669449098408 ], [ 588537.328322791378014, 6244912.780277949757874 ], [ 588692.109882354503497, 6244998.77003326267004 ], [ 588950.079148293007165, 6245015.967984324321151 ], [ 589104.860707856132649, 6245033.165935386903584 ], [ 589362.829973794752732, 6245119.15569069981575 ], [ 589603.601288670673966, 6245170.74954388756305 ], [ 589913.164407796924934, 6245153.551592824980617 ], [ 590136.737771610263735, 6245050.363886449486017 ], [ 590274.321380110806786, 6244998.77003326267004 ] ] } },\n                { \"type\": \"Feature\", \"properties\": { \"Id\": 0 }, \"geometry\": { \"type\": \"LineString\", \"coordinates\": [ [ 590274.321380110806786, 6244998.77003326267004 ], [ 590430.822734780376777, 6244809.592571574263275 ], [ 590534.010441155754961, 6244637.613060948438942 ], [ 590551.208392218337394, 6244431.237648197449744 ], [ 590551.208392218337394, 6244190.466333321295679 ], [ 590637.198147531133145, 6243966.892969507724047 ], [ 590826.375609219423495, 6243794.913458882831037 ], [ 591015.553070907713845, 6243519.746241881512105 ], [ 591101.542826220509596, 6243296.172878067940474 ], [ 591342.314141096430831, 6243124.193367442116141 ], [ 591531.491602784721181, 6242986.609758941456676 ], [ 591669.075211285264231, 6242780.234346190467477 ], [ 591703.471113410429098, 6242591.056884502992034 ], [ 591720.669064473011531, 6242367.483520689420402 ], [ 591892.648575098719448, 6242178.306059001013637 ], [ 592133.419889974640682, 6242092.31630368810147 ], [ 592408.587106975726783, 6242040.722450500354171 ], [ 592700.952275039395317, 6242057.920401562936604 ], [ 592941.723589915432967, 6242040.722450500354171 ], [ 593251.286709041567519, 6241937.534744124859571 ], [ 593526.453926042770036, 6241731.159331373870373 ], [ 593750.027289856108837, 6241593.575722873210907 ], [ 593973.600653669564053, 6241593.575722873210907 ], [ 594111.184262170107104, 6241559.179820748046041 ] ] } },\n                { \"type\": \"Feature\", \"properties\": { \"Id\": 0 }, \"geometry\": { \"type\": \"LineString\", \"coordinates\": [ [ 594111.184262170107104, 6241559.179820748046041 ], [ 594231.569919608067721, 6241679.565478186123073 ] ] } },\n                { \"type\": \"Feature\", \"properties\": { \"Id\": 0 }, \"geometry\": { \"type\": \"LineString\", \"coordinates\": [ [ 594111.184262170107104, 6241559.179820748046041 ], [ 593849.080079628620297, 6241337.034151456318796 ], [ 593664.303176741464995, 6241221.548587151803076 ], [ 593364.040709549910389, 6241036.77168426476419 ], [ 593086.875355219235644, 6240805.800555655732751 ], [ 592809.710000888444483, 6240551.732314186170697 ], [ 592694.224436584045179, 6240297.664072716608644 ], [ 592486.350420836010017, 6240297.664072716608644 ], [ 592255.379292227094993, 6240343.858298437669873 ], [ 592024.408163618179969, 6240320.761185577139258 ], [ 591908.92259931366425, 6240135.984282690100372 ], [ 591677.951470704749227, 6239951.207379803061485 ], [ 591631.757244982989505, 6239835.721815498545766 ], [ 591308.397664930438623, 6239951.207379803061485 ], [ 590938.843859156128019, 6240089.79005696810782 ], [ 590338.318924773018807, 6240297.664072716608644 ], [ 590153.542021885863505, 6240343.858298437669873 ], [ 589945.668006137828343, 6240251.469846994616091 ], [ 589414.434410337242298, 6240089.79005696810782 ], [ 588998.686378841171972, 6240020.498718385584652 ], [ 588698.423911649617366, 6239928.110266941599548 ], [ 588444.355670179822482, 6239928.110266941599548 ], [ 588282.675880153547041, 6239881.916041220538318 ], [ 588005.510525822872296, 6239720.236251194030046 ], [ 587820.733622935716994, 6239627.847799750044942 ], [ 587381.888478578766808, 6239604.750686889514327 ], [ 586712.072205612901598, 6239627.847799750044942 ], [ 586065.353045507916249, 6239581.653574028983712 ], [ 585765.090578316245228, 6239466.168009724467993 ], [ 585534.119449707330205, 6239373.779558280482888 ], [ 585395.536772541934624, 6239304.488219697959721 ], [ 585256.954095376655459, 6239142.808429671451449 ], [ 585118.371418211259879, 6239073.517091088928282 ], [ 584933.594515324104577, 6239027.32286536693573 ], [ 584887.400289602344856, 6239189.002655393444002 ], [ 584702.623386715189554, 6239512.362235445529222 ], [ 584587.13782241079025, 6239720.236251194030046 ], [ 584217.584016636479646, 6239581.653574028983712 ], [ 584032.807113749324344, 6239581.653574028983712 ], [ 583801.835985140409321, 6239604.750686889514327 ], [ 583524.670630809734575, 6239604.750686889514327 ], [ 583270.602389339823276, 6239650.944912611506879 ], [ 582993.437035009148531, 6239789.527589776553214 ], [ 582716.271680678473786, 6240043.595831246115267 ], [ 582392.912100625922903, 6240482.44097560364753 ], [ 582115.746746295248158, 6240805.800555655732751 ], [ 581977.164069129852578, 6241059.868797125294805 ], [ 581838.581391964573413, 6241337.034151456318796 ], [ 581726.939702014089562, 6241679.565478186123073 ], [ 581699.998714799177833, 6241683.490844369865954 ] ] } },\n                { \"type\": \"Feature\", \"properties\": { \"Id\": 0 }, \"geometry\": { \"type\": \"LineString\", \"coordinates\": [ [ 575119.486903775017709, 6240080.156029367819428 ], [ 574833.227061256533489, 6239914.251999224536121 ], [ 574537.584016637061723, 6239803.385857492685318 ], [ 574260.418662306386977, 6239655.564335183240473 ], [ 573909.342546820756979, 6239544.698193450458348 ], [ 573743.043334222282283, 6239489.265122584067285 ], [ 573539.788741046446376, 6239470.787432295270264 ], [ 573355.011838159291074, 6239581.65357402805239 ], [ 573225.668006138294004, 6239674.042025471106172 ], [ 573077.846483828616329, 6239747.952786626294255 ], [ 572948.502651807619259, 6239747.952786626294255 ], [ 572671.337297476828098, 6239858.818928359076381 ], [ 572264.828111125156283, 6240025.118140957318246 ], [ 572006.140447083162144, 6240209.895043844357133 ], [ 571747.452783041168004, 6240431.627327308990061 ], [ 571470.287428710376844, 6240653.35961077362299 ], [ 571063.778242358705029, 6240782.703442794270813 ], [ 570749.657507450552657, 6240949.002655392512679 ], [ 570380.103701676242054, 6241041.391106836497784 ], [ 570195.326798789086752, 6241059.868797125294805 ], [ 569936.639134747092612, 6241226.16800972353667 ], [ 569788.817612437298521, 6241688.110266941599548 ], [ 569640.996090127620846, 6242020.708692138083279 ], [ 569530.129948395304382, 6242279.396356180310249 ], [ 569345.35304550814908, 6242501.128639644943178 ], [ 569160.576142620993778, 6242611.994781376793981 ], [ 568846.455407712841406, 6242926.115516285412014 ], [ 568717.111575691844337, 6243000.026277440600097 ], [ 568584.265499998815358, 6243055.401563191786408 ], [ 568569.290053382166661, 6243073.937038594856858 ] ] } }\n            ]\n        };\n        return (<GeoJSON style={()=>{ return {\n            \"color\": \"#ff7800\",\n            \"weight\": 5,\n            \"opacity\": 0.65\n        }}} key={0} data={json}/>);\n    }\n\n    render() {\n        return (\n            <Map ref=\"map\"\n                center={this.defineMapCenter.bind(this)()}\n                zoom={this.defineMapZoom.bind(this)()}\n                boundsOptions={{\n                    paddingBottomRight: [250, 0],\n                    paddingTopLeft: [250, 0],\n                }}\n            >\n                <LayersControl position=\"topright\">\n                    {this.renderTiles.bind(this)()}\n                    {this.renderMarkers.bind(this)()}\n                    {this.renderFieldtripLayer.bind(this)()}\n                </LayersControl>\n            </Map>\n        );\n    }\n}\n\n// need places for the map to work\nMapView.propTypes = {\n    \"places\": PropTypes.array.isRequired,\n};\n\n/**\n * Set certain props to access Redux states\n * @param {Object} state All possible Redux states\n * @returns {Object} Certain states that are set on props\n */\nfunction mapStateToProps(state) {\n    return {\n        \"state\": state.tabViewer,\n    };\n}\n\n/**\n * Set the \"actions\" prop to access Redux actions\n * @param {*} dispatch Redux actions\n * @returns {Object} The actions that are mapped to props.actions\n */\nfunction mapDispatchToProps(dispatch) {\n    return {\n        \"actions\": {\n            ...bindActionCreators(tabViewerActions, dispatch),\n        },\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(MapView);\n","import React, {Component} from \"react\";\nimport PropTypes from \"prop-types\";\n\nclass Navigation extends Component {\n    handleDropdownChange({target}) {\n        let selectedItem;\n        if (this.props.list.tango) {\n            selectedItem = this.props.list.list.find((item) =>\n                item === target.value);\n        } else {\n            selectedItem = this.props.list.list.find((item) =>\n                item[this.props.list.displayKey] === target.value);\n        }\n        this.props.handleMenuSelect(selectedItem, this.props.list.tango);\n    }\n\n    optionsRender() {\n        if (this.props.list.tango) {\n            return this.props.list.list.map((item, i) => (\n                <option\n                    key={i}\n                    value={item}>\n                    {item}\n                </option>\n            ));\n        } else {\n            return this.props.list.list.map((item, i) => (\n                <option\n                    key={i}\n                    value={item[this.props.list.displayKey]}>\n                    {item[this.props.list.displayKey]}\n                </option>\n            ));\n        }\n    }\n\n    render() {\n        return (\n            <form className=\"NavigationDropdownMenu\">\n                <select\n                    value={this.props.list.selectValue}\n                    onChange={this.handleDropdownChange.bind(this)}>\n                    {this.optionsRender()}\n                </select>\n            </form>\n        );\n    }\n}\n\nNavigation.propTypes = {\n    \"handleMenuSelect\": PropTypes.func.isRequired,\n    \"list\": PropTypes.shape({\n        \"displayKey\": PropTypes.any,\n        \"list\": PropTypes.any,\n        \"selectValue\": PropTypes.any,\n        \"tango\": PropTypes.any,\n    }).isRequired,\n};\n\nexport default Navigation;\n","// get possible action types\nimport * as types from \"./actionTypes\";\n\n/**\n * Update the items available to Navigator\n * @param {Array} list Items to give to navigator\n */\nexport function displayItems(list) {\n    return {\n        \"payload\": list,\n        \"type\": types.DISPLAY_ITEMS,\n    };\n}\n\n/**\n * Handler for a time filter's change\n * @param {Event} event Event describing the change\n */\nexport function timeFilterHandler({target}) {\n    return {\n        \"payload\": target,\n        \"type\": types.TIME_FILTER_HANDLER,\n    };\n}\n","import * as types from \"./actionTypes\";\n\n/**\n * Trigger fuzzy search to render suggestions and update search input field. If there's currently results in the area, search among results there\n * @param {String} SearchInput\n * @param {array} DisplayList\n * */\nexport function fuzzySearch(SearchInput, DisplayList) {\n    return {\n        \"type\": types.FUZZY_SEARCH,\n        \"payload\": {SearchInput, DisplayList},\n    };\n}\n\n/**\n * Trigger search for a display artifact (people, places, stories, fieldtrips)\n * @param {integer} DisplayArtifact\n * */\nexport function searchArtifact(DisplayArtifact) {\n    return {\n        \"type\": types.SEARCH_ARTIFACT,\n        \"payload\": DisplayArtifact,\n    };\n}\n\n/**\n * Trigger search for keyword either as a string or as an object\n * @param {String, Object} Keyword\n * */\nexport function searchKeyword(Keyword) {\n    return {\n        \"type\": types.SEARCH_KEYWORD,\n        \"payload\": Keyword,\n    };\n}\n\n/**\n * Set the state of searching\n * @param {Boolean} newState Whether or not to be in a state of searching\n */\nexport function setSearch(newState) {\n    return {\n        \"type\": types.SET_SEARCH_STATE,\n        \"payload\": newState,\n    };\n}\n","import React, {Component} from \"react\";\nimport \"./navigatorComponent.css\";\nimport NavigationDropdownMenu from \"./NavigationDropdownMenu\";\nimport {arrayTransformation} from \"../../utils\";\nimport {getList, ontologyToDisplayKey, tangoTypes} from \"../../data-stores/DisplayArtifactModel\";\nimport PropTypes from \"prop-types\";\nimport {getSessionStorage, setSessionStorage} from \"../../data-stores/SessionStorageModel\";\nimport * as navigatorActions from \"../../actions/navigatorActions\";\nimport * as searchActions from \"../../actions/searchActions\";\nimport {bindActionCreators} from \"redux\";\nimport connect from \"react-redux/es/connect/connect\";\n\nclass Navigation extends Component {\n    constructor(props) {\n        super(props);\n        // options for the two dropdowns\n        this.dataNav = [\"People\", \"Places\", \"Stories\"];\n        this.TINav = [\"ETK Index\", \"Tangherlini Index\", \"Fieldtrips\", \"Genres\"];\n        // initial state, further defined later\n        this.state = {\n            // which of the subclasses is currently active\n            \"activeList\": null,\n            // whether the data navigator or TI navigator is shown\n            \"dataNavView\": true,\n            // submenus to show (for TI navigator)\n            \"dropdownLists\": [],\n            // navigators to render\n            \"navigators\": [\n                {\"name\": \"Data Navigator\", \"tabClass\": \"dataNavView\"},\n                {\"name\": \"Topic & Index Navigator\", \"tabClass\": \"TINavView\"},\n            ],\n        };\n        // get previous view data from session storage, default to stories\n        const {data} = getSessionStorage(\"SelectedNavOntology\") || {\"data\": \"Stories\"};\n        // if user was viewing the topic & index navigator\n        if (this.TINav.includes(data)) {\n            // set up state for that\n            this.state = {\n                ...this.state,\n                \"dataNavView\": false,\n                \"navigators\": [\n                    {\"name\": \"Data Navigator\", \"tabClass\": \"dataNavView\"},\n                    {\"name\": \"Topic & Index Navigator\", \"tabClass\": \"TINavView active\"},\n                ],\n                \"path\": [\"Topic & Index Navigator\"],\n            };\n        } else {\n            // otherwise default to the PPS state\n            this.state = {\n                ...this.state,\n                \"dataNavView\": true,\n                \"navigators\": [\n                    {\"name\": \"Data Navigator\", \"tabClass\": \"dataNavView active\"},\n                    {\"name\": \"Topic & Index Navigator\", \"tabClass\": \"TINavView\"},\n                ],\n                \"path\": [\"Data Navigator\"],\n            };\n        }\n    }\n\n    // determine if we need to set up to show a keyword\n    componentDidMount() {\n        // get previous view data from session storage, default to stories\n        const {data} = getSessionStorage(\"SelectedNavOntology\") || {\"data\": \"Stories\"};\n        // no keyword loaded\n        if (this.props.searchState.inputValue === \"\") {\n            // go to the loaded ontology from session storage\n            this.handleLevelTwoClick(data);\n            if (this.TINav.includes(data)) {\n                // get previous dropdown info\n                const prevDropdowns = getSessionStorage(\"dropdownLists\");\n                // only if something to load\n                if (prevDropdowns) {\n                    if (prevDropdowns.length === 1) {\n                        // genre or ETK to load\n                        this.selectMenu(prevDropdowns[0], false);\n                    } else if (prevDropdowns.length === 2) {\n                        // tango double-dropdown to load\n                        this.selectMenu(prevDropdowns[0], true);\n                        if (prevDropdowns[1]) {\n                            this.selectMenu(prevDropdowns[1], false);\n                        }\n                    }\n                }\n            }\n        } else {\n            // keyword loaded, we'll be looking at the stories\n            this.props.setDisplayLabel(\"Data Navigator > Stories\");\n            this.setState({\n                // highlight stories\n                \"activeList\": \"Stories\",\n                // no dropdowns to show\n                \"dropdownLists\": [],\n                // set the path\n                \"path\": [\"Data Navigator\", \"Stories\"],\n            });\n        }\n    }\n\n    /**\n     * Make a certain tab the active tab\n     * @param {String} name Tab to make active\n     */\n    setActiveTab(name) {\n        // reset search\n        this.props.actions.setSearch(false);\n        // resets displayed results\n        this.props.actions.displayItems([]);\n        // if data navigator was clicked\n        if (name === \"Data Navigator\") {\n            // set the indicator to show this\n            this.props.setDisplayLabel(\"Data Navigator\");\n            this.setState({\n                // make data navigator active\n                \"dataNavView\": true,\n                // erase any existing dropdown lists\n                \"dropdownLists\": [],\n                // make data navigator active\n                \"navigators\": [\n                    {\"name\": \"Data Navigator\", \"tabClass\": \"tab cell medium-6 dataNavView active\"},\n                    {\"name\": \"Topic & Index Navigator\", \"tabClass\": \"tab cell medium-6 TINavView\"},\n                ],\n                // set data navigator as the path\n                \"path\": [\"Data Navigator\"],\n            });\n        } else if (name === \"Topic & Index Navigator\") {\n            // topic & index navigator clicked\n            // set the indicator to show this\n            this.props.setDisplayLabel(\"Topic & Index Navigator\");\n            this.setState({\n                // make topic & index navigator active\n                \"dataNavView\": false,\n                // erase any existing dropdown lists\n                \"dropdownLists\": [],\n                // make topic & index navigator active\n                \"navigators\": [\n                    {\"name\": \"Data Navigator\", \"tabClass\": \"tab cell medium-6 dataNavView \"},\n                    {\"name\": \"Topic & Index Navigator\", \"tabClass\": \"tab cell medium-6 TINavView active\"},\n                ],\n                // set topic & index navigator as the path\n                \"path\": [\"Topic & Index Navigator\"],\n            });\n        } else {\n            // bad tab name, warn this\n            console.warn(\"Invalid tab name\", name);\n        }\n    }\n\n    /**\n     * Switch to a selected ontology\n     * @param {String} ontology Ontology to switch to\n     */\n    handleLevelTwoClick(ontology) {\n        // reset search\n        this.props.actions.setSearch(false);\n        // save selected ontology to session storage so the selection will remain if the user switches tabs\n        setSessionStorage(\"SelectedNavOntology\", {\n            \"data\": ontology,\n        });\n        // get items associated with the ontology\n        let list = getList(ontology);\n        // if it is person, place, story, or fieldtrip\n        if ([\"Fieldtrips\", \"People\", \"Places\", \"Stories\"].includes(ontology)) {\n            // display the relevant items\n            this.props.actions.displayItems(list);\n            // highlight clicked ontology, set dropdownLists to nothing, update path\n            this.setStateAndPathLabel(({path}) => ({\n                \"activeList\": ontology,\n                \"dropdownLists\": [],\n                \"path\": [path[0], ontology],\n            }));\n        } else if ([\"ETK Index\", \"Tangherlini Index\", \"Genres\"].includes(ontology)) {\n            // was one of the other ones that isn't a single category of data\n            // reset results display\n            this.props.actions.displayItems([]);\n            // create additional options for people to be in the dropdown menu so people can select everything in the menu\n            const displayKey = ontologyToDisplayKey[ontology];\n            let\n                // object to represent the dropdown\n                listObject = {\n                    displayKey,\n                    ontology,\n                },\n                // initial dropdown value\n                selectValue;\n            // for ETK indices\n            if (ontology === \"ETK Index\") {\n                // use the ontology itself as the name\n                selectValue = \"[Select ETK Index]\";\n            } else {\n                // other type, format it to work out\n                selectValue = `[Select ${ontology.slice(0, -1)}]`;\n            }\n            // update the dropdown with the initial vluae\n            listObject = {\n                ...listObject,\n                selectValue,\n            };\n            // if we are going to the tango indices\n            if (ontology === \"Tangherlini Index\") {\n                listObject = {\n                    ...listObject,\n                    // set the options to be the tango types, but add in the Select option\n                    \"list\": [\n                        \"[Select a Class]\",\n                        ...Object.keys(tangoTypes),\n                    ],\n                    // this is a tango list\n                    \"tango\": true,\n                };\n            } else if (ontology === \"ETK Index\" || ontology === \"Genres\") {\n                // either ETK index or gernes\n                // if the [Select a ___] isn't in the dropdown list\n                if (list.some((item) => item[displayKey] === selectValue) === false) {\n                    // add it in at the front\n                    list = [\n                        {\n                            [displayKey]: selectValue,\n                        },\n                        ...list,\n                    ];\n                }\n                listObject = {\n                    ...listObject,\n                    // use our generated list for options\n                    list,\n                    // this is not a tango list\n                    \"tango\": false,\n                };\n            } else {\n                // bad ontology, abort\n                console.warn(\"Bad ontology\", ontology);\n                return;\n            }\n            // update state and path label\n            this.setStateAndPathLabel(({path}) => ({\n                // highlight clicked ontology\n                \"activeList\": ontology,\n                // use our generated dropdown object\n                \"dropdownLists\": [listObject],\n                // update the path with the clicked one\n                \"path\": [path[0], ontology],\n            }));\n        }\n    }\n\n    /**\n     * Handle the selection of a dropdown item\n     * @param {Object} selectedItem Selected dropdown element\n     * @param {Boolean} isTango Whether or not the item is an upper-level Tango dropdown\n     */\n    selectMenu(selectedItem, isTango) {\n        // reset search\n        this.props.actions.setSearch(false);\n        // for non upper level tango index dropdowns\n        if (isTango === false) {\n            // make sure that we didn't re-select the [Select a ___] option from the dropdown\n            if (typeof selectedItem.id !== \"undefined\") {\n                const prevDropdowns = getSessionStorage(\"dropdownLists\");\n                // if its a tango submenu\n                if (prevDropdowns && prevDropdowns.length === 2) {\n                    setSessionStorage(\"dropdownLists\", [prevDropdowns[0], selectedItem]);\n                } else {\n                    // genre/etk dropdown\n                    setSessionStorage(\"dropdownLists\", [selectedItem]);\n                }\n                // update the displayed items\n                this.props.actions.displayItems(\n                    // use the list of stories based on the chosen option\n                    arrayTransformation(selectedItem.stories.story)\n                );\n                // get the display name based on the chosen option\n                let name;\n                if (selectedItem.hasOwnProperty(\"name\")) {\n                    name = selectedItem.name;\n                } else if (selectedItem.hasOwnProperty(\"heading_english\")) {\n                    name = selectedItem.heading_english;\n                }\n                // update state and path\n                this.setStateAndPathLabel((oldState) => {\n                    // get previous dropdowns and path\n                    let {dropdownLists, path} = oldState;\n                    // update the selected item\n                    dropdownLists[dropdownLists.length - 1].selectValue = name;\n                    // trim the path if necessary\n                    if (path.length >= 3 && path.includes(\"Tangherlini Index\") === false) {\n                        path = path.slice(0, 2);\n                    } else if (path.length >= 4) {\n                        path = path.slice(0, 3);\n                    }\n                    // append the selected item to the path\n                    path = [...path, name];\n                    return {\n                        dropdownLists,\n                        path,\n                    };\n                });\n            } else {\n                // clear all items\n                this.props.actions.displayItems([]);\n                // update dropdowns and path\n                this.setStateAndPathLabel(({dropdownLists, path}) => ({\n                    // set the dropdown to be\n                    \"dropdownLists\": [\n                        {\n                            // the first dropdown\n                            ...dropdownLists[0],\n                            // but make sure that the selected value is the [Select a ___] option\n                            \"selectValue\": selectedItem.heading_english,\n                        },\n                    ],\n                    // remove the last element from path, since it got deselected\n                    \"path\": path.slice(0, -1),\n                }));\n            }\n        } else {\n            // top level tango index option picked\n            // special format for dropdown recognition\n            setSessionStorage(\"dropdownLists\", [selectedItem, null]);\n            // set base path accordingly\n            const path = [\"Topic & Index Navigator\", \"Tangherlini Index\"];\n            if (selectedItem !== \"[Select a Class]\") {\n                // not the null option\n                // clear the displayed items\n                this.props.actions.displayItems([]);\n                this.setStateAndPathLabel(({dropdownLists}) => ({\n                    \"dropdownLists\": [\n                        {\n                            ...dropdownLists[0],\n                            // set clicked item in the upper dropdown to the one that was just clicked\n                            \"selectValue\": selectedItem,\n                        },\n                        // need to make second dropdown list with the sub tango options\n                        {\n                            // start with the select something option\n                            \"selectValue\": \"[Select an Ontology]\",\n                            // key for names is \"name\"\n                            \"displayKey\": \"name\",\n                            \"ontology\": \"\",\n                            // not an upper level tango dropdown\n                            \"tango\": false,\n                            \"list\": [\n                                // add the select something option on top\n                                {\"name\": \"[Select an Ontology]\"},\n                                // add the actual options below it\n                                ...tangoTypes[selectedItem].children,\n                            ],\n                        },\n                    ],\n                    // add the item we went to at the end of the path\n                    \"path\": [...path, selectedItem],\n                }));\n            } else {\n                // reset the dropdown state to the unselected tango index state, since that's what was clikced\n                this.setStateAndPathLabel(({dropdownLists}) => ({\n                    // set the dropdown to be\n                    \"dropdownLists\": [{\n                        // the first dropdown\n                        ...dropdownLists[0],\n                        // but make sure that the selected value is the [Select a Class] option\n                        \"selectValue\": \"[Select a Class]\",\n                    }],\n                    // go back to the base tango path\n                    path,\n                }));\n            }\n        }\n    }\n\n    /**\n     * Set state and update the displayed path label\n     * @param {(Function|Object)} callback Determines state to be set\n     */\n    setStateAndPathLabel(callback) {\n        // apply the requested state changes\n        this.setState(callback, () => {\n            // update the path displayed afterwards\n            this.props.setDisplayLabel(this.state.path.join(\" > \"));\n        });\n    }\n\n    render() {\n        // determine what is being viewed based on state\n        const ontologyType = this.state.dataNavView === true ? \"dataNav\" : \"TINav\";\n        return (\n            // container for the whole component\n            <div className=\"NavigatorComponent grid-y\">\n                {/* make the top tabs smaller */}\n                <div className=\"navigator-tabs cell medium-1 grid-x\">{\n                    // for each of the two naviagtor tabs\n                    this.state.navigators.map(({name, tabClass}) => (\n                        // create a clickable div\n                        <div\n                            // style it as a navigator tab with its custom CSS\n                            className={`tab cell medium-6 ${tabClass}`}\n                            // key for React\n                            key={name}\n                            // when clicked, go to its respective tab\n                            onClick={this.setActiveTab.bind(this, name)}>\n                            {/* use the name as the label */}\n                            {name}\n                        </div>\n                    ))\n                }</div>\n                {/* actual ontology selection options */}\n                <div className=\"navigator-options-wrapper cell medium-11\">\n                    {/* based on what is viewed show the specified ontology */}\n                    <div className={`cell active ${ontologyType}View`}>\n                        {/* create the list of ontologies to choose */}\n                        <ul className=\"ontologyList\">{\n                            // for each of the ontologies to display\n                            this[ontologyType].map((ontology) => (\n                                <li\n                                    // style it based on the ontology type, and make the active one shaded\n                                    className={`ontology ${ontology} ${this.state.activeList === ontology ? \"active\" : \"\"}`}\n                                    // key for React\n                                    key={ontology}\n                                    // when clicked, go to the desired ontology\n                                    onClick={this.handleLevelTwoClick.bind(this, ontology)}>\n                                    {/* name to show is the ontology */}\n                                    {ontology}\n                                </li>\n                            ))\n                        }</ul>\n                    </div>\n                    {/* for each of the dropdowns, if needed */}\n                    {this.state.dropdownLists.map((list, i) => (\n                        // generate a dropdown with the options\n                        <NavigationDropdownMenu\n                            // style it to fit with Foundation's styling\n                            className=\"cell\"\n                            // pass it the desired options\n                            list={list}\n                            // pass it a click handler\n                            handleMenuSelect={this.selectMenu.bind(this)}\n                            // key for React\n                            key={i} />\n                    ))}\n                </div>\n            </div>\n        );\n    }\n}\n\n/**\n * Set certain props to access Redux states\n * @param {Object} state All possible Redux states\n * @returns {Object} Certain states that are set on props\n */\nfunction mapStateToProps(state) {\n    return {\n        \"searchState\": state.search,\n        \"state\": state.tabViewer,\n    };\n}\n\n/**\n * Set the \"actions\" prop to access Redux actions\n * @param {*} dispatch Redux actions\n * @returns {Object} The actions that are mapped to props.actions\n */\nfunction mapDispatchToProps(dispatch) {\n    return {\n        \"actions\": {\n            ...bindActionCreators(searchActions, dispatch),\n            ...bindActionCreators(navigatorActions, dispatch),\n        },\n    };\n}\n\nNavigation.propTypes = {\n    \"actions\": PropTypes.object.isRequired,\n    \"searchState\": PropTypes.shape({\n        \"inputValue\": PropTypes.string.isRequired,\n        \"results\": PropTypes.array.isRequired,\n    }).isRequired,\n    \"setDisplayLabel\": PropTypes.func.isRequired,\n    \"state\": PropTypes.object.isRequired,\n};\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Navigation);\n","// styling for the graph\nimport \"./NexusGraph.css\";\n// basic react functionality\nimport React, {Component} from \"react\";\n// graph functionality for the NexusGraph\nimport {Graph} from \"react-d3-graph\";\n// prop validation\nimport PropTypes from \"prop-types\";\n// function to get a node on the graph by its name\nimport {getNodeById} from \"./NexusGraphModel\";\nimport {bindActionCreators} from \"redux\";\nimport * as tabViewerActions from \"../../actions/tabViewerActions\";\nimport connect from \"react-redux/es/connect/connect\";\n\n// basic settings for the graph, can be overriden with this.props\nconst settings = {\n    // highlight nodes + links when hovered\n    \"nodeHighlightBehavior\": true,\n    // enable pan and zoom effects\n    \"panAndZoom\": true,\n    // add direction to links\n    \"directed\": true,\n    // settings for the nodes\n    \"node\": {\n        // this color only applies to the initial \"blank\" node, other nodes get custom colors by their type\n        \"color\": \"lightgreen\",\n        // size of the node\n        \"size\": 120,\n        // outline color of the node when it is highlighted (either on hover or via a hovered-on primary connected node)\n        \"highlightStrokeColor\": \"blue\",\n    },\n    // settings for the links\n    \"link\": {\n        // link color when one of its endpoints is highlighted\n        \"highlightColor\": \"blue\",\n        // display label for each link\n        \"labelProperty\": \"label\",\n        \"renderLabel\": true,\n        \"fontSize\": 12,\n    },\n};\n\nclass NexusGraph extends Component {\n    constructor(props) {\n        super(props);\n        // no clicks handled yet\n        this.lastNodeClicked = null;\n        this.lastNodeClickTime = 0;\n        // properly bind handleClickNode so it works on the nodes in the graph\n        this.handleClickNode = this.handleClickNode.bind(this);\n    }\n\n    // called whenever a node is clicked\n    handleClickNode(nodeName) {\n        // condition to treat it as a double click, if last click was within 1 second\n        if (Date.now() - this.lastNodeClickTime < 1000 &&\n            // and the same node was clicked both times,\n            nodeName === this.lastNodeClicked) {\n            // get the node matching the given name\n            let node = getNodeById(nodeName, this.props.nodes);\n            // assuming we properly retrieved the node\n            if (node !== null) {\n\n                // open up its tab\n                this.props.tabViewerActions.addTab(node.itemID, nodeName, node.type);\n            }\n        } else {\n            // too long between clicks/different node clicked, it should be a single click\n            // set last click to be now\n            this.lastNodeClickTime = Date.now();\n            // the clicked node is now the one that was last clicked\n            this.lastNodeClicked = nodeName;\n        }\n    }\n\n    render() {\n        return (\n            <Graph\n                // id is mandatory, if no id is defined rd3g will throw an error\n                id=\"graph-id\"\n                // nodes + links to draw\n                data={this.props.data}\n                // settings for the graph\n                config={{\n                    // give it the base settings\n                    ...settings,\n                    // but override those with any passed settings\n                    ...this.props.settings,\n                }}\n                // call the custom callback when a node is clicked\n                onClickNode={this.handleClickNode.bind(this)}\n            />\n        );\n    }\n}\n\nNexusGraph.propTypes = {\n    \"links\": PropTypes.arrayOf(PropTypes.shape({\n        \"source\": PropTypes.string.isRequired,\n        \"target\": PropTypes.string.isRequired,\n        \"linkNode\": PropTypes.any,\n        \"color\": PropTypes.string,\n        \"label\": PropTypes.string,\n    })),\n    \"nodes\": PropTypes.object.isRequired,\n    \"data\": PropTypes.object.isRequired,\n    \"settings\": PropTypes.object,\n    \"tabViewerActions\": PropTypes.object.isRequired,\n};\n\nNexusGraph.defaultProps = {\n    \"nodes\": [{\"id\": \"blank\"}],\n};\n\nfunction mapStateToProps(state) {\n    return {\n        \"state\": state.tabViewer,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        \"tabViewerActions\": bindActionCreators(tabViewerActions, dispatch),\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(NexusGraph);\n","import React, {Component} from \"react\";\nimport {getKeywords, DisplayArtifactToDisplayKey} from \"../../data-stores/DisplayArtifactModel\";\nimport \"./search.css\";\nimport PropTypes from \"prop-types\";\nimport {bindActionCreators} from \"redux\";\nimport * as navigatorActions from \"../../actions/navigatorActions\";\nimport * as searchActions from \"../../actions/searchActions\";\nimport connect from \"react-redux/es/connect/connect\";\n\nclass SearchComponent extends Component {\n    constructor(props) {\n        super(props);\n        // currently unused, getKeywords() is an unused import if we don't need this\n        this.state = {\n            \"inputValue\": \"\",\n            \"keywords\": getKeywords(),\n        };\n        this.renderListofSuggestions = this.renderListofSuggestions.bind(this);\n        this.switchKeywordSearch = this.switchKeywordSearch.bind(this);\n    }\n\n    componentWillMount(){\n        // document.addEventListener('mousedown', this.handleClick, false);\n    }\n\n    componentWillUnmount(){\n        // document.removeEventListener('mousedown', this.handleClick, false);\n    }\n\n    handleClick = (e) =>{\n        e.preventDefault();\n      if(this.node.contains(e.target)){\n          //click is inside the component\n          console.log(e.target);\n          this.props.actions.fuzzySearch(\n              e.target.value,\n              this.props.navigatorState.itemsList\n          );\n          return;\n      }\n\n      //click is outside the component, switch searching state off\n      this.props.actions.setSearch(false);\n    };\n\n    renderListofSuggestions() {\n        return this.props.searchState.results.map((keyword, i) => (\n            <li\n                key={i}\n                style={{\"cursor\": \"pointer\"}}\n                onClick={(event) => {\n                    event.preventDefault();\n                    this.props.actions.searchArtifact(keyword);\n                }}>\n                {keyword[DisplayArtifactToDisplayKey(keyword)]}\n            </li>\n        ));\n    }\n\n    switchKeywordSearch(event) {\n        this.props.actions.displayItems([]);\n        this.setState({\n            \"keywordSearch\": event.target.checked,\n            \"inputValue\": \"\",\n        });\n    }\n\n    render() {\n        return (\n            <form\n                className=\"SearchComponent\"\n                ref={node => this.node = node}\n                onSubmit={(event) => {\n                    event.preventDefault();\n                    this.props.actions.searchArtifact(this.props.searchState.inputValue);\n                }}>\n                <input\n                    type=\"text\"\n                    placeholder=\"Search Term\"\n                    value={this.props.searchState.inputValue}\n                    onChange={(event) => {\n                        event.preventDefault();\n                        console.log('form is changing');\n                        this.props.actions.fuzzySearch(\n                            event.target.value,\n                            this.props.navigatorState.itemsList\n                        );\n                    }} />\n                <label className=\"keyword-search-label\" htmlFor=\"keyword-search-switch\">Keyword Search Only</label>\n                <input\n                    type=\"checkbox\"\n                    name=\"keyword\"\n                    id=\"keyword-search-switch\"\n                    onChange={this.switchKeywordSearch} />\n                {/* only show suggestions while a search is active */}\n                {this.props.searchState.searchingState === true &&\n                    <ul className=\"suggestions\">\n                        {this.renderListofSuggestions()}\n                    </ul>}\n            </form>\n        );\n    }\n}\n\nSearchComponent.propTypes = {\n    \"actions\": PropTypes.object.isRequired,\n    \"navigatorState\": PropTypes.shape({\n        \"displayList\": PropTypes.array,\n        \"fromDate\": PropTypes.number,\n        \"itemsList\": PropTypes.array.isRequired,\n        \"placeList\": PropTypes.array,\n        \"timeFilterOn\": PropTypes.bool,\n        \"toDate\": PropTypes.number,\n    }).isRequired,\n    \"searchState\": PropTypes.shape({\n        \"inputValue\": PropTypes.string.isRequired,\n        \"keywordSearch\": PropTypes.bool,\n        \"ontology\": PropTypes.string,\n        \"results\": PropTypes.array.isRequired,\n        \"searchingState\": PropTypes.bool.isRequired,\n    }).isRequired,\n};\n\n/**\n * Set certain props to access Redux states\n * @param {Object} state All possible Redux states\n * @returns {Object} Certain states that are set on props\n */\nfunction mapStateToProps(state) {\n    return {\n        \"navigatorState\": state.navigator,\n        \"searchState\": state.search,\n    };\n}\n\n/**\n * Set the \"actions\" prop to access Redux actions\n * @param {*} dispatch Redux actions\n * @returns {Object} The actions that are mapped to props.actions\n */\nfunction mapDispatchToProps(dispatch) {\n    return {\n        \"actions\": {\n            ...bindActionCreators(searchActions, dispatch),\n            ...bindActionCreators(navigatorActions, dispatch),\n        },\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(SearchComponent);\n","// CSS styling\nimport \"./navigation.css\";\n// data helpers\nimport {\n    DisplayArtifactToOntology,\n    ontologyToDisplayKey,\n    ontologyToID,\n} from \"../../data-stores/DisplayArtifactModel\";\n// functions to get nodes + links\nimport {\n    addNode,\n    initializeGraph,\n    initializeNodeCategories,\n} from \"../NexusGraph/NexusGraphModel\";\n// subcomponents of the navigator\nimport MapView from \"../MapView/MapView\";\nimport NavigatorComponent from \"./NavigatorComponent\";\nimport NexusGraph from \"../NexusGraph/NexusGraph\";\nimport SearchComponent from \"./SearchComponent\";\n// react functionality\nimport React from \"react\";\n// prop validation\nimport PropTypes from \"prop-types\";\n// redux imports\nimport {bindActionCreators} from \"redux\";\nimport * as navigatorActions from \"../../actions/navigatorActions\";\nimport * as tabViewerActions from \"../../actions/tabViewerActions\";\nimport * as searchActions from \"../../actions/searchActions\"\nimport connect from \"react-redux/es/connect/connect\";\n\nclass Navigation extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            // start at the data navigator\n            \"displayLabel\": \"Data Navigator\",\n            // start with the sliders hidden\n            \"fromSelect\": false,\n            \"toSelect\": false,\n            \"timeFilterLoad\": false,\n        };\n        // ref to the map for updating\n        this.map = React.createRef();\n        // bind functions so that they can be used as callbacks\n        this.timeInputClickHandler = this.timeInputClickHandler.bind(this);\n        this.timeInputEnd = this.timeInputEnd.bind(this);\n    }\n\n    componentDidMount() {\n        setTimeout(this.setState({timeFilterLoad: true}), 1000)\n        // this.setState({timeFilterLoad:true});\n    }\n\n    /**\n     * Display a list of items\n     * @param {Array} list Items to display\n     * @returns {Array} Array of formatted JSX elements\n     */\n    displayList(list) {\n        // return a list of the elements\n        return list.map((item) => {\n            // ontology of the current item\n            const displayOntology = DisplayArtifactToOntology(item),\n                // display name of the artifact\n                displayName = item[ontologyToDisplayKey[displayOntology]],\n                // id of the artifact\n                id = item[ontologyToID[displayOntology]];\n            // image shown next to the name of the display artifact\n            let image = null;\n            switch (displayOntology) {\n                case \"Stories\":\n                    // for stories, get the chat bubble icon\n                    image = (<img\n                        className=\"convo-icon\"\n                        src={require(\"./icons8-chat-filled-32.png\")}\n                        alt=\"story\" />);\n                    break;\n                case \"People\":\n                    // for people, get the generic portrait icon\n                    image = (<img\n                        className=\"person-icon\"\n                        src={require(\"./icons8-contacts-32.png\")}\n                        alt=\"person\" />);\n                    break;\n                case \"Places\":\n                    // for places, get the pin marker icon\n                    image = (<img\n                        className=\"location-icon\"\n                        src={require(\"./icons8-marker-32.png\")}\n                        alt=\"location\" />);\n                    break;\n                case \"Fieldtrips\":\n                    // for fieldtrips, get the map with an x icon\n                    image = <img\n                        className=\"fieldtrip-icon\"\n                        src={require(\"./icons8-waypoint-map-32.png\")}\n                        alt=\"fieldtrip\" />;\n                    break;\n                default:\n                    // bad ontology, warn this\n                    console.warn(`Unhandled ontology type: ${displayOntology}`);\n                    // don't render an element for it\n                    return null;\n            }\n            // return a list element\n            return (<li\n                // key for React\n                key={displayOntology + id}\n                // on click, do all the processing necessary when loading this item\n                onClick={() => {\n                    this.handleIDQuery(id, displayName, displayOntology, item);\n                }}>\n                {/* put our desired image on the left of the item */}\n                {image}\n                {/* put the item's name right after that */}\n                {displayName}\n            </li>);\n        });\n    }\n\n    /**\n     * Handler for when an artifact wants to be retrieved\n     * @param {*} id ID of the artifact\n     * @param {*} name Display name of the artifact\n     * @param {*} type Ontology of the artifact\n     * @param {*} item The artifact\n     */\n    handleIDQuery(id, name, type, item) {\n        // add node to network graph\n        addNode(id, name, type, item);\n        // open up the artifact's tab\n        this.props.actions.addTab(id, name, type);\n    }\n\n    /**\n     * Enable a specified input\n     * @param {Event} event Event containing the toggled input's name\n     */\n    timeInputClickHandler({\"target\": {name}}) {\n        this.setState({\n            [name === \"toYear\" ? \"toSelect\" : \"fromSelect\"]: true,\n        });\n    }\n\n    /**\n     * Disable a specified input\n     * @param {Event} event Event containing the toggled input's name\n     */\n    timeInputEnd({\"target\": {name}}) {\n        this.setState({\n            [name === \"toYear\" ? \"toSelect\" : \"fromSelect\"]: false,\n        });\n    }\n\n    /**\n     * Set the banner indicating the current path\n     * @param {String} label The current path to display\n     */\n    setDisplayLabel(label) {\n        this.setState({\n            \"displayLabel\": label,\n        });\n    }\n\n    renderTimeSwitch(timeFilterHandler, timeFilterOn) {\n        return <div\n            className=\"medium-2 small-2 small-offset-0 medium-offset-0 large-offset-1 cell switch\">\n            <input\n                className=\"switch-input\"\n                id=\"exampleSwitch\"\n                type=\"checkbox\"\n                checked={timeFilterOn}\n                name=\"timelineFilter\"\n                onChange={timeFilterHandler}\n            // onClick={timeFilterHandler}\n            />\n            <label className=\"switch-paddle\" htmlFor=\"exampleSwitch\">\n                <br />\n                <span id=\"timelineText\">Timeline</span>\n                <span className=\"show-for-sr\">Enable Timeline</span>\n            </label>\n        </div>;\n    }\n\n    render() {\n        // get relevant stuff from redux + props (object destructuring)\n        const {\n            \"actions\": {addTab, timeFilterHandler},\n            \"navigatorState\": {displayList, fromDate, placeList, timeFilterOn, toDate},\n            \"searchState\": {searchingState},\n        } = this.props;\n        // variable to store the main, center display\n        let toDisplay;\n        // based on what is currently being viewed\n        switch (this.state.displayLabel) {\n            // if the user is viewing the ETK Index but hasn't selected anything yet\n            case \"Topic & Index Navigator > ETK Index\":\n                // render a hint to select an ETK index\n                toDisplay = (<div className=\"hintText\">\n                    Select an ETK index from the left to get started!\n                </div>);\n                break;\n            // if the user is viewing the Tango Index but hasn't selected anything yet\n            case \"Topic & Index Navigator > Tangherlini Index\":\n                // render a hint to select a tango index\n                toDisplay = (<div className=\"hintText\">\n                    Select a class from the left to get started!\n                </div>);\n                break;\n            // if the user is viewing the genres but hasn't selected anything yet\n            case \"Topic & Index Navigator > Genres\":\n                // render a hint to select a genre\n                toDisplay = (<div className=\"hintText\">\n                    Select a genre from the left to get started!\n                </div>);\n                break;\n            // for anything else\n            default:\n                // just render what is normally wanted\n                toDisplay = <div>\n\n                    {this.state.displayLabel.includes(\"Fieldtrips\") &&\n                        <button\n                            className=\"fieldtripTool button primary\"\n                            id=\"fieldtripTool\"\n                            onClick={() => {\n                                addTab(0, \"Fieldtrip Tool\", \"FieldtripTool\");\n                            }}>Open Fieldtrip Viewer</button>}\n                    {this.displayList(displayList)}\n                </div>;\n                break;\n        }\n        return (\n            <div className=\"Navigation grid-x grid-padding-x\">\n                <div className=\"medium-3 cell dataNavigation\">\n                    <SearchComponent />\n                    <NavigatorComponent setDisplayLabel={this.setDisplayLabel.bind(this)} />\n                </div>\n                <div\n                    onClick={(event) => {event.stopPropagation(); this.props.actions.setSearch(false)}}\n                    className=\"medium-5 cell AssociatedStoriesViewer grid-y fillScreen\">\n                    {/*Time Filter*/}\n                    {this.state.timeFilterLoad && <form\n                        className=\"cell medium-2 small-1 time-filter grid-x\">\n                        {/*insert time flip switch*/}\n                        {this.renderTimeSwitch.bind(this)(timeFilterHandler, timeFilterOn)}\n                        <b className=\"medium-2 medium-offset-1 large-2 large-offset-0 cell text top-padding\">From:</b>\n                        <div className=\"medium-2 large-2 cell top-padding\">\n                            <input\n                                className=\"year\"\n                                type=\"number\"\n                                name=\"fromYear\"\n                                min={1887}\n                                max={toDate}\n                                value={fromDate}\n                                onChange={timeFilterHandler}\n                                onClick={this.timeInputClickHandler} />\n                            {this.state.fromSelect === true &&\n                                <input\n                                    className=\"slider\"\n                                    name=\"fromYear\"\n                                    type=\"range\"\n                                    min=\"1887\"\n                                    max={toDate}\n                                    value={fromDate}\n                                    onChange={timeFilterHandler}\n                                    onMouseUp={this.timeInputEnd} />}\n                        </div>\n                        <b className=\"medium-1 large-1 cell text top-padding\">To</b>\n                        <div className=\"medium-2 large-2 cell top-padding\">\n                            <input\n                                className=\"year\"\n                                type=\"number\"\n                                name=\"toYear\"\n                                min={fromDate}\n                                max={1899}\n                                value={toDate}\n                                onChange={timeFilterHandler}\n                                onClick={this.timeInputClickHandler} />\n                            {this.state.toSelect === true &&\n                                <input\n                                    className=\"slider\"\n                                    type=\"range\"\n                                    name=\"toYear\"\n                                    min={fromDate}\n                                    max=\"1899\"\n                                    value={toDate}\n                                    onChange={timeFilterHandler}\n                                    onMouseUp={this.timeInputEnd} />}\n                        </div>\n                    </form>}\n                    <ul className=\"book medium-cell-block-y cell medium-10\">\n                        {/* little banner at the top of the list of items */}\n                        <h6 className=\"label secondary\">\n                            {/* if searching, tell the viewer that a search is in progress */}\n                            {searchingState === true &&\n                                <span className=\"SearchTitle\">Searching: </span>}\n                            {/* display the label indicating the currently viewed path */}\n                            {this.state.displayLabel}\n                        </h6>\n                        {/* display the elements we assigned at the beginning of this function */}\n                        {toDisplay}\n                    </ul>\n                </div>\n                <div className=\"medium-4 cell grid-y fillScreen\">\n                    <div className=\"medium-6 cell\">\n                        {/* button that creates + opens the graph tab when clicked */}\n                        <button\n                            // blue button styling\n                            className=\"button primary\"\n                            // just space it out properly in the CSS\n                            id=\"expandGraphButton\"\n                            // when clicked, open the graph in its own tab\n                            onClick={() => {\n                                addTab(0, \"Nexus Graph\", \"Graph\");\n                            }}>\n                            Open Graph in New Tab\n                        </button>\n                        {/* the nexus graph */}\n                        <NexusGraph\n                            // nodes + links for the graph to render\n                            data={initializeGraph()}\n                            // a totality of all the nodes, sorted by type\n                            nodes={initializeNodeCategories()}\n                            // custom settings for the graph\n                            settings={{\n                                // set the height to center the graph\n                                \"height\": window.innerHeight * 0.8 * 0.47,\n                                // set the width to center the graph\n                                \"width\": window.innerWidth * 0.8 * 0.389,\n                            }} />\n                    </div>\n                    <MapView className=\"medium-6 cell\"\n                        ref={(ref) => {\n                            this.map = ref;\n                        }}\n                        places={placeList} />\n                </div>\n            </div>\n        );\n    }\n}\n\nNavigation.propTypes = {\n    \"actions\": PropTypes.object.isRequired,\n    \"navigatorState\": PropTypes.object.isRequired,\n    \"searchState\": PropTypes.object.isRequired,\n};\n\n/**\n * Set certain props to access Redux states\n * @param {Object} state All possible Redux states\n * @returns {Object} Certain states that are set on props\n */\nfunction mapStateToProps(state) {\n    return {\n        \"navigatorState\": state.navigator,\n        \"searchState\": state.search,\n    };\n}\n\n/**\n * Set the \"actions\" prop to access Redux actions\n * @param {*} dispatch Redux actions\n * @returns {Object} The actions that are mapped to props.actions\n */\nfunction mapDispatchToProps(dispatch) {\n    return {\n        \"actions\": bindActionCreators({\n            ...navigatorActions,\n            ...tabViewerActions,\n            ...searchActions,\n        }, dispatch),\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Navigation);\n","import React, {Component} from \"react\";\nimport {addNode} from \"../NexusGraph/NexusGraphModel\";\nimport Modal from \"react-modal\";\nimport SlidingPane from \"react-sliding-pane\";\nimport \"react-sliding-pane/dist/react-sliding-pane.css\";\nimport \"./RightBar.css\";\nimport PropTypes from \"prop-types\";\nimport {arrayTransformation} from \"../../utils.js\";\nimport {bindActionCreators} from \"redux\";\nimport * as tabViewerActions from \"../../actions/tabViewerActions\";\nimport connect from \"react-redux/es/connect/connect\";\n\nclass RightBar extends Component {\n    constructor() {\n        super();\n        // initial state\n        this.state = {\n            // starts out closed\n            \"isPaneOpen\": false,\n            // nothing should be initially active\n            \"active\": null,\n        };\n        this.clickHandler = this.clickHandler.bind(this);\n    }\n\n    componentDidMount() {\n        Modal.setAppElement(this.el);\n    }\n\n    clickHandler(id, name, type, item) {\n        addNode(id, name, type, item);\n        this.props.tabViewerActions.addTab(id, name, type);\n    }\n\n    /**\n     * Go to a specified tab of the right bar\n     * @param {String} section Tab to open to\n     */\n    PPSClickHandler(section) {\n        this.setState({\n            // make sure the panel is open\n            \"isPaneOpen\": true,\n            // update the selected tab\n            \"active\": section,\n        });\n    }\n\n    /**\n     * Renders the left buttons that control which part of the bar to see\n     * @returns {JSX} The rendered controls\n     */\n    renderControls() {\n        // what is currently being viewed\n        const {view} = this.props;\n        // tells whether or not a certain tab type is active\n        const {active} = this.state;\n        // depending on what the type of view this is\n        switch (view) {\n            // if the current view is a place, then create tabs for people, stories that mentioned it, and stories collected\n            case \"Places\":\n                // first <div> is the people tab\n                // second <div> is the stories that mention it tab\n                // third <div> is the stories collected tab\n                return (<div style={{\"marginTop\": \"150%\", \"marginBottom\": \"20%\"}}>\n                    <div className={`medium-2 cell ${active === \"people\" ? \"active\" : \"\"} bio`}\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.PPSClickHandler.bind(this)(\"people\");\n                        }}>\n                        <img src=\"https://png.icons8.com/windows/32/ffffff/contacts.png\"\n                            className=\"icon\"\n                            alt=\"person\" />\n                        <br />\n                        <div className=\"icon-label\">People</div>\n                    </div>\n                    <div className={`medium-2 cell ${active === \"stories_mentioned\" ? \"active\" : \"\"} stories-mentioned`}\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.PPSClickHandler.bind(this)(\"stories_mentioned\");\n                        }}>\n                        <img src=\"https://png.icons8.com/metro/32/ffffff/chat.png\"\n                            className=\"icon\"\n                            alt=\"stories\" />\n                        <br />\n                        <div className=\"icon-label\">Stories That Mention</div>\n                    </div>\n                    <div className={`medium-2 cell ${active === \"stories\" ? \"active\" : \"\"} stories`}\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.PPSClickHandler.bind(this)(\"stories\");\n                        }}>\n                        <img src=\"https://png.icons8.com/metro/32/ffffff/chat.png\"\n                            className=\"icon\"\n                            alt=\"stories\" />\n                        <br />\n                        <div className=\"icon-label\">Stories Collected</div>\n                    </div>\n                </div>);\n            case \"Stories\": {\n                // if the current view is a story, then create tabs for author, places, and stories\n                const {informant_first_name, informant_last_name} = this.props.object;\n                // first <div> is the author tab\n                // second <div> is the places tab\n                // third <div> is the stories tab\n                return (<div style={{\"marginTop\": \"150%\", \"marginBottom\": \"20%\"}}>\n                    <div className={`medium-2 cell ${active === \"people\" ? \"active\" : \"\"} bio`}\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.PPSClickHandler.bind(this)(\"bio\");\n                        }}>\n                        <img src=\"https://png.icons8.com/windows/32/ffffff/contacts.png\"\n                            className=\"icon\"\n                            alt=\"person\" />\n                        <br />\n                        <div className=\"icon-label\">{informant_first_name} {informant_last_name}</div>\n                    </div>\n                    <div className={`medium-2 cell ${active === \"places\" ? \"active\" : \"\"} places`}\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.PPSClickHandler.bind(this)(\"places\");\n                        }}>\n                        <img src=\"https://png.icons8.com/windows/32/ffffff/marker.png\"\n                            className=\"icon\"\n                            alt=\"location\" />\n                        <br />\n                        <div className=\"icon-label\">Places</div>\n                    </div>\n                    <div className={`medium-2 cell ${active === \"stories\" ? \"active\" : \"\"} stories`}\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.PPSClickHandler.bind(this)(\"stories\");\n                        }}>\n                        <img src=\"https://png.icons8.com/metro/32/ffffff/chat.png\"\n                            className=\"icon\"\n                            alt=\"stories\" />\n                        <br />\n                        <div className=\"icon-label\">Stories</div>\n                    </div>\n                </div>);\n            }\n            case \"People\":\n                // if the current view is a person, then create tabs for places and stories\n                // first <div> is the places tab\n                // second <div> is the stories tab\n                return (<div style={{\"marginTop\": \"150%\", \"marginBottom\": \"20%\"}}>\n                    <div className={`medium-2 cell ${active === \"places\" ? \"active\" : \"\"} places`}\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.PPSClickHandler.bind(this)(\"places\");\n                        }}>\n                        <img src=\"https://png.icons8.com/windows/32/ffffff/marker.png\"\n                            className=\"icon\"\n                            alt=\"location\" />\n                        <br />\n                        <div className=\"icon-label\">Places</div>\n                    </div>\n                    <div className={`medium-2 cell ${active === \"stories\" ? \"active\" : \"\"} stories`}\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.PPSClickHandler.bind(this)(\"stories\");\n                        }}>\n                        <img src=\"https://png.icons8.com/metro/32/ffffff/chat.png\"\n                            className=\"icon\"\n                            alt=\"stories\" />\n                        <br />\n                        <div className=\"icon-label\">Stories</div>\n                    </div>\n                </div>);\n            case \"Fieldtrips\":\n                // if the current view is a fieldtrip, then create tabs for people visited, places visited, and stories collected\n                // first <div> is the people visited tab\n                // second <div> is the places visited tab\n                // third <div> is the stories collected tab\n                return (<div style={{\"marginTop\": \"150%\", \"marginBottom\": \"20%\"}}>\n                    <div className={`medium-2 cell ${active === \"people\" ? \"active\" : \"\"} bio`}\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.PPSClickHandler.bind(this)(\"people\");\n                        }}>\n                        <img src=\"https://png.icons8.com/windows/32/ffffff/contacts.png\"\n                            className=\"icon\"\n                            alt=\"person\" />\n                        <br />\n                        <div className=\"icon-label\">People</div>\n                    </div>\n                    <div className={`medium-2 cell ${active === \"places\" ? \"active\" : \"\"} places`}\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.PPSClickHandler.bind(this)(\"places\");\n                        }}>\n                        <img src=\"https://png.icons8.com/windows/32/ffffff/marker.png\"\n                            className=\"icon\"\n                            alt=\"location\" />\n                        <br />\n                        <div className=\"icon-label\">Places</div>\n                    </div>\n                    <div className={`medium-2 cell ${active === \"stories\" ? \"active\" : \"\"} stories`}\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.PPSClickHandler.bind(this)(\"stories\");\n                        }}>\n                        <img src=\"https://png.icons8.com/metro/32/ffffff/chat.png\"\n                            className=\"icon\"\n                            alt=\"stories\" />\n                        <br />\n                        <div className=\"icon-label\">Stories</div>\n                    </div>\n                </div>);\n            case 0:\n                return null;\n            default:\n                console.warn(`Unhandled view type: ${view}`);\n        }\n    }\n\n    renderContent() {\n        switch (this.state.active) {\n            case \"bio\":\n                return this.renderBiography();\n            case \"places\":\n                return this.renderPlaces();\n            case \"stories\":\n                return this.renderStories(false);\n            case \"people\":\n                return this.renderPeople();\n            case \"stories_mentioned\":\n                return this.renderStories(true);\n            case null:\n                return null;\n            default:\n                console.warn(`Unhandled active tab: ${this.state.active}`);\n        }\n    }\n\n    renderPeople() {\n        let {people} = this.props;\n        if (people.length === 0) {\n            return <div className=\"cell medium-10 large-9 list-content\">\n                <div className=\"callout alert\">\n                    <h6>There are no associated people.</h6>\n                </div>\n            </div>;\n        } else {\n            return <div className=\"cell medium-10 large-9 list-content\">\n                <ul>\n                    {people.map((person, i) => {\n                        const {full_name, person_id} = person;\n                        return <li key={i} onClick={(event) => {\n                            event.preventDefault();\n                            this.clickHandler(person_id, full_name, \"People\", person);\n                        }}>\n                            <img className=\"icon-item\" src={require(\"../Navigation/icons8-contacts-32.png\")} alt=\"person\" />\n                            {full_name}\n                        </li>;\n                    })}\n                </ul>\n            </div>;\n        }\n    }\n\n    renderPlaces() {\n        let {places, view} = this.props;\n        // array-ify the places\n        places = arrayTransformation(places)\n            // and filter out any improper places\n            .filter((place) => place.place_id !== \"N/A\");\n        // if there are no associated places, leave a special message\n        if (places.length === 0 || typeof places[0] !== \"object\") {\n            return (\n                <div className=\"cell medium-10 large-9 list-content\">\n                    <div className=\"callout alert\">\n                        <h6>There are no associated places.</h6>\n                    </div>\n                </div>\n            );\n        } else {\n            // spit out a list of the places\n            return (\n                <div className=\"cell medium-10 large-9 list-content\">\n                    <ul>\n                        {/* for each of the places */}\n                        {places.map((place, i) => {\n                            // get its name + ID\n                            const {name, place_id} = place;\n                            return <li\n                                // key for React re-rendering\n                                key={i}\n                                // when clicked\n                                onClick={() => {\n                                    // open the relevant place and add it to the nexus graph\n                                    this.clickHandler(place_id, name, \"Places\", place);\n                                }}>\n                                <img\n                                    className=\"icon-item\"\n                                    src={require(\"../Navigation/icons8-marker-32.png\")}\n                                    alt=\"location\" />\n                                {/* fieldtrip places use full_name on their places, all others use display_name */}\n                                {view === \"Fieldtrips\" ? place.full_name : place.display_name}\n                            </li>;\n                        })}\n                    </ul>\n                </div>\n            );\n        }\n    }\n\n    /**\n     * Render any associated stories into a list\n     * @param {boolean} mentioned Whether or not these stories are mentioned stories\n     * @returns {JSX} The rendered stories list\n     */\n    renderStories(mentioned) {\n        // determine whether to get direct or mentioned stories\n        const stories = mentioned ? this.props.storiesMentioned : this.props.stories;\n        // if there are no associated stories, leave a message indicating this\n        if (stories.length === 0) {\n            return (\n                <div className=\"cell medium-10 large-9 list-content stories\">\n                    <div className=\"callout alert\">\n                        <h6>There are no {mentioned} stories.</h6>\n                    </div>\n                </div>\n            );\n        } else {\n            // create a list of the stories to display\n            return (\n                <div className=\"cell medium-10 large-9 list-content stories\">\n                    <ul>\n                        {/* for each of the stories */}\n                        {stories.map((story, i) => {\n                            // get its full name and ID\n                            const {full_name, story_id} = story;\n                            return <li\n                                // key for react rerendering\n                                key={i}\n                                // when this is clicked\n                                onClick={() => {\n                                    // open up the story and add it to the graph\n                                    this.clickHandler.bind(this)(story_id, full_name, \"Stories\", story);\n                                }}>\n                                <img className={\"icon-item\"} src={require(\"../Navigation/icons8-chat-filled-32.png\")} alt=\"story\" />\n                                {/* text should be the name of the story */}\n                                {full_name}\n                            </li>;\n                        })}\n                    </ul>\n                </div>\n            );\n        }\n\n    }\n\n    renderBiography() {\n        let {bio, object} = this.props;\n        // assuming there is actually an author\n        if (bio !== null) {\n            // get various attributes of the author\n            let {birth_date, death_date, full_name, intro_bio, person_id} = bio;\n            return (\n                <div className=\"cell medium-10 large-9 content\">\n                    <div className=\"grid-y\">\n                        <div className=\"scrolling\">\n                            <div className=\"cell medium-3\">\n                                <div className=\"grid-x informant-bio-container\">\n                                    <div className=\"cell medium-6\">\n                                        <img src={require(`./informant_images/${[90, 123, 150, 235, 241].includes(object.informant_id) ? `${object.informant_id}.jpg` : \"noprofile.png\"}`)}\n                                             alt={object.full_name} />\n                                    </div>\n                                    <div className=\"cell medium-6 details\">\n                                        <div><b>Born</b> {birth_date}</div>\n                                        <div><b>Died</b> {death_date}</div>\n                                        <div><b>ID#</b> {object.informant_id}</div>\n                                        <a onClick={() => {\n                                            // if (per)\n                                            this.clickHandler(person_id, full_name, \"People\", bio);\n                                        }} className=\"button\">Informant Page</a>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"cell medium-9 biography\">\n                                {intro_bio}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            );\n        } else {\n            // no author, notify the viewer\n            return (\n                <div className=\"cell medium-10 large-9 list-content\">\n                    <div className=\"callout alert\">\n                        <h6>There is no associated informant.</h6>\n                    </div>\n                </div>\n            );\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"medium-1 RightBar cell\">\n                <div className=\"grid-y\">\n                    <SlidingPane\n                        className=\"right-bar full\"\n                        overlayClassName=\"some-custom-overlay-class\"\n                        isOpen={this.state.isPaneOpen}\n                        width=\"35vw\"\n                        onRequestClose={() => {\n                            // triggered on \"<\" on left top click or on outside click\n                            this.setState({\n                                \"isPaneOpen\": false,\n                                \"people\": false,\n                                \"bio\": false,\n                                \"places\": false,\n                                \"stories\": false,\n                                \"storiesMentioned\": false,\n                            });\n                        }}>\n                        <div className=\"grid-x control-container\">\n                            {/* side bar controls*/}\n                            <div className=\"cell medium-2 large-3 controls\">\n                                <div className=\"grid-y\">\n                                    {this.renderControls()}\n                                </div>\n                            </div>\n                            {/* side bar contents*/}\n                            {this.renderContent()}\n                        </div>\n                    </SlidingPane>\n                    {this.renderControls()}\n                </div>\n            </div>\n\n        );\n    }\n}\n\nRightBar.propTypes = {\n    \"bio\": PropTypes.shape({\n        \"birth_date\": PropTypes.string.isRequired,\n        \"death_date\": PropTypes.string.isRequired,\n        \"full_name\": PropTypes.string.isRequired,\n        \"intro_bio\": PropTypes.string.isRequired,\n        \"person_id\": PropTypes.number.isRequired,\n    }).isRequired,\n    \"object\": PropTypes.shape({\n        \"full_name\": PropTypes.string.isRequired,\n        \"informant_first_name\": PropTypes.string.isRequired,\n        \"informant_last_name\": PropTypes.string.isRequired,\n        \"informant_id\": PropTypes.number.isRequired,\n    }),\n    \"people\": PropTypes.array.isRequired,\n    \"stories\": PropTypes.array,\n    \"storiesMentioned\": PropTypes.array,\n    \"tabViewerActions\": PropTypes.object.isRequired,\n    \"places\": PropTypes.any.isRequired,\n    \"view\": PropTypes.oneOf([\"Fieldtrips\", \"People\", \"Places\", \"Stories\"]),\n};\n\n// define any necessary missing values\nRightBar.defaultProps = {\n    \"bio\": {\n        \"birth_date\": \"\",\n        \"death_date\": \"\",\n        \"full_name\": \"\",\n        \"intro_bio\": \"\",\n        \"person_id\": null,\n    },\n    \"object\": {\n        \"full_name\": \"\",\n        \"informant_first_name\": \"\",\n        \"informant_last_name\": \"\",\n        \"informant_id\": null,\n    },\n    \"people\": [],\n    \"stories\": [],\n    \"storiesMentioned\": [],\n    \"places\": \"Stories\",\n    \"view\": \"\",\n};\n\nRightBar.propTypes = {\n    \"tabActions\": PropTypes.object,\n};\n\nfunction mapStateToProps(state) {\n    return {\n        \"state\": state.tabViewer,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        \"tabViewerActions\": bindActionCreators(tabViewerActions, dispatch),\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(RightBar);\n","import React, {Component} from \"react\";\nimport Modal from \"react-modal\";\nimport \"react-sliding-pane/dist/react-sliding-pane.css\";\nimport RightBar from \"../RightBar/RightBar\";\nimport {getPeopleByID, getGenreByID, getETKByID, getTangoByID} from \"../../data-stores/DisplayArtifactModel\";\nimport {arrayTransformation} from \"../../utils\";\nimport {addNode} from \"../NexusGraph/NexusGraphModel\";\nimport \"./StoryView.css\";\nimport MapView from \"../MapView/MapView\";\nimport PropTypes from \"prop-types\";\nimport {bindActionCreators} from \"redux\";\nimport * as searchActions from \"../../actions/searchActions\";\nimport * as tabViewerActions from \"../../actions/tabViewerActions\";\nimport connect from \"react-redux/es/connect/connect\";\nimport {setSessionStorage} from \"../../data-stores/SessionStorageModel\";\n\nconst indexToVersion = {\n    \"0\": \"english_manuscript\",\n    \"1\": \"english_publication\",\n    \"2\": \"danish_manuscript\",\n    \"3\": \"danish_publication\",\n};\n\nclass StoryView extends Component {\n    constructor(props) {\n        super(props);\n        // set initial state\n        this.state = {\n            // which version of the storyview to show\n            \"isMapExpanded\": false,\n            \"lastStoryVersionOpen\": 1,\n            // start with the first accordion tab open\n            \"openTab\": 0,\n            \"storyVersionOpen\": [false, true, false, false],\n            // two versions wouldn't be open\n            \"twoVersions\": false,\n            \"fontSize\": 16,\n            // update with any previous state stored in redux\n            ...props.state.views[props.viewIndex].state,\n        };\n        // out of all the story's places\n        this.placeRecorded = arrayTransformation(props.story.places.place)\n            // find the one that is where this story was recorded\n            .find((place) => place.type === \"place_recorded\");\n        // out of all the story's places\n        this.placesMentioned = arrayTransformation(props.story.places.place)\n            // find the ones that are mentioned in story\n            .filter((place) => place.type === \"place_mentioned\");\n        // properly bind functions so that they work inside sub-elements\n        this.renderStories = this.renderRelatedStories.bind(this);\n        this.renderProperty = this.renderProperty.bind(this);\n        this.accordionHandler = this.accordionHandler.bind(this);\n    }\n\n    componentDidMount() {\n        Modal.setAppElement(this.el);\n    }\n\n    componentWillUnmount() {\n        // save state to redux for later\n        this.props.actions.updateTab(this.props.viewIndex, {\n            \"state\": this.state,\n        });\n    }\n\n    renderRelatedStories() {\n        // get related stories\n        const {stories_mentioned} = this.props.story;\n        // if we actually have any related stories\n        if (stories_mentioned !== null) {\n            return (\n                <ul>\n                    {/* for each mentioned story */}\n                    {arrayTransformation(stories_mentioned.story).map((story, i) => {\n                        // get its id, display name\n                        const {story_id, full_name} = story;\n                        return <li\n                            key={i}\n                            className=\"associated-items\"\n                            onClick={() => {\n                                // add the story as a node on the graph\n                                addNode(story_id, full_name, \"Stories\", story);\n                                // open up the story in a new tab\n                                this.props.actions.addTab(story_id, full_name, \"Stories\");\n                            }}>\n                            {full_name}\n                        </li>;\n                    })}\n                </ul>\n            );\n        } else {\n            // no related stories, notify the viewer\n            return (\n                <div className=\"callout alert\">\n                    <h6>No related stories.</h6>\n                </div>\n            );\n        }\n    }\n\n    /**\n     * Handle a click on the left accordion tri-tabs\n     * @param {*} tab Tab that was clicked\n     */\n    accordionHandler(tab) {\n        this.setState({\n            // if we clicked on a new tab, make that active\n            // otherwise we are trying to hide the current tab, so no active tab\n            \"openTab\": tab,\n        });\n    }\n\n    bibliographicReferences() {\n        const {bibliography_references} = this.props.story;\n        // no references, alert the viewer\n        if (bibliography_references === null || bibliography_references.reference.length === 0) {\n            return <div className=\"callout alert\">\n                <h6>No references for this story.</h6>\n            </div>;\n        } else {\n            return <table>\n                <tbody>{\n                    // display each reference on a row\n                    arrayTransformation(bibliography_references.reference).map((reference) => {\n                        const {display_string} = reference;\n                        return <tr key={display_string}>\n                            {/* parse the html and display it (to show the formatting/italics, etc.) */}\n                            <td dangerouslySetInnerHTML={{\"__html\": display_string}} />\n                        </tr>;\n                    })}\n                </tbody>\n            </table>;\n        }\n    }\n\n    storyViewerClickHandler(version) {\n        this.setState((prevState) => {\n            // get relevant previous conditions\n            let {lastStoryVersionOpen, storyVersionOpen, twoVersions} = prevState;\n            // total number of open manuscripts\n            const versionCount = storyVersionOpen.filter(Boolean).length;\n            // if clicked version is already open\n            if (storyVersionOpen[version] === true) {\n                // if we alreay have two tabs open\n                if (versionCount >= 2) {\n                    // close the clicked tab\n                    storyVersionOpen[version] = false;\n                }\n                // we have ensured that only one view is open by closing if necessary\n                twoVersions = false;\n                // set last open view to be the one remaining open view\n                lastStoryVersionOpen = storyVersionOpen.findIndex(Boolean);\n            } else {\n                // we are going to have 2 views open\n                twoVersions = true;\n                // if we already have at least two versions open\n                if (versionCount >= 2) {\n                    // close the last open version\n                    storyVersionOpen[prevState.lastStoryVersionOpen] = false;\n                }\n                // open clicked version\n                storyVersionOpen[version] = true;\n                // clicked version is now the last version that was opened\n                lastStoryVersionOpen = version;\n            }\n            return {\n                lastStoryVersionOpen,\n                storyVersionOpen,\n                twoVersions,\n            };\n        });\n    }\n\n    renderProperty(property) {\n        // if the property is defined, that should be displayed, otherwise not applicable\n        return property || \"N/A\";\n    }\n\n    renderComponentView(component, name) {\n        // if the component is defiend, it should be displayed, otherwise notify that it doesn't exist\n        return component || (\n            <div className=\"callout alert\">\n                <h6>{name} does not exist.</h6>\n            </div>\n        );\n    }\n\n    expandMap() {\n        this.setState(({isMapExpanded}) => ({\n            \"isMapExpanded\": !isMapExpanded,\n        }));\n    }\n\n    increaseFontSize() {\n        if (this.state.fontSize < 24) {\n            this.setState({fontSize: this.state.fontSize + 2});\n        }\n    }\n\n    decreaseFontSize() {\n        if (this.state.fontSize > 10)\n        this.setState({fontSize: this.state.fontSize - 2});\n    }\n\n    render() {\n        const {story} = this.props,\n            {\n                annotation,\n                etk_index,\n                \"etk_index\": {\n                    heading_english,\n                },\n                fielddiary_page_end,\n                fielddiary_page_start,\n                fieldtrip,\n                fieldtrip_end_date,\n                fieldtrip_start_date,\n                full_name,\n                genre,\n                informant_id,\n                informant_full_name,\n                keywords,\n                order_told,\n                places,\n                tango_indices,\n            } = story,\n            personData = getPeopleByID(informant_id),\n            PlaceObjectArray = places.place,\n            {\n                isMapExpanded,\n                openTab,\n                storyVersionOpen,\n                twoVersions,\n            } = this.state;\n        // standard story view\n        if (isMapExpanded === false) {\n            return (\n                <div className=\"StoryView grid-x\">\n                    <div className=\"medium-3 cell grid-y story-meta-data-wrapper\">\n                        <div className=\"small-4 cell\">\n                            <MapView key={0} places={places.place} />\n                        </div>\n                        <button\n                            className=\"primary button\"\n                            style={{\n                                \"height\": \"3vh\",\n                                \"lineHeight\": \"0vh\",\n                                \"textAlign\": \"center\",\n                            }}\n                            onClick={this.expandMap.bind(this)}>\n                            Expand Map\n                        </button>\n                        <ul className=\"accordion\" data-accordian>\n                            <li className={`accordion-item ${openTab === 0 && \"is-active\"}`}>\n                                <a\n                                    className=\"accordion-title\"\n                                    onClick={() => {\n                                        // when clicked, toggle the top tab\n                                        this.accordionHandler(0);\n                                    }}>Story Data</a>\n                                {/* only show story data if that is the open accordion tab */}\n                                {openTab === 0 &&\n                                    <div className=\"body\">\n                                        <b>Order Told</b> {this.renderProperty(order_told)}<br />\n                                        <b>Recorded during fieldtrip</b> {this.renderProperty(fieldtrip.id)}<br />\n                                        <b>Fieldtrip dates</b> {this.renderProperty(fieldtrip_start_date)} to {this.renderProperty.bind(this)(fieldtrip_end_date)}<br />\n                                        <b>Place recorded</b> {\n                                            // is there a properly set place recorded?\n                                            typeof this.placeRecorded !== \"undefined\"\n                                                // if so, return it\n                                                ? <button\n                                                    // make it a button-well\n                                                    className=\"button keyword-well\"\n                                                    // when it is clicked\n                                                    onClick={() => {\n                                                        // open up this place's tab\n                                                        this.props.actions.addTab(this.placeRecorded.place_id, this.placeRecorded.name, \"Places\");\n                                                        // display the place name\n                                                    }}>{this.placeRecorded.name}</button>\n                                                // otherwise, it isn't applicable\n                                                : \"N/A\"}\n                                        <br />\n                                        <b>Field diary pages</b> {\n                                            // are there field diary pages?\n                                            fielddiary_page_start !== \"No field diary recording\"\n                                                // if so, list them out\n                                                ? `${fielddiary_page_start} to ${fielddiary_page_end}`\n                                                // otherwise, it's not applicable\n                                                : \"N/A\"\n                                        }\n                                        <br />\n                                        <b>Associated Keywords</b><br />{\n                                            // for each of the keywords\n                                            arrayTransformation(keywords.keyword).map((keyword) => (\n                                                // return a well that triggers a serach by that keyword when clicked\n                                                <button\n                                                    // make it a button-well\n                                                    className=\"button keyword-well\"\n                                                    key={keyword.keyword}\n                                                    // when it is clicked\n                                                    onClick={() => {\n                                                        // start a search by this keyword\n                                                        this.props.actions.searchArtifact(keyword.keyword);\n                                                        // go home to show the results\n                                                        this.props.actions.switchTabs(0);\n                                                    }}>{keyword.keyword}</button>\n                                            ))}\n                                        <br />\n                                        <b>Places mentioned in story</b> {\n                                            // are there any mentioned places\n                                            this.placesMentioned.length > 0\n                                                // if so, for each of the mentioned places\n                                                ? this.placesMentioned.map((place, i) => (\n                                                    <button\n                                                        key={i}\n                                                        // make it a button-well\n                                                        className=\"button keyword-well\"\n                                                        // when it is clicked\n                                                        onClick={() => {\n                                                            // open up the tab related to this place\n                                                            this.props.actions.addTab(place.place_id, place.name, \"Places\");\n                                                        }}>{place.name}</button>\n                                                    // otherwise, this is not applicable\n                                                )) : \"N/A\"}\n                                    </div>}\n                            </li>\n                            <li className={`accordion-item ${openTab === 1 && \"is-active\"}`}>\n                                <a\n                                    className=\"accordion-title\"\n                                    // when clicked, toggle the middle tab\n                                    onClick={this.accordionHandler.bind(this, 1)}>\n                                    Story Indices\n                                </a>\n                                {/* only show indices if that is the open accordion tab */}\n                                {openTab === 1 &&\n                                    <div className=\"body\">\n                                        <b>Genre</b>\n                                        <button\n                                            className=\"button keyword-well\"\n                                            onClick={() => {\n                                                setSessionStorage(\"SelectedNavOntology\", {\n                                                    \"data\": \"Genres\",\n                                                });\n                                                setSessionStorage(\"dropdownLists\", [getGenreByID(genre.id)]);\n                                                this.props.actions.switchTabs(0);\n                                            }}>\n                                            {genre.name}\n                                        </button>\n                                        <br />\n                                        <b>ETK Index</b>\n                                        <button\n                                            className=\"button keyword-well\"\n                                            onClick={() => {\n                                                setSessionStorage(\"SelectedNavOntology\", {\n                                                    \"data\": \"ETK Index\",\n                                                });\n                                                setSessionStorage(\"dropdownLists\", [getETKByID(etk_index.id)]);\n                                                console.log(etk_index, getETKByID(etk_index.id));\n                                                this.props.actions.switchTabs(0);\n                                            }}>\n                                            {heading_english}\n                                        </button>\n                                        <br />\n                                        <b>Tangherlini Indices</b><br />\n                                        {/* render the indices by their display names */}\n                                        {arrayTransformation(tango_indices.tango_index).map((tango, i) => {\n                                            return (\n                                                <button className=\"button keyword-well\" key={i}\n                                                    onClick={() => {\n                                                        setSessionStorage(\"SelectedNavOntology\", {\n                                                            \"data\": \"Tangherlini Index\",\n                                                        });\n                                                        setSessionStorage(\"dropdownLists\", [getTangoByID(tango.id).type, getTangoByID(tango.id)]);\n                                                        this.props.actions.switchTabs(0);\n                                                    }}>\n                                                    {tango.display_name}\n                                                </button>\n                                            );\n                                        })}\n                                    </div>}\n                            </li>\n                            <li className={`accordion-item ${openTab === 2 && \"is-active\"}`}>\n                                <a\n                                    className=\"accordion-title\"\n                                    // when clicked, toggle the bottom tab\n                                    onClick={this.accordionHandler.bind(this, 2)}>\n                                    Bibliographical References\n                                </a>\n                                {/* only show references if that is the open tab */}\n                                {openTab === 2 &&\n                                    <div className=\"body\">\n                                        {this.bibliographicReferences()}\n                                    </div>}\n                            </li>\n                        </ul>\n                    </div>\n                    <div className=\"medium-9 cell\" style={{position: \"relative\"}}>\n                        <h2 className=\"title\">\n                            <img src=\"https://png.icons8.com/ios/42/000000/chat-filled.png\"\n                                style={{\n                                    \"marginRight\": \"1%\",\n                                    \"marginTop\": \"-1%\",\n                                }} alt=\"story icon\" />\n                            {full_name}\n                        </h2>\n                        <h4 className=\"name-header\" style={{\"marginLeft\": \"1.5%\"}}>{informant_full_name}</h4>\n                        <div className=\"font-control\">\n                            <div className=\"button secondary\" style={{\"marginLeft\": \"1.5%\"}} onClick={(e) => {e.preventDefault(); this.increaseFontSize.bind(this)()}}>A</div>\n                            <div className=\"button secondary\" onClick={(e) => { e.preventDefault(); this.decreaseFontSize.bind(this)() }}>a</div>\n                        </div>\n                        <div className=\"grid-x\" style={{float: \"left\"}}>\n                            <div className=\"medium-11 cell\">\n                                <div className=\"grid-padding-x\">\n                                    <div className=\"story-viewer cell grid-y\">\n                                        <ul className=\"button-group story-viewer-options\">\n                                            {/* make the button secondary if that story version is not open */}\n                                            <li className={`button ${!storyVersionOpen[0] && \"secondary\"}`}\n                                                onClick={this.storyViewerClickHandler.bind(this, 0)}>\n                                                English ms Translation\n                                            </li>\n                                            <li className={`button ${!storyVersionOpen[1] && \"secondary\"}`}\n                                                onClick={this.storyViewerClickHandler.bind(this, 1)}>\n                                                English Published Version\n                                            </li>\n                                            <li className={`button ${!storyVersionOpen[2] && \"secondary\"}`}\n                                                onClick={this.storyViewerClickHandler.bind(this, 2)}>\n                                                Danish ms Transcription\n                                            </li>\n                                            <li className={`button ${!storyVersionOpen[3] && \"secondary\"}`}\n                                                onClick={this.storyViewerClickHandler.bind(this, 3)}>\n                                                Danish Published Version\n                                            </li>\n                                        </ul>\n                                        <div className=\"grid-x medium-2\">\n                                            {/* only render the active story versions */}\n                                            {storyVersionOpen.map((version, i) => version && (\n                                                <div className={`cell story ${twoVersions && \"medium-6\"}`} key={i}>\n                                                    <div className=\"card\">\n                                                        <div className=\"card-section\" style={{fontSize: this.state.fontSize+\"px\"}}>\n                                                            {this.renderComponentView(story[indexToVersion[i]], \"Version\")}\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            ))}\n                                        </div>\n                                    </div>\n                                    <div className=\"cell\">\n                                        <div className=\"grid-x\">\n                                            <div className=\"medium-8 cell\">\n                                                <div className=\"card annotation\">\n                                                    <h5 className=\"title\">Annotation</h5>\n                                                    <div className=\"card-section\" style={{fontSize: this.state.fontSize+\"px\"}}>\n                                                        {this.renderComponentView(annotation, \"Annotation\")}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div className=\"medium-4 cell relatedStories\">\n                                                <h5 className=\"title\">Related Stories</h5>\n                                                {this.renderRelatedStories()}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <RightBar\n                                view=\"Stories\"\n                                object={story}\n                                bio={personData}\n                                places={PlaceObjectArray}\n                                // if the author is valid, show its stories under the stories tab\n                                stories={(personData && personData.stories) || []} />\n                        </div>\n                    </div>\n                </div>\n            );\n        } else {\n            // enlarged map + story text view\n            return (\n                <div className=\"StoryView grid-x\">\n                    <div className=\"medium-6 cell\">\n                        <div style={{\n                            \"height\": \"85vh\",\n                        }}>\n                            <MapView key={1} places={places.place} />\n                        </div>\n                    </div>\n                    <div className=\"cell medium-6 grid-y\">\n                        <button\n                            className=\"primary button cell\"\n                            onClick={this.expandMap.bind(this)}>\n                            Shrink Map\n                        </button>\n                        <div className=\"grid-y cell\">\n                            {/* only render the active story versions */}\n                            <ul className=\"button-group story-viewer-options\">\n                                {/* make the button secondary if that story version is not open */}\n                                <li className={`button ${!storyVersionOpen[0] && \"secondary\"}`}\n                                    onClick={this.storyViewerClickHandler.bind(this, 0)} style={{\n                                        \"marginLeft\": \"5px\",\n                                    }}>\n                                    English Translation\n                                </li>\n                                <li className={`button ${!storyVersionOpen[1] && \"secondary\"}`}\n                                    onClick={this.storyViewerClickHandler.bind(this, 1)}>\n                                    English Published\n                                </li>\n                                {/* make the button secondary if that story version is not open */}\n                                <li className={`button ${!storyVersionOpen[2] && \"secondary\"}`}\n                                    onClick={this.storyViewerClickHandler.bind(this, 2)}>\n                                    Danish Transcription\n                                </li>\n                                <li className={`button ${!storyVersionOpen[3] && \"secondary\"}`}\n                                    onClick={this.storyViewerClickHandler.bind(this, 3)}>\n                                    Danish Published\n                                </li>\n                            </ul>\n                            <div className=\"grid-x\">\n                                {/* only render the active story versions */}\n                                {storyVersionOpen.map((version, i) => version && (\n                                    <div className=\"cell story\" key={i} style={{\n                                        \"height\": twoVersions ? \"35vh\" : \"70vh\",\n                                        \"margin\": \"5px\",\n                                        \"wide\": \"10%\",\n                                    }}>\n                                        <div className=\"card\">\n                                            <div className=\"card-section\" style={{fontSize: this.state.fontSize+\"px\"}}>\n                                                {this.renderComponentView(story[indexToVersion[i]], \"Version\")}\n                                            </div>\n                                        </div>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </div>\n                </div >\n            );\n        }\n    }\n}\n\nStoryView.propTypes = {\n    \"actions\": PropTypes.object.isRequired,\n    \"story\": PropTypes.shape({\n        \"annotation\": PropTypes.string.isRequired,\n        \"bibliographic_info\": PropTypes.string,\n        \"bibliography_references\": PropTypes.shape({\n            \"reference\": PropTypes.array,\n        }).isRequired,\n        \"danish_manuscript\": PropTypes.string,\n        \"danish_publication\": PropTypes.string,\n        \"english_manuscript\": PropTypes.string,\n        \"english_publication\": PropTypes.string,\n        \"etk_index\": PropTypes.shape({\n            \"heading_danish\": PropTypes.string,\n            \"heading_english\": PropTypes.string,\n            \"id\": PropTypes.number,\n        }),\n        \"fielddiary_page_end\": PropTypes.string,\n        \"fielddiary_page_start\": PropTypes.string,\n        \"fieldtrip\": PropTypes.shape({\n            \"id\": PropTypes.number,\n        }),\n        \"full_name\": PropTypes.string,\n        \"genre\": PropTypes.shape({\n            \"id\": PropTypes.number,\n            \"name\": PropTypes.string,\n        }),\n        \"informant_first_name\": PropTypes.string,\n        \"informant_full_name\": PropTypes.string,\n        \"informant_id\": PropTypes.number,\n        \"informant_last_name\": PropTypes.string,\n        \"keywords\": PropTypes.shape({\n            \"keyword\": PropTypes.array,\n        }),\n        \"order_told\": PropTypes.number,\n        \"places\": PropTypes.any,\n        \"publication_info\": PropTypes.string,\n        \"stories_mentioned\": PropTypes.any,\n        \"story_id\": PropTypes.number,\n        \"tango_indices\": PropTypes.shape({\n            \"tango_index\": PropTypes.array,\n        }),\n    }),\n};\n\n/**\n * Set certain props to access Redux states\n * @param {Object} state All possible Redux states\n * @returns {Object} Certain states that are set on props\n */\nfunction mapStateToProps(state) {\n    return {\n        \"state\": state.tabViewer,\n    };\n}\n\n/**\n * Set the \"actions\" prop to access Redux actions\n * @param {*} dispatch Redux actions\n * @returns {Object} The actions that are mapped to props.actions\n */\nfunction mapDispatchToProps(dispatch) {\n    return {\n        \"actions\": {\n            ...bindActionCreators(searchActions, dispatch),\n            ...bindActionCreators(tabViewerActions, dispatch),\n        },\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(StoryView);\n","import React, {Component} from \"react\";\nimport RightBar from \"../RightBar/RightBar\";\nimport \"./PlaceView.css\";\nimport MapView from \"../MapView/MapView\";\nimport PropTypes from \"prop-types\";\nimport {arrayTransformation} from \"../../utils\";\n\nclass PlaceView extends Component {\n    render() {\n        const {place} = this.props;\n        let {name, people, storiesCollected, storiesMentioned} = place;\n        // ensure that the person is properly defined\n        if (typeof people !== \"undefined\") {\n            // if so, extract the person\n            people = arrayTransformation(people[0].person);\n        } else {\n            // otherwise set it to be empty\n            people = [];\n        }\n        storiesCollected = arrayTransformation(storiesCollected);\n        storiesMentioned = arrayTransformation(storiesMentioned);\n        return (\n            <div className=\"PlaceView grid-y\">\n                <div className=\"tab-header cell medium-1\">\n                    <img style={{\"marginTop\": \"-1.7%\", \"marginRight\": \"1%\"}} src=\"https://png.icons8.com/windows/48/000000/marker.png\" alt=\"location icon\" />\n                    <h2 style={{\"fontWeight\": \"bold\", \"display\": \"inline-block\"}}>{name}</h2>\n                </div>\n                <div className=\"medium-11\">\n                    <div className=\"grid-x place-content-wrapper\">\n                        <div className=\"medium-11 cell\">\n                            <MapView places={[place]} />\n                        </div>\n                        <RightBar view=\"Places\" stories={storiesCollected} storiesMentioned={storiesMentioned} people={people} />\n                    </div>\n                </div>\n\n            </div>\n        );\n    }\n}\n\nPlaceView.propTypes = {\n    \"place\": PropTypes.shape({\n        \"fieldtrips\": PropTypes.oneOfType([\n            PropTypes.object,\n            PropTypes.number,\n        ]),\n        \"latitude\": PropTypes.number,\n        \"longitude\": PropTypes.number,\n        \"name\": PropTypes.string.isRequired,\n        \"people\": PropTypes.array,\n        \"place_id\": PropTypes.number,\n        \"storiesCollected\": PropTypes.array,\n        \"storiesMentioned\": PropTypes.array,\n    }).isRequired,\n};\n\n// define any necessary missing values\nPlaceView.defaultProps = {\n    \"place\": {\n        \"name\": \"\",\n        \"people\": [],\n        \"storiesCollected\": [],\n        \"storiesMentioned\": [],\n    },\n};\n\nexport default PlaceView;\n","/**\n * Created by danielhuang on 2/6/18.\n */\nimport React, {Component} from \"react\";\nimport RightBar from \"../RightBar/RightBar\";\nimport \"./PeopleView.css\";\nimport {getPlacesByID, OccupationDictionary} from \"../../data-stores/DisplayArtifactModel\";\nimport {arrayTransformation, getPlaceIDList} from \"../../utils\";\nimport MapView from \"../MapView/MapView\";\n// prop validation\nimport PropTypes from \"prop-types\";\nimport {bindActionCreators} from \"redux\";\nimport * as tabViewerActions from \"../../actions/tabViewerActions\";\nimport connect from \"react-redux/es/connect/connect\";\n\nconst CIToChapterID = {\n    1: 6,\n    2: 7,\n    3: 8,\n    4: 9,\n    5: 10,\n};\n\nclass PeopleView extends Component {\n    getOccupation() {\n        // get the person we are using\n        let {person} = this.props;\n        // assuming we have occupations\n        if (person.occupations !== null) {\n            // get the occupations\n            let jobList = person.occupations.occupation;\n            // if it's a single job, turn it into a single element array\n            jobList = arrayTransformation(jobList);\n            // for each of the jobs\n            jobList.forEach(function (occupation) {\n                // set its name to be that of the matching job in the occupation dictionary\n                occupation.occupation_name = OccupationDictionary.find((testOccupation) => testOccupation.ID === occupation.occupation_id).occupation;\n            });\n            // for the list of jobs\n            return jobList\n                // combine them into a comma and space separate string\n                .reduce((res, job) => `${res}, ${job.occupation_name}`, \"\")\n                // and remove the initial comma and space\n                .substring(2);\n        } else {\n            // no job, alert this\n            return \"No Occupation\";\n        }\n    }\n\n    openCoreInformantTab() {\n        console.log('hi');\n        if (this.props.person.hasOwnProperty(\"core_informant\")) {\n            let CoreInformantID = this.props.person['core_informant'];\n            if (CoreInformantID > 0 && CoreInformantID <= 5) {\n                let QueryID = CIToChapterID[CoreInformantID];\n                this.props.tabViewerActions.addTab(QueryID, this.props.person['full_name'], \"Book\");\n            }\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"PeopleView grid-y\">\n                <div className=\"tab-header cell medium-1\">\n                    <img style={{\"marginTop\": \"-1.7%\", \"marginRight\": \"1%\"}} src=\"https://png.icons8.com/windows/64/000000/contacts.png\" alt=\"person icon\" />\n                    <h2 style={{\"fontWeight\": \"bold\", \"display\": \"inline-block\"}}>{this.props.person.full_name}</h2>\n                </div>\n                <div className=\"cell medium 11\">\n                    <div className=\"grid-x\" >\n                        <div className=\"medium-7 cell\">\n                            <div className=\"grid-y info-wrap\">\n                                <div className=\"cell medium-5\">\n                                    <div className=\"grid-x informant-bio-container\">\n                                        <img src={require(`../RightBar/informant_images/${[90, 123, 150, 235, 241].includes(this.props.person.person_id) ? `${this.props.person.person_id}.jpg` : \"noprofile.png\"}`)}\n                                            className=\"cell medium-4\" alt=\"Person\" />\n                                        <div className=\"cell medium-8 details\">\n                                            <div className=\"detail-item\"><b>Born</b> {this.props.person.birth_date}</div>\n                                            <div className=\"detail-item\"><b>Died</b> {this.props.person.death_date}</div>\n                                            <div className=\"detail-item\"><b>ID#</b> {this.props.person.person_id}</div>\n                                            <div className=\"detail-item\"><b>Occupation (Eng/Dansk):</b> {this.getOccupation()}</div>\n                                            {this.props.person['core_informant'] === 1 &&\n                                                <button className=\"button primary\"\n                                                onClick={(e) => {e.preventDefault(); this.openCoreInformantTab.bind(this)()}}\n                                                >Full Biography</button>}\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"cell medium-7 wrapper person-bio\">\n                                    {this.props.person.intro_bio}\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"medium-4 cell map-wrapper\">\n                            <MapView places={this.props.person.places} />\n                        </div>\n                        <RightBar\n                            view=\"People\"\n                            stories={this.props.person.stories}\n                            places={this.props.person.places}\n                        />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nPeopleView.propTypes = {\n    \"person\": PropTypes.shape({\n        \"birth_date\": PropTypes.string.isRequired,\n        \"core_informant\": PropTypes.number,\n        \"death_date\": PropTypes.string.isRequired,\n        \"first_name\": PropTypes.string,\n        \"fullbio\": PropTypes.string,\n        \"full_name\": PropTypes.string.isRequired,\n        \"gender\": PropTypes.string,\n        \"last_name\": PropTypes.string,\n        \"image\": PropTypes.string,\n        \"intro_bio\": PropTypes.string.isRequired,\n        \"occupations\": PropTypes.object,\n        \"person_id\": PropTypes.number.isRequired,\n        \"places\": PropTypes.array.isRequired,\n        \"stories\": PropTypes.array.isRequired,\n        // must have tabViewerActions to open up a new book tab\n        \"tabViewerActions\": PropTypes.object.isRequired,\n    }),\n};\n\nfunction mapStateToProps(state) {\n    return {\n        \"state\": state.tabViewer,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        \"tabViewerActions\": bindActionCreators(tabViewerActions, dispatch),\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(PeopleView);\n","import React, {Component} from \"react\";\nimport RightBar from \"../RightBar/RightBar\";\nimport \"./FieldtripView.css\";\nimport PropTypes from \"prop-types\";\nimport MapView from \"../MapView/MapView\";\nimport {getPlacesByID} from \"../../data-stores/DisplayArtifactModel\";\n// redux imports\nimport {bindActionCreators} from \"redux\";\nimport * as tabViewerActions from \"../../actions/tabViewerActions\";\nimport connect from \"react-redux/es/connect/connect\";\n\nclass FieldtripView extends Component {\n    render() {\n        const PlacesVisited = this.props.fieldtrip.places_visited.map((place) => getPlacesByID(place.place_id));\n        return (\n            <div className=\"FieldtripView grid-x\">\n                <div className=\"medium-11 cell main\">\n                    <div className=\"grid-x\">\n                        <div className=\"heading cell medium-10\">\n                            {/* <div className=\"heading\"> */}\n                            <img className=\"h-item\" src={require(\"./../Navigation/icons8-waypoint-map-32.png\")} />\n                            <h2 className=\"h-item\">{this.props.fieldtrip.fieldtrip_name}</h2>\n                            <h6 className=\"h-item\">{this.props.fieldtrip.start_date} to {this.props.fieldtrip.end_date}</h6>\n                            {/* </div> */}\n                            {/* <h3>{this.props.fieldtrip.fieldtrip_name}</h3>\n                            <h4>{this.props.fieldtrip.start_date} to {this.props.fieldtrip.end_date}</h4> */}\n                        </div>\n                        <button\n                            className=\"fieldtripTool button primary cell medium-2\"\n                            onClick={() => {\n                                this.props.actions.addTab(this.props.fieldtrip.fieldtrip_id, \"Fieldtrip Tool\", \"FieldtripTool\");\n                            }}>Open in Fieldtrip Tool</button>\n                    </div>\n                    <MapView className=\"heading\" places={PlacesVisited} view={\"Fieldtrip\"} />\n                </div>\n                {/* right bar with all the relevant PPS for the fieldtrip */}\n                <RightBar view=\"Fieldtrips\"\n                    people={this.props.fieldtrip.people_visited}\n                    stories={this.props.fieldtrip.stories_collected}\n                    places={this.props.fieldtrip.places_visited}\n                    className=\"medium-1 cell\"\n                />\n            </div>\n        );\n    }\n}\n\n// ensure that we get our standard fieldtrip object passed\n// https://github.com/ScandinavianSection-UCLA/Nexus2/wiki/3.-Data-Structure#fieldtrip-object\n// note that people_visited, places_visited, and stories_collected seem to be array-ified before being passed here\nFieldtripView.propTypes = {\n    \"fieldtrip\": PropTypes.shape({\n        \"end_date\": PropTypes.string.isRequired,\n        \"fieldtrip_id\": PropTypes.number,\n        \"fieldtrip_name\": PropTypes.string.isRequired,\n        \"people_visited\": PropTypes.array.isRequired,\n        \"places_visited\": PropTypes.array.isRequired,\n        \"shapefile\": PropTypes.string,\n        \"start_date\": PropTypes.string.isRequired,\n        \"stories_collected\": PropTypes.array.isRequired,\n    }).isRequired,\n};\n\n// define any necessary missing values\nFieldtripView.defaultProps = {\n    \"fieldtrip\": {\n        \"end_date\": \"\",\n        \"fieldtrip_name\": \"\",\n        \"people_visited\": [],\n        \"places_visited\": [],\n        \"start_date\": \"\",\n        \"stories_collected\": [],\n    },\n};\n\n/**\n * Set certain props to access Redux states\n * @param {Object} state All possible Redux states\n * @returns {Object} Certain states that are set on props\n */\nfunction mapStateToProps() {\n    return {};\n}\n\n/**\n * Set the \"actions\" prop to access Redux actions\n * @param {*} dispatch Redux actions\n * @returns {Object} The actions that are mapped to props.actions\n */\nfunction mapDispatchToProps(dispatch) {\n    return {\n        \"actions\": bindActionCreators(tabViewerActions, dispatch),\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(FieldtripView);\n","// react functionality\nimport React, {Component} from \"react\";\n// prop validation\nimport PropTypes from \"prop-types\";\n// styling for the view\nimport \"./BookView.css\";\n// book viewer\nimport ePub from \"epubjs\";\n// redux functionality\nimport {bindActionCreators} from \"redux\";\nimport {connect} from \"react-redux\";\n// actions to manipulate the tabs\nimport * as tabViewerActions from \"../../actions/tabViewerActions\";\n// data for the dropdown\nimport menuList from \"../../data/book_menu.json\";\n\nclass BookView extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            // start with the chapter list hidden\n            \"dropdownActive\": false,\n            \"fontSize\": 16,\n            // not searching at start\n            \"searchActive\": false,\n            \"searchJSX\": null,\n            \"searchValue\": \"\",\n            // update with any previous state stored in redux\n            ...props.state.views[props.viewIndex].state,\n        };\n        // to be set once the book is rendered\n        this.book = null;\n        this.rendition = null;\n        this.dropdownJSX = [];\n        // ref to the book div so we can render the content there\n        this.bookRef = React.createRef();\n        // bind the event handler so it works properly inside the listener\n        this.handleKeyPress = this.handleKeyPress.bind(this);\n        // measured in px\n        this.minimumFontSize = 10;\n        this.maximumFontSize = 36;\n    }\n\n    // called after the DOM loads for the first time\n    componentDidMount() {\n        // add an event listener for left and right arrow controls\n        document.addEventListener(\"keydown\", this.handleKeyPress, false);\n        // load the .epub book\n        this.book = ePub(`${process.env.PUBLIC_URL}/Book/merge_from_ofoct.epub`);\n        // when it has successfully loaded\n        this.book.loaded.navigation.then(({toc}) => {\n            // generate our TOC list based on the chapters\n            this.dropdownJSX = toc.map((chapter) => (\n                // each is a button\n                <button\n                    // style it as a TOC element\n                    className=\"toc-item\"\n                    // unique key for React\n                    key={chapter.label}\n                    // handler for when it is clicked\n                    onClick={() => {\n                        // go to the chapter that was clciked\n                        this.rendition.display(chapter.href);\n                        // hide the dropdown\n                        this.setState({\n                            \"dropdownActive\": false,\n                        });\n                    }}>\n                    {/* display the whitespace stripped version of the chapter title */}\n                    {chapter.label.trim()}\n                </button>\n            ));\n            // node to render the book to\n            const node = this.bookRef.current;\n            // render the book to the \"book\" div\n            this.rendition = this.book.renderTo(node, {\n                // make it occupy all that space\n                \"height\": \"100%\",\n                \"width\": \"100%\",\n            });\n            // variable to store the final location\n            let location;\n            // numerical ID means it's a chapter number\n            if (typeof this.props.id === \"number\") {\n                // get the corresponding spot in the book for the chapter\n                location = toc[menuList[this.props.id].id - 1].href;\n            } else if (typeof this.props.id === \"string\") {\n                // id is a string location in the book, use that\n                location = this.props.id;\n            } else {\n                // bad type, warn that\n                console.warn(\"Invalid id: \", this.props.id);\n            }\n            this.rendition.themes.fontSize(`${this.state.fontSize}px`);\n            // display the book\n            this.rendition.display(location);\n            // update the tab's ID whenever the page is changed (so it can be re-loaded later)\n            this.rendition.on(\"locationChanged\", (newPage) => {\n                this.props.tabViewerActions.updateTab(this.props.viewIndex, {\n                    \"id\": newPage.start,\n                });\n            });\n        });\n    }\n\n    // called as the book is being switched away from/closed\n    componentWillUnmount() {\n        // \"delete\" the book and rendition\n        this.book = null;\n        this.rendition = null;\n        // remove our event listener\n        document.removeEventListener(\"keydown\", this.handleKeyPress, false);\n        // save state to redux for later\n        this.props.tabViewerActions.updateTab(this.props.viewIndex, {\n            \"state\": this.state,\n        });\n    }\n\n    // handler for key presses\n    handleKeyPress({key}) {\n        switch (key) {\n            // when the right arrow is clicked\n            case \"ArrowRight\":\n                // go to the next page\n                this.rendition.next();\n                break;\n            // when the left arrow is clicked\n            case \"ArrowLeft\":\n                // go to the previous page\n                this.rendition.prev();\n                break;\n            // nothing to do if it was another key\n            default:\n                break;\n        }\n    }\n\n    /**\n     * Handle a search in the book\n     * @param {String} query The string to search for\n     */\n    async handleSearch(query) {\n        // short queries cause it to stall, don't allow that\n        if (query.length >= 2) {\n            const results = await Promise.all(\n                // black magic to search the book: https://github.com/futurepress/epub.js/wiki/Tips-and-Tricks-%28v0.3%29#searching-the-entire-book\n                this.book.spine.spineItems\n                    .map((item) => item.load(this.book.load.bind(this.book))\n                        .then(item.find.bind(item, query))\n                        .finally(item.unload.bind(item)))\n            ).then((queries) => Promise.resolve(\n                // flatten the array into a 1-D array\n                [].concat(...queries)\n            ));\n            this.setState({\n                // show the results\n                \"searchActive\": true,\n                // convert the results into JSX\n                \"searchJSX\": results.map((entry, i) => (\n                    // each is a button\n                    <button\n                        // unique key for react\n                        key={i}\n                        // style it like a search result\n                        className=\"searchResult\"\n                        // when clicked\n                        onClick={() => {\n                            // go to the page this points to\n                            this.rendition.display(entry.cfi);\n                            // turn off the search since we want to see the box\n                            this.setState({\n                                \"searchActive\": false,\n                            });\n                        }}>\n                        {/* show the excerpt that matches the search */}\n                        {entry.excerpt}\n                    </button>\n                )),\n            });\n        }\n    }\n\n    /**\n     * Change the font size of the book\n     * @param {number} change How much to change the font size by\n     */\n    changeFontSize(change) {\n        this.setState(({fontSize}) => {\n            let newSize = fontSize + change;\n            if (newSize < this.minimumFontSize) {\n                newSize = this.minimumFontSize;\n            }\n            if (newSize > this.maximumFontSize) {\n                newSize = this.maximumFontSize;\n            }\n            return {\n                \"fontSize\": newSize,\n            };\n        }, () => {\n            this.rendition.themes.fontSize(`${this.state.fontSize}px`);\n        });\n    }\n\n    render() {\n        return (\n            // div to contain book + button\n            <div className=\"BookView grid-y\">\n                {/* if TOC was requested */}\n                {this.state.dropdownActive === true &&\n                    <div className=\"toc\"\n                        // should anywhere be clicked, disable the dropdown\n                        onClick={() => {\n                            this.setState({\n                                \"dropdownActive\": false,\n                            });\n                        }}>\n                        {/* render the dropdown */}\n                        <div className=\"solid\">{this.dropdownJSX}</div>\n                    </div>}\n                {/* header */}\n                <div className=\"cell medium-1 grid-x\">\n                    {/* TOC opener */}\n                    <button\n                        // style it as a 2-column button\n                        className=\"button secondary cell medium-2\"\n                        // when it is clicked\n                        onClick={(event) => {\n                            // prevent the event from bubbling up (don't allow left page button to be clicked)\n                            event.stopPropagation();\n                            // show the dropdown\n                            this.setState({\n                                \"dropdownActive\": true,\n                            });\n                        }}>Table of Contents</button>\n                    {/* search form */}\n                    <form\n                        // it should fill up the remainder of the header\n                        className=\"cell medium-10 grid-x\"\n                        // if either submit button clicked or enter received\n                        onSubmit={(event) => {\n                            // prevent default redirect\n                            event.preventDefault();\n                            // handle the requested search\n                            this.handleSearch(this.state.searchValue);\n                        }}>\n                        {/* search input field */}\n                        <input\n                            // text input\n                            type=\"text\"\n                            // 2/3 of the form's width\n                            className=\"cell medium-8\"\n                            // placeholder to show if nothing typed\n                            placeholder=\"Search the book...\"\n                            // value based on what has been typed\n                            value={this.state.searchValue}\n                            // when a typing occurs\n                            onChange={(event) => {\n                                // update the search value in state\n                                this.setState({\n                                    \"searchValue\": event.target.value,\n                                });\n                            }} />\n                        {/* search button */}\n                        <input\n                            // trigger submit when clicked\n                            type=\"submit\"\n                            // 1/3 of form, make it look button-y\n                            className=\"button primary cell medium-4\"\n                            // text to display on the button\n                            value=\"Search\" />\n                    </form>\n                </div>\n                {/* hide the book but keep the elements in the DOM if a search is going */}\n                {/* this is so that the book still has its div to render to and doesn't break during a search */}\n                <div className={`book-controls cell medium-11 grid-x ${this.state.searchActive && \"hidden\"}`}>\n                    <div className=\"cell medium-1 grid-y\">\n                        <div className=\"cell medium-1 grid-x\">\n                            <button\n                                className=\"cell fontButton\"\n                                onClick={this.changeFontSize.bind(this, -1)}>\n                                a\n                            </button>\n                            <button\n                                onClick={this.changeFontSize.bind(this, 1)}\n                                className=\"cell fontButton\">\n                                A\n                            </button>\n                        </div>\n                        {/* button to go back a page */}\n                        <button\n                            // give it page turn styling\n                            className=\"cell medium-10 pager\"\n                            onClick={() => {\n                                // go to the left page on click\n                                this.rendition.prev();\n                            }}>\n                            {/* show a large < */}\n                            <img className=\"left-hover\" src=\"https://img.icons8.com/ios/50/000000/chevron-left-filled.png\" alt=\"<\" />\n                        </button>\n                        <div className=\"cell medium-1\"></div>\n                    </div>\n                    {/* actual book content */}\n                    <div className=\"book cell medium-10\" ref={this.bookRef} />\n                    {/* button to go forward a page */}\n                    <button\n                        // give it page turn styling\n                        className=\"pager cell medium-1\"\n                        onClick={() => {\n                            // go to the right page on click\n                            this.rendition.next();\n                        }}>\n                        {/* show a large > */}\n                        <img src=\"https://img.icons8.com/ios/50/000000/chevron-right-filled.png\" alt=\">\" />\n                    </button>\n                </div>\n                {/* when the search results are to be shown */}\n                {this.state.searchActive === true &&\n                    <div className=\"cell medium-11 results\">\n                        {/* show the rendered results */}\n                        {this.state.searchJSX}\n                    </div>}\n            </div>\n        );\n    }\n}\n\nBookView.propTypes = {\n    \"id\": PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.number,\n    ]),\n    \"state\": PropTypes.shape({\n        \"views\": PropTypes.arrayOf(\n            PropTypes.shape({\n                \"active\": PropTypes.bool,\n                \"color\": PropTypes.string,\n                \"id\": PropTypes.oneOfType([\n                    PropTypes.number,\n                    PropTypes.string,\n                ]),\n                \"name\": PropTypes.string,\n                \"type\": PropTypes.string,\n            })\n        ).isRequired,\n    }).isRequired,\n    \"tabViewerActions\": PropTypes.shape({\n        \"addTab\": PropTypes.func,\n        \"closeTab\": PropTypes.func,\n        \"moveTab\": PropTypes.func,\n        \"switchTaxbs\": PropTypes.func,\n        \"updateTab\": PropTypes.func.isRequired,\n    }).isRequired,\n    \"viewIndex\": PropTypes.number.isRequired,\n};\n\n/**\n * Set certain props to access Redux states\n * @param {Object} state All possible Redux states\n * @returns {Object} Certain states that are set on props\n */\nfunction mapStateToProps(state) {\n    return {\n        \"state\": state.tabViewer,\n    };\n}\n\n/**\n * Set the \"tabViewerActions\" prop to access Redux actions\n * @param {*} dispatch Redux actions\n * @returns {Object} The actions that are mapped to props.actions\n */\nfunction mapDispatchToProps(dispatch) {\n    return {\n        \"tabViewerActions\": bindActionCreators(tabViewerActions, dispatch),\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(BookView);\n","// basic react functionality\nimport React, {Component} from \"react\";\n// styling for the buttons\nimport \"./GraphView.css\";\n// functions to get nodes + links\nimport {initializeGraph, initializeNodeCategories} from \"./NexusGraphModel\";\n// the actual graph\nimport NexusGraph from \"./NexusGraph\";\n// prop validation\nimport PropTypes from \"prop-types\";\nimport * as model from \"../../data-stores/DisplayArtifactModel\";\nimport {arrayTransformation} from \"../../utils\";\nimport {nodeColors} from \"./NexusGraphModel\"\nimport {connect} from \"react-redux\";\nimport {bindActionCreators} from \"redux\";\n// actions to manipulate the tabs\nimport * as tabViewerActions from \"../../actions/tabViewerActions\";\nimport JSZip from \"jszip\";\nimport FileSaver from 'file-saver';\n\nclass GraphView extends Component {\n    constructor(props) {\n        super(props);\n        // set a default state\n        this.state = {\n            // get nodes + links from storgae\n            \"data\": initializeGraph(),\n            // get categorized nodes from storage\n            \"nodeCategories\": initializeNodeCategories(),\n            // by default show primary links\n            \"showPrimaryLinks\": true,\n            // by default show secondary links\n            \"showSecondaryLinks\": true,\n            // by default show link labels\n            \"showLinkLabels\": true,\n            \"highlighted\": {\n                \"People\": false,\n                \"Places\": false,\n                \"Stories\": false,\n                \"Fieldtrips\": false,\n            },\n            \"active\": {\n                \"People\": false,\n                \"Places\": false,\n                \"Stories\": false,\n                \"Fieldtrips\": false,\n            },\n            // update with any previous state stored in redux\n            ...props.state.views[props.viewIndex].state,\n        };\n\n        // properly bind these functions so that they can set the state\n        this.togglePrimaryLinks = this.togglePrimaryLinks.bind(this);\n        this.toggleSecondaryLinks = this.toggleSecondaryLinks.bind(this);\n        this.toggleLinkLabels = this.toggleLinkLabels.bind(this);\n    }\n\n    componentWillUnmount() {\n        // save state to redux for later\n        this.props.actions.updateTab(this.props.viewIndex, {\n            \"state\": this.state,\n        });\n    }\n\n    /**\n     * Toggle whether or not to show the primary links on the graph\n     */\n    togglePrimaryLinks() {\n        this.setState((prevState) => ({\n            // invert whether or not to show primary links\n            \"showPrimaryLinks\": !prevState.showPrimaryLinks,\n        }));\n    }\n\n    /**\n     * Toggle whether or not to show the secondary links on the graph\n     */\n    toggleSecondaryLinks() {\n        this.setState((prevState) => ({\n            // invert whether or not to show secondary links\n            \"showSecondaryLinks\": !prevState.showSecondaryLinks,\n        }));\n    }\n\n    /**\n     * Toggle whether or not to show the link labels on the graph\n     */\n    toggleLinkLabels() {\n        this.setState((prevState) => ({\n            // invert whether or not to show labels\n            \"showLinkLabels\": !prevState.showLinkLabels,\n        }));\n    }\n\n    allFalse() {\n        for(let nodeType in this.state.highlighted)\n            if(this.state.highlighted[nodeType]) return false;\n\n        return true;\n    }\n\n    /**\n     * the click handler for type of node when type isn't highlighted\n     */\n    highlightGraphNode(nodeType){\n        this.setState((prevState)=>{\n            let NewState = prevState;\n            // updating the nodes array with new node properties\n            NewState.data.nodes = NewState.data.nodes.map(\n                (node)=>{\n                    if(NewState.highlighted[node.type]){\n                        node[\"size\"] = 200;\n                        node[\"color\"] = nodeColors[node.type];\n                    } else {\n                        node[\"color\"] = \"lightgrey\";\n                    }\n                    return node;\n                }\n                );\n            return NewState;\n        });\n    }\n\n    /**\n     * the click handler to unhighlight the nodes\n     * @param nodeType\n     */\n    unhighlightGraphNode(nodeType){\n        this.setState(\n            (prevState)=>{\n                let NewState = prevState;\n                // updating the nodes array with new node properties\n                NewState.data.nodes = NewState.data.nodes.map(\n                    (node)=>{\n                        if(this.allFalse.bind(this)()){\n                            node[\"color\"] = nodeColors[node.type];\n                            node[\"size\"] = 120;\n                        }\n                        else if (node.type === nodeType){\n                            node[\"size\"] = 120;\n                            node[\"color\"] = \"lightgrey\";\n                        }\n                        return node;\n                    }\n                );\n                return NewState;\n            }\n        );\n    }\n\n    /**\n     * toggle the highlighted state of the node type table\n     */\n    toggleNodeHighlight(nodeType){\n        this.setState((prevState)=>{\n            let NewState = prevState;\n            NewState.highlighted[nodeType] = !NewState.highlighted[nodeType];\n            NewState.active[nodeType] = !NewState.active[nodeType];\n            if(this.state.highlighted[nodeType]){\n                this.highlightGraphNode(nodeType);\n            } else {\n                this.unhighlightGraphNode(nodeType);\n            }\n            return NewState;\n        });\n    }\n\n    legendCircleColor(nodeType) {\n        if(this.allFalse.bind(this)() || this.state.highlighted[nodeType]){\n            return \"circle \" + nodeColors[nodeType];\n        } else {\n            return \"circle lightgrey\";\n        }\n    }\n\n    /**\n     * Creates and downloads 2 zipped csv files with node and edge data from nexus graph\n     */\n    createCSVFiles() {\n        let nodeData = [[\"Node_ID\", \"Node_Label\", \"Node_Type\"]];\n        let id = 0;\n        this.state.data.nodes.forEach((node) => {\n            nodeData.push([id, node.id, node.type]);\n            id += 1;\n        });\n        let csvNodeContent = nodeData.map(e => e.join(\",\")).join(\"\\n\");\n\n        let edgeData = [[\"Source_ID\", \"Target_ID\", \"Label\"]];\n        let sourceID = -1;\n        let targetID = -1;\n        this.state.data.links.forEach((link) => {\n            nodeData.forEach((row) => {\n                if (row[1] === link.source) {\n                    sourceID = row[0];\n                }\n                if (row[1] === link.target) {\n                    targetID = row[0];\n                }\n            });\n            edgeData.push([sourceID, targetID, link.label]);\n        });\n        let csvEdgeContent = edgeData.map(e => e.join(\",\")).join(\"\\n\");\n\n        let zip = new JSZip();\n        zip.file(\"folklore_graph_nodes.csv\", csvNodeContent);\n        zip.file(\"folklore_graph_edges.csv\", csvEdgeContent);\n        zip.generateAsync({type: \"blob\"}).then(function(content) {\n            FileSaver.saveAs(content, \"folklore_graph_data.zip\");\n        });\n    }\n\n    /**\n     * Creates the graph and associated button, located at the top right of the home view\n     * @returns {JSX} The resulting graph + button\n     */\n    render() {\n        // get the current data and whether or not to show primary + secondary links\n        let {data, showPrimaryLinks, showSecondaryLinks, showLinkLabels} = this.state;\n        // get a copy of data BUT DO NOT MODIFY IT\n        let finalData = {...data};\n        // if we shouldn't show primary links\n        if (showPrimaryLinks === false) {\n            // filter out links without a linkNode (i.e. primary links)\n            finalData.links = finalData.links.filter(link => link.linkNode !== null);\n        }\n        // if we shouldn't show secondary links\n        if (showSecondaryLinks === false) {\n            // filter out links with a linkNode (i.e. secondary links)\n            finalData.links = finalData.links.filter(link => link.linkNode === null);\n        }\n        // if we shouldn't show link labels\n        if (showLinkLabels === false) {\n            // remove labels from links\n            finalData.links = finalData.links.map((link) => {\n                link.label = \"\";\n                return link;\n            });\n        } else {\n            // show labels\n            finalData.links = finalData.links.map((link) => {\n                link.label = link.hiddenLabel;\n                return link;\n            });\n        }\n        return (\n            // div to contain both the button and graph\n            <div className=\"grid-x NexusGraph\">\n                {/* contains the filters */}\n                <form className=\"medium-3 cell grid-y\" id=\"analysisTools\">\n                    <h3 className=\"cell\" id=\"heading\">Display Options</h3>\n                    {/* toggle primary links filter */}\n                    <label className=\"cell tool\">\n                        <input\n                            // make it a checkbox\n                            type=\"checkbox\"\n                            // its state should be set by whether or not to show primary links\n                            checked={this.state.showPrimaryLinks}\n                            // when this is changed (i.e. pressed) call the togglePrimaryLinks function\n                            onChange={this.togglePrimaryLinks} />\n                        {/* give the text \"Primary\" a light blue color to indicate which links it matches to */}\n                        Show <span className=\"lightblue\">Primary</span> Links\n                    </label>\n                    <label className=\"cell tool\">\n                        <input\n                            // make it a checkbox\n                            type=\"checkbox\"\n                            // its state should be set by whether or not to show secondary links\n                            checked={this.state.showSecondaryLinks}\n                            // when this is changed (i.e. pressed) call the toggleSecondaryLinks function\n                            onChange={this.toggleSecondaryLinks} />\n                        {/* give the text \"Secondary\" a light green color to indicate which links it matches to */}\n                        Show <span className=\"lightgreen\">Secondary</span> Links\n                    </label>\n                    <label className=\"cell tool\">\n                        <input\n                            // make it a checkbox\n                            type=\"checkbox\"\n                            // its state should be set by whether or not to show link labels\n                            checked={this.state.showLinkLabels}\n                            // when this is changed (i.e. pressed) call the toggleLinkLabels function\n                            onChange={this.toggleLinkLabels} />\n                        Show Link Labels\n                    </label>\n\n                    <table className=\"legend hover unstriped cell\">\n                        <thead>\n                            <tr>\n                                <th>Color</th>\n                                <th>Type of Node</th>\n                            </tr>\n                        </thead>\n                        <tbody className=\"legend-table-body\">\n                            <tr className={this.state.active[\"People\"] ? \"highlighted-row\" : null} onClick={ (e) => {\n                                e.preventDefault();\n                                this.toggleNodeHighlight.bind(this)(\"People\")} }>\n                                <td><div className={this.legendCircleColor.bind(this)(\"People\")}> </div></td>\n                                <td>People</td>\n                            </tr>\n                            <tr className={this.state.active[\"Places\"] ? \"highlighted-row\" : null} onClick={ (e) => {\n                                e.preventDefault();\n                                this.toggleNodeHighlight.bind(this)(\"Places\")} }>\n                                <td><div className={this.legendCircleColor.bind(this)(\"Places\")}> </div></td>\n                                <td>Places</td>\n                            </tr>\n                            <tr className={this.state.active[\"Stories\"] ? \"highlighted-row\" : null} onClick={ (e) => {\n                                e.preventDefault();\n                                this.toggleNodeHighlight.bind(this)(\"Stories\")} }>\n                                <td><div className={this.legendCircleColor.bind(this)(\"Stories\")}> </div></td>\n                                <td>Stories</td>\n                            </tr>\n                            <tr className={this.state.active[\"Fieldtrips\"] ? \"highlighted-row\" : null} onClick={ (e) => {\n                                e.preventDefault();\n                                this.toggleNodeHighlight.bind(this)(\"Fieldtrips\")} }>\n                                <td><div className={this.legendCircleColor.bind(this)(\"Fieldtrips\")}> </div></td>\n                                <td>Fieldtrips</td>\n                            </tr>\n                        </tbody>\n                    </table>\n\n                    <div className=\"download-wrapper\">\n                        <button className=\"tool download button secondary\" onClick={(e) => {\n                            e.preventDefault();\n                            this.createCSVFiles.bind(this)()}}>\n                            Download graph\n                        </button>\n                    </div>\n\n                </form>\n                {/* the actual graph */}\n                <div>\n                    <NexusGraph\n                        // give it 3/4 of the screen width\n                        className=\"medium-9 cell\"\n                        // nodes + links for the graph to render\n                        data={finalData}\n                        // a totality of all the nodes, sorted by type\n                        nodes={this.state.nodeCategories}\n                        // function to open a node's page if clicked\n                        openNode={this.props.openNode}\n                        // custom settings for the graph\n                        settings={{\n                            // set the height to occupy most of the screen\n                            \"height\": (window.innerHeight) * 0.83,\n                            // set the width to be just under 3/4 the screen width (so it doesn't overflow into a new row)\n                            \"width\": window.innerWidth * 0.745,\n                        }}\n                    />\n                </div>\n            </div>\n        );\n    }\n}\n\nGraphView.propTypes = {\n    \"openNode\": PropTypes.func.isRequired,\n};\n\n// export default GraphView;\n\n/**\n * Set certain props to access Redux states\n * @param {Object} state All possible Redux states\n * @returns {Object} Certain states that are set on props\n */\nfunction mapStateToProps(state) {\n    return {\n        \"state\": state.tabViewer,\n    };\n}\n\n/**\n * Set the \"actions\" prop to access Redux actions\n * @param {*} dispatch Redux actions\n * @returns {Object} The actions that are mapped to props.actions\n */\nfunction mapDispatchToProps(dispatch) {\n    return {\n        \"actions\": bindActionCreators(tabViewerActions, dispatch),\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(GraphView);\n","import \"./FieldtripTool.css\";\nimport React from \"react\";\nimport MapView from \"../MapView/MapView\";\nimport {getFieldtripsByID, getPlacesByID} from \"../../data-stores/DisplayArtifactModel\";\n// import data for fieldtrips\nimport FieldtripsData from \"../../data/cfieldtrips.json\";\nimport {bindActionCreators} from \"redux\";\nimport * as tabViewerActions from \"../../actions/tabViewerActions\";\nimport connect from \"react-redux/es/connect/connect\";\n\nclass FieldtripTool extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            \"activeFieldtrips\": props.fieldtrip ? [props.fieldtrip] : [],\n            // update with any previous state stored in redux\n            ...props.state.views[props.viewIndex].state,\n        };\n    }\n\n    componentWillUnmount() {\n        // save state to redux for later\n        this.props.actions.updateTab(this.props.viewIndex, {\n            \"state\": this.state,\n        });\n    }\n\n    handleSelect(fieldtrip_id) {\n        if (fieldtrip_id === -1) {\n            this.setState({\n                \"activeFieldtrips\": FieldtripsData.fieldtrip\n                    .map((fieldtrip) => fieldtrip.fieldtrip_id)\n                    .filter((id) => id !== -1),\n            });\n        } else {\n            this.setState(({activeFieldtrips}) => {\n                const index = activeFieldtrips.indexOf(fieldtrip_id);\n                if (index === -1) {\n                    return {\n                        \"activeFieldtrips\": [...activeFieldtrips, fieldtrip_id],\n                    };\n                } else if (index >= 0) {\n                    activeFieldtrips.splice(index, 1);\n                    return {\n                        activeFieldtrips,\n                    };\n                } else {\n                    console.warn(\"FieldtripTool's activeFieldtrips is corrupt\", activeFieldtrips);\n                    return {\n                        activeFieldtrips,\n                    };\n                }\n            });\n        }\n    }\n\n    render() {\n        const {activeFieldtrips} = this.state;\n        console.log(activeFieldtrips);\n        // get places to show as a 1-D array\n        const PlacesVisited = [].concat(\n            // use the fieldtrips to show\n            ...activeFieldtrips.map((fieldtrip) =>\n                // and extract the places from those fieldtrips\n                getFieldtripsByID(fieldtrip).places_visited.map((place) => getPlacesByID(place.place_id)))\n        );\n        return (\n            <div className=\"FieldtripTool grid-x\">\n                <div className=\"cell medium-3\">\n                    <h3>Fieldtrip Viewer</h3>\n                    <ul>\n                        {FieldtripsData.fieldtrip.map(({fieldtrip_id, fieldtrip_name}) => (\n                            <li\n                                key={fieldtrip_id}\n                                className={`cell ${activeFieldtrips.includes(fieldtrip_id) ? \"activeTrip\" : \"\"}`}\n                                onClick={this.handleSelect.bind(this, fieldtrip_id)}>\n                                {fieldtrip_name}\n                            </li>\n                        ))}\n                    </ul>\n                </div>\n                <div className=\"cell medium-9\">\n                    <MapView places={PlacesVisited} />\n                </div>\n            </div >\n        );\n    }\n}\n\n/**\n * Set certain props to access Redux states\n * @param {Object} state All possible Redux states\n * @returns {Object} Certain states that are set on props\n */\nfunction mapStateToProps(state) {\n    return {\n        \"state\": state.tabViewer,\n    };\n}\n\n/**\n * Set the \"actions\" prop to access Redux actions\n * @param {*} dispatch Redux actions\n * @returns {Object} The actions that are mapped to props.actions\n */\nfunction mapDispatchToProps(dispatch) {\n    return {\n        \"actions\": bindActionCreators(tabViewerActions, dispatch),\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(FieldtripTool);\n","// react functionality\nimport React, {Component} from \"react\";\n// the various possible views we could render\nimport HelpView from \"../HelpView/HelpView\";\nimport Navigation from \"../Navigation/Navigation\";\nimport StoryView from \"../StoryView/StoryView\";\nimport PlaceView from \"../PlaceView/PlaceView\";\nimport PeopleView from \"../PeopleView/PeopleView\";\nimport FieldtripView from \"../FieldtripView/FieldtripView\";\nimport BookView from \"../BookView/BookView\";\nimport GraphView from \"../NexusGraph/GraphView\";\nimport FieldtripTool from \"../FieldtripTool/FieldtripTool\";\n// functions to get info about PPFS\nimport * as model from \"../../data-stores/DisplayArtifactModel\";\n// CSS styling\nimport \"./TabViewer.css\";\n// prop validation\nimport PropTypes from \"prop-types\";\nimport {connect} from \"react-redux\";\nimport {bindActionCreators} from \"redux\";\n// actions to manipulate the tabs\nimport * as tabViewerActions from \"../../actions/tabViewerActions\";\n\nclass TabViewer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            // starting off without a drag\n            \"dragIndicatorX\": null,\n        };\n        // to be set once a render is complete\n        this.dragIndicatorY = null;\n        this.dragIndicatorHeight = null;\n        // used for drag events\n        this.desiredIndex = null;\n        this.originalIndex = null;\n        // stores the left edge X-coordiantes of each tab\n        this.tabs = [];\n        // properly bind functions so that they can work in sub-elements\n        this.renderActiveTab = this.renderActiveTab.bind(this);\n    }\n\n    /**\n     * Render the main content of the app\n     * @param {*} id ID of the relevant person/place/story/fieldtrip/book to load (irrelevant for NexusGraph, Home)\n     * @param {String} type The type of view to load (People/Places/Fieldtrips/Stories/Home/Graph/Book)\n     * @param {Number} tabIndex Index of the tab being rendered (only necessary for BookView)\n     * @returns {JSX} The content of the relevant view\n     */\n    renderPPFS(id, type, tabIndex) {\n        // depending on the type of the view to render\n        // key is necessary so a re-render is forced whenever tabs are switched (resets state/switches book page properly)\n        switch (type) {\n            case \"People\":\n                // for people, return a PeopleView with the person retrieved by the passed ID\n                return <PeopleView key={tabIndex} person={model.getPeopleByID(id)} />;\n            case \"Places\":\n                // for places, return a PlaceView with the place retrieved by the passed ID\n                return <PlaceView key={tabIndex} place={model.getPlacesByID(id)} />;\n            case \"Fieldtrips\":\n                // for fieldtrip, return a FieldtripView with the fieldtrip retrieved by the passed ID\n                return <FieldtripView key={tabIndex} fieldtrip={model.getFieldtripsByID(id)} />;\n            case \"Stories\":\n                // for stories, return a StoryView with the story retrieved by the passed ID\n                return <StoryView key={tabIndex} story={model.getStoryByID(id)} viewIndex={tabIndex}/>;\n            case \"Home\":\n                // for the Home tab, return the main Navigation view (home)\n                return <Navigation key={tabIndex} />;\n            case \"Graph\":\n                // for the graph, return the GraphView\n                return <GraphView key={tabIndex} viewIndex={tabIndex} />;\n            case \"Book\":\n                // for the book, return the BookView, with the chapter ID that was selected\n                return <BookView key={tabIndex} viewIndex={tabIndex} id={id} />;\n            case \"Help\":\n                return <HelpView key={tabIndex} viewIndex={tabIndex} />\n            case \"FieldtripTool\":\n                return <FieldtripTool key={tabIndex} fieldtrip={id} viewIndex={tabIndex} />;\n            default:\n                // if it wasn't one of the above types, warn that we hit an unknown type\n                console.warn(`Unhandled tab type: ${type}`);\n        }\n    }\n\n    /**\n     * Render the active tab as the main content of the page\n     * @returns {JSX} The rendered JSX\n     */\n    renderActiveTab() {\n        // search through the list of tabs for the active tab\n        const activeViewIndex = this.props.state.views.findIndex((view) => view.active);\n        const activeView = this.props.state.views[activeViewIndex];\n        // return the rendered content of the tab\n        return this.renderPPFS(activeView.id, activeView.type, activeViewIndex);\n    }\n\n    // called when a tab begins being dragged\n    handleDragStart(event, index) {\n        // set the tab to be gray\n        event.target.style.backgroundColor = \"#aaaaaa\";\n        // set appropriate data for the drag\n        this.originalIndex = index;\n        // so that Firefox actually lets us drag stuff\n        event.dataTransfer.setData(\"text/plain\", this.props.state.views[index].name);\n        event.dataTransfer.effectAllowed = \"move\";\n        event.dataTransfer.dropEffect = \"move\";\n    }\n\n    // called when a drag goes over a new tab\n    handleDragEnter(event, newIndex) {\n        // update where the tab would be placed if released\n        this.desiredIndex = newIndex;\n        this.setState({\n            // if drag is to the right, draw the drag indicator on the right of the tab where it would be dropped\n            // if it was to the left, draw the indicator on the left of the tab where it would be dropped\n            // if we are at the same index don't draw anything\n            \"dragIndicatorX\": newIndex > this.originalIndex ? this.tabs[newIndex].right\n                : newIndex < this.originalIndex ? this.tabs[newIndex].left : null,\n        });\n    }\n\n    // called when a tab stops being dragged (is released)\n    handleDragEnd(event) {\n        // move the dragged tab to the desired spot\n        this.props.tabViewerActions.moveTab(this.originalIndex, this.desiredIndex);\n        // reset indices of drag\n        this.originalIndex = null;\n        this.desiredIndex = null;\n        // reset the tab's color\n        event.target.style.backgroundColor = null;\n        // hide the drag indicator\n        this.setState({\n            \"dragIndicatorX\": null,\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"TabViewer grid-container full\">\n                <div className=\"grid-y\">\n                    {/* Wrapper/container for the View, not including the tabs*/}\n                    <div className=\"view cell fill\"> {/* Class \"fill\" fills out the rest of the application space with the view*/}\n                        {/* Function below generates/sorts out which view should be displayed*/}\n                        {this.renderActiveTab()}\n                    </div>\n                    {/* List of tabs that are displayed at the bottom of the browser/app*/}\n                    <ul className=\"tabs cell medium-1\"> {/* medium-1 sets the height of the tabs*/}\n                        {/* for each tab to display */}\n                        {this.props.state.views.map((view, index) => (\n                            // return a tab JSX element\n                            <li\n                                // based on the actual DOM element that results\n                                ref={(instance) => {\n                                    // assuming we got a proper render\n                                    if (instance !== null) {\n                                        // set the width of the tabs in tabPos\n                                        this.tabs[index] = instance.getBoundingClientRect();\n                                        // set the Y coordinate of the drop indicator\n                                        this.dragIndicatorY = instance.getBoundingClientRect().y;\n                                        // set the height of the drop indicator\n                                        this.dragIndicatorHeight = instance.getBoundingClientRect().height;\n                                    }\n                                }}\n                                // callback when the tab is clicked\n                                onClick={() => {\n                                    // if a tab is clicked, we should switch to that tab\n                                    this.props.tabViewerActions.switchTabs(index);\n                                }}\n                                // make everything but the home tab draggable\n                                draggable={view.type !== \"Home\"}\n                                // called when the tab begins being dragged, changes color of the dragged tab\n                                onDragStart={(event) => {\n                                    this.handleDragStart(event, index);\n                                }}\n                                // called when the drag goes over a new tab\n                                onDragEnter={(event) => {\n                                    // change the drag indicator appropriately\n                                    this.handleDragEnter(event, index);\n                                }}\n                                // called when the tab stops being dragged, move that tab to its new spot\n                                onDragEnd={this.handleDragEnd.bind(this)}\n                                // key to control re-rendering of tabs\n                                key={index}\n                                // make it active if this is the current tab\n                                className={view.active ? \"active\" : \"\"}\n                                style={{\n                                    // set the color of the tab to be the specified color, or default to the active/inactive color if not specified\n                                    \"backgroundColor\": view.color,\n                                }}>\n                                {/*Display pin on everything except home tab */}\n                                {view.type !== \"Home\" &&\n                                    <img\n                                        // source of the image (URL)\n                                        src={view.pinned ? \"https://img.icons8.com/ios/50/000000/pin-2-filled.png\" : \"https://img.icons8.com/ios/50/000000/pin-2.png\"}\n                                        // text to display if it can't show up\n                                        alt=\"to pin icon\"\n                                        // give it the styling for the pin button\n                                        className=\"pinTabIcon\"\n                                        // callback when the \"x\" is clicked\n                                        onClick={(event) => {\n                                            // prevent a separate \"tab was clicked\" event from occuring once this tab gets closed\n                                            event.stopPropagation();\n                                            // close the desired tab\n                                            this.props.tabViewerActions.pinTab(index);\n                                        }} />}\n                                {/* show the display text on the tab */}\n                                {view.name}\n                                {/* don't show a close button on the home tab */}\n                                {view.type !== \"Home\" &&\n                                    <img\n                                        // source of the image (URL)\n                                        src=\"https://png.icons8.com/material/50/000000/delete-sign.png\"\n                                        // text to display if it can't show up\n                                        alt=\"Close Icon\"\n                                        // give it the styling for the close button\n                                        className=\"closeTabIcon\"\n                                        // callback when the \"x\" is clicked\n                                        onClick={(event) => {\n                                            // prevent a separate \"tab was clicked\" event from occuring once this tab gets closed\n                                            event.stopPropagation();\n                                            // close the desired tab\n                                            this.props.tabViewerActions.closeTab(index);\n                                        }} />}\n                            </li>\n                        ))}\n                    </ul>\n                </div>\n                {/* only display if we are currently dragging an element */}\n                {this.state.dragIndicatorX !== null &&\n                    // the drag indicator line\n                    <div\n                        // basic CSS for the moving line, position is defined dynamically here\n                        id=\"dragIndicator\"\n                        // set up its position\n                        style={{\n                            // position it at the X-coordinate determined by drag functions\n                            \"left\": this.state.dragIndicatorX,\n                            // make it in line with tabs\n                            \"top\": this.dragIndicatorY,\n                            // make it as tall as the tabs\n                            \"height\": this.dragIndicatorHeight,\n                        }} />\n                }\n            </div>\n        );\n    }\n}\n\nTabViewer.propTypes = {\n    \"tabViewerActions\": PropTypes.object.isRequired,\n    \"state\": PropTypes.shape({\n        \"views\": PropTypes.array.isRequired,\n    }).isRequired,\n};\n\n/**\n * Set certain props to access Redux states\n * @param {Object} state All possible Redux states\n * @returns {Object} Certain states that are set on props\n */\nfunction mapStateToProps(state) {\n    return {\n        \"state\": state.tabViewer,\n    };\n}\n\n/**\n * Set the \"tabViewerActions\" prop to access Redux actions\n * @param {*} dispatch Redux actions\n * @returns {Object} The actions that are mapped to props.actions\n */\nfunction mapDispatchToProps(dispatch) {\n    return {\n        \"tabViewerActions\": bindActionCreators(tabViewerActions, dispatch),\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(TabViewer);\n","// react functionality\nimport React, {Component} from \"react\";\n// CSS styling\nimport \"./Heading.css\";\n// prop validation\nimport PropTypes from \"prop-types\";\nimport {bindActionCreators} from \"redux\";\n// tab management\nimport * as tabViewerActions from \"../../actions/tabViewerActions\";\nimport connect from \"react-redux/es/connect/connect\";\n// data for the dropdown\nimport menuList from \"../../data/book_menu.json\";\n\nclass Heading extends Component {\n    constructor() {\n        super();\n        // set the initial state\n        this.state = {\n            // the story menu is by default not selected\n            \"menuActive\": false,\n        };\n        // bind the menu toggle so that sub-elements can properly toggle the menu\n        this.menuToggle = this.menuToggle.bind(this);\n    }\n\n    /**\n     * Toggle the book chapter selection dropdown between open and closed\n     */\n    menuToggle() {\n        this.setState((prevState) => {\n            // set the state of the dropdown to be the opposite of what it was\n            return {\n                \"menuActive\": !prevState.menuActive,\n            };\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"Heading grid-x grid-padding-x\">\n                {/* Flag + title on the left of the header */}\n                <div className=\"large-4 medium-4 cell heading-stuff\">\n                    <div className=\"grid-x grid-margin-x\">\n                        {/* Flag that links back to the home page */}\n                        <a className=\"flag medium-3 medium-offset-1 cell\">\n                            <img\n                                // load image from the correct file\n                                src={require(\"./assets/DENM0001.png\")}\n                                // text if the file can't load\n                                alt=\"Danish Flag\"\n                                // callback for when the function is clicked\n                                onClick={() => {\n                                    // go to the home tab\n                                    this.props.tabViewerActions.switchTabs(0);\n                                }} />\n                        </a>\n                        {/* Text to the right of the flag */}\n                        <h5 className=\"danish-folklore medium-2 cell\">Danish Folklore</h5>\n                        <h6 className=\"etk medium-6 cell\">The Evald Tang <br /> Kristensen Collection</h6>\n                    </div>\n                </div>\n                {/* help button */}\n                <button className=\"medium-offset-6 medium-1 cell help-btn\"\n                    // when clicked, open up the help tab\n                    onClick={() => {\n                        this.props.tabViewerActions.addTab(0, \"Help\", \"Help\");\n                    }}>\n                    {/* creates the ? in a circle */}\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 224 224\" width=\"25\" height=\"25\" style={{\"fill\": \"#000000\"}}><g fill=\"none\" fillRule=\"nonzero\" stroke=\"none\" strokeWidth=\"1\" strokeLinecap=\"butt\" strokeLinejoin=\"miter\" strokeMiterlimit=\"10\" strokeDasharray=\"\" strokeDashoffset=\"0\" fontFamily=\"none\" fontWeight=\"none\" fontSize=\"none\" textAnchor=\"none\" style={{\"mixBlendMode\": \"normal\"}}><path d=\"M0,224v-224h224v224z\" fill=\"none\"></path><g fill=\"#ffffff\"><path d=\"M112,8.96c-56.85436,0 -103.04,46.18564 -103.04,103.04c0,56.85436 46.18564,103.04 103.04,103.04c56.85436,0 103.04,-46.18564 103.04,-103.04c0,-56.85436 -46.18564,-103.04 -103.04,-103.04zM112,17.92c52.01201,0 94.08,42.06799 94.08,94.08c0,52.01201 -42.06799,94.08 -94.08,94.08c-52.01201,0 -94.08,-42.06799 -94.08,-94.08c0,-52.01201 42.06799,-94.08 94.08,-94.08zM113.295,56.035c-16.7104,0 -27.79028,10.12536 -30.205,25.55c-0.1568,0.96768 0.31857,1.60622 1.28625,1.7675l10.12375,1.77625c0.96768,0.16128 1.60622,-0.32305 1.7675,-1.28625c1.9264,-9.80224 7.70791,-15.26875 16.70375,-15.26875c9.1616,0 15.58375,5.78788 15.58375,14.945c0,5.4656 -1.92458,9.15992 -7.5425,16.87l-10.77125,14.77875c-3.37344,4.66368 -4.8125,8.03922 -4.8125,14.4725v6.58c0,0.9632 0.63805,1.61042 1.60125,1.5925h10.605c0.9632,0 1.60125,-0.63805 1.60125,-1.60125v-5.13625c0,-5.46112 0.97034,-7.71211 4.1825,-12.04875l10.7625,-14.7875c5.4656,-7.55328 8.19,-13.17169 8.19,-20.88625c0,-15.90848 -11.72969,-27.3175 -29.07625,-27.3175zM106.23375,150.045c-0.96768,0 -1.61,0.6468 -1.61,1.61v13.81625c0,0.9632 0.63784,1.60125 1.61,1.60125h12.215c0.95872,0 1.60125,-0.63357 1.60125,-1.60125v-13.81625c0,-0.95872 -0.63805,-1.61 -1.60125,-1.61z\"></path></g></g></svg>\n                </button>\n                {/* Book icon to open the chapter selection dropdown */}\n                <div\n                    // CSS classes\n                    className=\"Hamburger-Menu medium-1 cell\"\n                    // toggle the menu when this is clicked\n                    onClick={this.menuToggle}>\n                    <img\n                        // from where to load the image\n                        src=\"https://png.icons8.com/wired/64/ffffff/book.png\"\n                        style={{\"height\": \"2.9em\", \"paddingTop\": \"7px\", \"paddingLeft\": \"10px\"}}\n                        alt=\"book\" />\n                </div>\n                {/* dropdown menu that links to the various chapters */}\n                {this.state.menuActive &&\n                    <div className=\"Menu\" onClick={this.menuToggle}>\n                        <div className=\"solid\">\n                            {/* little open book at the top right */}\n                            <div className=\"Hamburger-Menu\" onClick={this.menuToggle}>\n                                <img src=\"https://png.icons8.com/wired/50/ffffff/literature.png\" style={{\"height\": \"2.9em\", \"paddingTop\": \"5px\"}} alt=\"open book\" onClick={this.menuToggle} />\n                            </div>\n                            {/* list of all the chapters */}\n                            <ul className=\"list\">\n                                {/* for each of the chapter links */}\n                                {menuList.map((menuItem, i) => (\n                                    // return a single element of the list\n                                    <li\n                                        // unique key for react re-rendering\n                                        key={i}\n                                        // style it as a dropdown element\n                                        className=\"menu-item\"\n                                        // callback when this option is clicked\n                                        onClick={(event) => {\n                                            // prevent default click behavior\n                                            event.preventDefault();\n                                            // add a tab to the desired chapter\n                                            this.props.tabViewerActions.addTab(menuItem.id - 3, menuItem.name, \"Book\");\n                                        }}\n                                    >{menuItem.name}</li>\n                                ))}\n                            </ul>\n                        </div>\n                    </div>\n                }\n            </div>\n\n        );\n    }\n}\n\nHeading.propTypes = {\n    // must have tabViewerActions to open up a new book tab\n    \"tabViewerActions\": PropTypes.object.isRequired,\n};\n\nfunction mapStateToProps(state) {\n    return {\n        \"state\": state.tabViewer,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        \"tabViewerActions\": bindActionCreators(tabViewerActions, dispatch),\n    };\n}\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Heading);\n","import React, {Component} from \"react\";\nimport TabViewer from \"./components/TabViewer/TabViewer\";\nimport Heading from \"./components/Heading/Heading.js\";\n\nclass Home extends Component {\n    constructor() {\n        super();\n        // start in a state of loading\n        this.state = {\n            \"loading\": true,\n        };\n    }\n\n    componentDidMount() {\n        // simulate async action and remove loader\n        setTimeout(() => this.setState({\"loading\": false}), 1500);\n    }\n\n    render() {\n        return (\n            <div className=\"Home grid-y medium-grid-frame full\">\n                {/* without nested div, the Book View gets mega-compressed */}\n                <div>\n                    {/* Top banner with flag + title on left, book icon on right */}\n                    <Heading />\n                    {/* Everything else on the page */}\n                    <TabViewer />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Home;","import React, {Component} from \"react\";\nimport {BrowserRouter} from \"react-router-dom\";\nimport \"./App.css\";\nimport Home from \"./Home\";\n\nclass App extends Component {\n    constructor() {\n        super();\n        // start in a state of loading\n        this.state = {\n            \"loading\": true,\n        };\n    }\n\n    componentDidMount() {\n        // simulate async action and remove loader\n        setTimeout(() => this.setState({\"loading\": false}), 1500);\n    }\n\n    render() {\n        return (\n            <div className=\"App\" >\n                <BrowserRouter basename={'/folklorenexus/'}>\n                    <Home/>\n                </BrowserRouter>\n            </div>\n        );\n    }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","// function to get tab state from storage\nimport {getSessionStorage} from \"../data-stores/SessionStorageModel\";\n\n// export the initialized state\nexport default {\n    \"tabState\": InitializeTabs(),\n    \"search\": InitializeSearch(),\n    \"navigator\": InitializeNavigator(),\n};\n\n/**\n * Initialize the tabs, whether from a clean state or session storage\n * @returns {Object} The state of the tabs\n */\nfunction InitializeTabs() {\n    // get tab state from storage\n    const CachedState = getSessionStorage(\"TabViewerSessionState\");\n    // if we have previously loaded tabs\n    if (CachedState) {\n        // start up with those previous tabs\n        return {\n            \"views\": CachedState.views,\n        };\n    } else {\n        // otherwise, just start out with a single home tab\n        return {\n            \"views\": [{\n                \"active\": true,\n                \"id\": 0,\n                \"name\": \"Home\",\n                \"type\": \"Home\",\n                \"color\": null,\n            }],\n        };\n    }\n}\n\n/**\n * Initialize the search state\n * @returns {Object} The initial search state\n */\nfunction InitializeSearch() {\n    return {\n        // initial input value based on the props (as if search is already complete)\n        \"inputValue\": \"\",\n        // no search yet, can't be a keyword search\n        \"keywordSearch\": false,\n        // we aren't searching on first load\n        \"searchingState\": false,\n        // results to display as suggestions or displayList in Navigator\n        \"results\": [],\n        // ontology that's being displayed\n        \"ontology\": \"\",\n    };\n}\n\n/**\n * Initialize the navigator state\n * @returns {Object} The initial navigator state\n */\nfunction InitializeNavigator() {\n    return {\n        // should be set up once everything is finished rendering\n        \"displayList\": [],\n        // array of display artifact objects (JSON)\n        \"itemsList\": [],\n        \"placeList\": [],\n        // default start date\n        \"fromDate\": 1887,\n        // default end date\n        \"toDate\": 1899,\n        // start with the filter off\n        \"timeFilterOn\": false,\n    };\n}\n","// types of actions we can perform\nimport * as actions from \"../actions/actionTypes\";\n// data helpers\nimport {\n    DisplayArtifactToOntology,\n    dateFilterHelper,\n    ontologyToID, getPlacesByID,\n} from \"../data-stores/DisplayArtifactModel\";\n// starter state if there is no previous data\nimport initialState from \"./initialState\";\n\n/**\n * Generic handler for navigator\n * @param {Object} state The pre-update state\n * @param {Object} action Action to do to the tabs\n * @returns {Object} The updated state\n */\nexport default function navigator(state = initialState.navigator, {payload, type}) {\n    // depending on which action to perform\n    switch (type) {\n        // if we are to add a tab\n        case actions.UPDATE_ITEMS:\n            return updateItems(state);\n        // if we are to add a tab\n        case actions.DISPLAY_ITEMS:\n            return displayItems(state, payload);\n        // if we are to add a tab\n        case actions.TIME_FILTER_HANDLER:\n            return timeFilterHandler(state, payload);\n        // unhandled action type\n        default:\n            // warn that we hit a bad action\n            console.warn(`Invalid action: ${type}`);\n            // don't change anything\n            return state;\n    }\n}\n\n/**\n * Update the items displayed in Navigator\n * @param {Object} prevState Pre-update state\n * @returns {Object} State with an updated displayList\n */\nfunction updateItems(prevState) {\n    // get the currently displayed ontology, and potential items to display\n    const {fromDate, itemsList, timeFilterOn, toDate} = prevState;\n    if (itemsList.length > 0) {\n        const displayOntology = DisplayArtifactToOntology(itemsList[0]);\n        // if we have a restricted time range to look at\n        if (timeFilterOn === true) {\n            // key to get the ID of the items to display\n            const idKey = ontologyToID[displayOntology],\n                // get display artifacts that fit the time filter\n                idsInRange = dateFilterHelper(fromDate, toDate, displayOntology)\n                    // convert them to IDs; this is to speed filtering later on\n                    .map((item) => item[idKey]);\n            return {\n                ...prevState,\n                // update the displayed items\n                \"displayList\": itemsList.filter(\n                    // only show items that are in the time range\n                    (item) => idsInRange.includes(item[idKey])\n                ),\n            };\n        } else if (timeFilterOn === false) {\n            // no filter, show all the possible items\n            return {\n                ...prevState,\n                \"displayList\": itemsList,\n            };\n        } else {\n            // time filter isn't boolean, what?\n            console.warn(`Invalid time filter state: ${timeFilterOn}`);\n            return prevState;\n        }\n    } else {\n        return {\n            ...prevState,\n            \"displayList\": [],\n        };\n    }\n}\n\n/**\n * Set new display items\n * @param {Object} prevState Previous state to change\n * @param {Object} list Items to display\n * @returns {Object} The state with new items\n */\nfunction displayItems(prevState, list) {\n    // set placeList - if people, then pull places associated with people, etc.\n    let PlaceList = [\"hi\"],\n        InitialItem = list[0];\n    if (typeof InitialItem !== \"undefined\") {\n        // if item is a person\n        if (\"residence_place\" in InitialItem) {\n            PlaceList = list.filter((person) => person.residence_place !== null)\n                .map((person) => ({\n                    ...person.residence_place,\n                    \"full_name\": person.full_name,\n                }));\n        } else if (\"latitude\" in InitialItem) {\n            PlaceList = list;\n        } else {\n            PlaceList = list.filter((story) => typeof story.place_recorded !== \"undefined\")\n                .map((story) => ({\n                    ...getPlacesByID(story.place_recorded.id),\n                    \"full_name\": story.full_name,\n                }));\n        }\n    }\n    // set up the items based on\n    const newState = {\n        ...prevState,\n        \"displayList\": list,\n        \"itemsList\": list,\n        \"placeList\": PlaceList,\n    };\n    if (newState.timeFilterOn === true) {\n        // if the time filter is on, we need\n        return updateItems(newState);\n    }\n    return newState;\n}\n\n/**\n * Handler for when a timeline filter is changed\n * @param {Object} prevState Pre-event state\n * @param {Object} target Describes the action that occured\n * @returns {Object} The new, post-event state\n */\nfunction timeFilterHandler(prevState, {checked, name, value}) {\n    console.log('time filter on!');\n    switch (name) {\n        case \"fromYear\": {\n            const newState = {\n                ...prevState,\n                \"fromDate\": value,\n            };\n            // check if the dates are valid dates (4 digits, between 1887 and 1899)\n            if (newState.fromDate >= 1887) {\n                return updateItems(newState);\n            } else {\n                return newState;\n            }\n        }\n        case \"toYear\": {\n            const newState = {\n                ...prevState,\n                \"toDate\": value,\n            };\n            // check if the dates are valid dates (4 digits, between 1887 and 1899)\n            if (newState.toDate <= 1899) {\n                return updateItems(newState);\n            } else {\n                return newState;\n            }\n        }\n        case \"timelineFilter\":\n            return updateItems({\n                ...prevState,\n                \"timeFilterOn\": checked,\n            });\n        default:\n            console.warn(`Invalid filter: ${name}`);\n            return prevState;\n    }\n}\n","// types of actions we can perform\nimport * as actions from \"../actions/actionTypes\";\n// fuzzy searcher\nimport Fuse from \"fuse.js\";\n// array-ifier\nimport {arrayTransformation} from \"../utils\";\n// function to get keywords\nimport {getKeywords} from \"../data-stores/DisplayArtifactModel\";\n// starter state if there is no previous data\nimport initialState from \"./initialState\";\n\nconst keywords = getKeywords();\n\n/**\n * Generic handler for searching keywords or display artifacts\n * @param {Object} state The pre-update state\n * @param {Object} action to do to the tabs (FUZZY_SEARCH, SEARCH_KEYWORD, SEARCH_DISPLAYARTIFACT)\n * @returns {Object} The updated state\n */\nexport default function search(state = initialState.search, action) {\n    // depending on which action to perform\n    switch (action.type) {\n        case actions.FUZZY_SEARCH:\n            return handleFuzzySearch(state, action.payload);\n        case actions.SEARCH_KEYWORD:\n            return searchKeyword(state, action.payload);\n        case actions.SEARCH_ARTIFACT: {\n            // get the state by performing the search\n            const newState = searchArtifact(state, action.payload);\n            // dispatch the action to update navigator's items with these results\n            action.asyncDispatch({\n                \"type\": actions.DISPLAY_ITEMS,\n                \"payload\": newState.results,\n            });\n            // return the post-search state\n            return newState;\n        }\n        case actions.SET_SEARCH_STATE:\n            return setSearchState(state, action.payload);\n        default:\n            // warn that we hit a bad action\n            console.warn(`Invalid action: ${action.type}`);\n            // don't change anything\n            return state;\n    }\n}\n\n/**\n * Set the state of searching\n * @param {Object} ShallowPrevState The pre-update search state\n * @param {Boolean} newState Whether or not to be in a state of searching\n * @returns {Object} The updated search state\n */\nfunction setSearchState(ShallowPrevState, newState) {\n    return {\n        ...ShallowPrevState,\n        \"searchingState\": newState,\n    };\n}\n\n/**\n *\n * @param {*} ShallowPrevState\n * @param {*} param1\n */\nfunction handleFuzzySearch(ShallowPrevState, {SearchInput, DisplayList}) {\n    let NewState = {...ShallowPrevState};\n    console.log(\"hi from fuzzy search. display list\", DisplayList);\n    // define SearchableData = Is there anything in DisplayList? If yes, search within DisplayList, If no, search within Keywords\n    let SearchableData = DisplayList.length > 0 ? DisplayList : keywords;\n    // initialize new fuse object (fuzzy search dependency)\n    const fuse = new Fuse(SearchableData, {\n        \"shouldSort\": true,\n        \"threshold\": .2,\n        \"location\": 0,\n        \"distance\": 10000,\n        \"maxPatternLength\": 64,\n        \"minMatchCharLength\": 1,\n        \"keys\": [\n            \"search_string\",\n            \"keyword_name\",\n            \"name\",\n            \"full_name\",\n        ],\n    });\n    let SearchResults;\n    // if SearchInput has something call fuzzy search\n    if (SearchInput.length > 0) {\n        SearchResults = fuse.search(SearchInput);\n    } else {\n        // if SearchInput is empty (aka, user just clicked on search but hasn't entered anything), fill with 100 suggestions\n        SearchResults = SearchableData.slice(0, 100);\n    }\n    // console.log(SearchResults, 'search results');\n\n    NewState = {\n        ...NewState,\n        \"inputValue\": SearchInput,\n        \"results\": SearchResults,\n        \"searchingState\": true,\n    };\n\n    return NewState;\n}\n\n// TODO: implement searchDisplayArtifact function by copying search component's handleSearch\n/**\n * Search for an artifact, and update the search state accordingly\n * @param {Object} ShallowPrevState Pre-search state\n * @param {*} DisplayArtifact Artifact to search for, or a keyword string\n * @returns {Object} Post-search state\n */\nfunction searchArtifact(ShallowPrevState, DisplayArtifact) {\n    let artifact = DisplayArtifact,\n        // what to display as the search\n        InputValue = \"\",\n        // create an immutable copy of the previous state\n        NewState = {...ShallowPrevState},\n        // list of results of search\n        SearchList = [];\n    // check if the artifact is just a keyword string\n    if (typeof DisplayArtifact === \"string\") {\n        // if it is, we need to get the keyword object from keywords\n        const match = keywords.find((keyword) => keyword.keyword_name === artifact);\n        // if we found a mtach\n        if (typeof match !== \"undefined\") {\n            // set artifact to that match\n            artifact = match;\n        } else {\n            // if there is no a keyword match, just pull the first thing from results\n            SearchList = NewState.results;\n            InputValue = artifact;\n            // set first suggested item\n            artifact = SearchList[0];\n        }\n    } else {\n        SearchList = [artifact];\n    }\n    // check if DisplayArtifact is a story, keyword, place, or person\n    if (typeof artifact !== \"undefined\") {\n        // for keywords\n        if (\"keyword_id\" in artifact) {\n            // results are all associated stories\n            SearchList = arrayTransformation(artifact.stories.story);\n            // input value is the keyword's name\n            InputValue = artifact.keyword_name;\n        } else if (\"story_id\" in artifact) {\n            // for stories, input value is its search string\n            InputValue = artifact.search_string;\n        } else if (\"person_id\" in artifact) {\n            // for people, input value is their whole name\n            InputValue = artifact.full_name;\n        } else if (\"place_id\" in artifact) {\n            // for places, input value is their name\n            InputValue = artifact.name;\n        }\n        NewState = {\n            \"searchingState\": false, // stops searching\n            \"inputValue\": InputValue, // updates search field with search result\n            \"results\": SearchList, // sets up list of results to display in navigator,\n            \"keywordSearch\": false,\n        };\n    } else {\n        console.warn(\"DisplayArtifact is undefined\");\n    }\n    return NewState;\n}\n\n// TODO: implement searchKeyword function...maybe if the searchDisplayArtifact function works out, I won't need to do this :D\nfunction searchKeyword(ShallowPrevState, Keyword) {\n    let NewState = {...ShallowPrevState};\n}\n","// starter state if there is no previous data\nimport initialState from \"./initialState\";\n// types of actions we can perform\nimport * as actions from \"../actions/actionTypes\";\n// function to set session storage data\nimport {setSessionStorage} from \"../data-stores/SessionStorageModel\";\n\n/**\n * Generic handler for manipulating the tabs and updating their state\n * @param {Object} state The pre-update state\n * @param {Object} action Action to do to the tabs (ADD_TAB, SWITCH_TABS, CLOSE_TAB)\n * @returns {Object} The updated state\n */\nexport default function tabViewer(state = initialState.tabState, action) {\n    // depending on which action to perform\n    switch (action.type) {\n        // if we are to add a tab\n        case actions.ADD_TAB:\n            // console.log(\"ADD_TAB ACTION\", state);\n            return addTab(state, action.payload);\n        // if we are to switch between tabs\n        case actions.SWITCH_TABS:\n            // console.log(\"SWITCH_TABS ACTION\", state);\n            return switchTab(state, action.payload);\n        // if we are to close a tab\n        case actions.CLOSE_TAB:\n            // console.log(\"CLOSE_TAB ACTION\", state);\n            return closeTab(state, action.payload);\n        // if we are to move around a tab\n        case actions.MOVE_TAB:\n            // console.log(\"MOVE_TAB ACTION\", state);\n            return moveTab(state, action.payload);\n        // if we are to change a tab's color\n        case actions.UPDATE_TAB:\n            // console.log(\"UPDATE_TAB ACTION\", state);\n            return updateTab(state, action.payload);\n        case actions.PIN_TAB:\n            // console.log(\"PIN_TAB ACTION\", state);\n            return pinTab(state, action.payload);\n        // unhandled action type\n        default:\n            // warn that we hit a bad action\n            console.warn(`Invalid action: ${action.type}`);\n            // don't change anything\n            return state;\n    }\n}\n\n/**\n * Switch to a new active tab\n * @param {Object} OldState The pre-switch state\n * @param {Number} SwitchToIndex The tab index to switch to\n * @returns {Object} The state with the new active tab\n */\nfunction switchTab(OldState, SwitchToIndex) {\n    // create an immutable separate copy of the old state\n    let NewState = {...OldState};\n    // assuming that the index is a valid tab\n    if (SwitchToIndex < NewState.views.length) {\n        // update the views with the new active tab\n        NewState.views = NewState.views.map((currentView, currentIndex) => {\n            return {\n                // keep each view mostly the same\n                ...currentView,\n                // but set it to active if it is the index to switch to (inactive otherwise)\n                \"active\": currentIndex === SwitchToIndex,\n            };\n        });\n        // update session storage with the new active tab\n        setSessionStorage(\"TabViewerSessionState\", NewState);\n    } else {\n        // invalid index, raise a warning\n        console.warn(`Invalid switch index ${SwitchToIndex}`);\n    }\n    // return the state with the new active tab, or the same state if the index was invalid\n    return NewState;\n}\n\n/**\n * Remove a tab from the views by index\n * @param {Object} ShallowNewState The current, pre-removal state\n * @param {Number} RemoveIndex The index of the view to remove\n * @returns {Object} The state with the removed tab\n */\nfunction closeTab(ShallowNewState, RemoveIndex) {\n    // create a copy of the state to ensure immutability\n    let NewState = {...ShallowNewState};\n    // if the active view will be closed\n    if (NewState.views[RemoveIndex].active === true) {\n        // set the home view to be active\n        NewState.views[0].active = true;\n    }\n    // remove the tab by the requested index\n    NewState.views.splice(RemoveIndex, 1);\n    // update session storage with our new state\n    setSessionStorage(\"TabViewerSessionState\", NewState);\n    // return the updated state\n    return NewState;\n}\n\n/**\n * Adds a tab to the views if needed\n * @param {Object} ShallowNewState The current state, before the tab is added\n * @param {Object} payload An action payload containing ID of the tab to add, display name of the tab, and the tab's type (People/Places/Fieldtrips/Book/Graph/Story)\n * @returns {Object} The new, updated state\n */\nfunction addTab(ShallowNewState, {DisplayArtifactID, name, type}) {\n    // get a copy of the state to ensure immutability\n    let newState = {...ShallowNewState};\n    // see if we can get the preexisting view matching the tab to create\n    const matchingViewIndex = ShallowNewState.views.findIndex((view) => (\n        // check if the name and type matches\n        view.name === name && view.type === type && view.id === DisplayArtifactID\n    ));\n    if (matchingViewIndex !== -1) {\n        // if we're trying to re-add an already existing view\n        // just switch to that tab\n        return switchTab(ShallowNewState, matchingViewIndex);\n    } else {\n        // we actually need to make a new tab and view\n        // get a copy of the state (ensure immutability)\n        // object representing the new view\n        const newView = {\n            // id is the passed ID\n            \"id\": DisplayArtifactID,\n            // set it to the active view\n            \"active\": true,\n            // name is the passed name\n            \"name\": name,\n            // type is the passed type\n            \"type\": type,\n            // color is the default active/inactive color\n            \"color\": null,\n            // pinned is whether or not its pinned to not be automatically deleted\n            \"pinned\": false,\n        };\n        // for each of the preexisting views\n        let updatedViews = newState.views.map((view) => {\n            return {\n                // leave the view mostly untouched...\n                ...view,\n                // ...but set it to be inactive\n                \"active\": false,\n            };\n            // and add in the new view at the end\n        }).concat(newView);\n        // tracker if we need to remove a tab\n        var RemoveTab = false;\n        // if our window is smaller than 1100px (95% sure about the units)\n        // and\n        // if we have more than 5 tabs already (including home)\n        if (window.innerWidth <= 1100 && updatedViews.length > 5) {\n            RemoveTab = true;\n        } else if (updatedViews.length > 6) {\n            // if we have more than 6 tabs already (including home) and regardless of screen size\n            RemoveTab = true;\n        }\n        // check if first non-home tab is not pinned\n        // and\n        // if we need to remove a tab\n        if( RemoveTab){\n            // index to remove defaults to the tab next to the home tab\n            let RemoveIndex = 1;\n            // if the tab is pinned then remove the next tab\n            while(updatedViews[RemoveIndex].pinned){\n                RemoveIndex++;\n            }\n            // remove the first non-Home tab\n            updatedViews.splice(RemoveIndex, 1);\n        }\n        // update the state's views\n        newState.views = updatedViews;\n        // update session storage with our new, updated state\n        setSessionStorage(\"TabViewerSessionState\", newState);\n        // return our updated state\n        return newState;\n    }\n}\n\n/**\n * Move a tab to a new index\n * Note that you cannot move a tab to index 0 (Home is fixed to index 0)\n * @param {Object} OldState The pre-drag state of the tabs\n * @param {Object} indices Object containing the tab index to move (OldTabIndex) and where to move it to (NewTabIndex)\n * @returns {Object} The updated, tab-moved state\n */\nfunction moveTab(OldState, {OldTabIndex, NewTabIndex}) {\n    // make sure we are not affecting the home tab\n    if (NewTabIndex !== 0 && OldTabIndex !== 0) {\n        // get a copy of the views to ensure immutability\n        let {views} = {...OldState};\n        // get the view that we are to move\n        const viewToMove = views[OldTabIndex];\n        // delete the tab at its old index\n        views.splice(OldTabIndex, 1);\n        // re-add it at the desired index\n        views.splice(NewTabIndex, 0, viewToMove);\n        return {\n            // leave the state mostly unmodified\n            ...OldState,\n            // but update the view with the move tab\n            views,\n        };\n    } else {\n        // can't move home tab!\n        console.warn(\"Cannot move the home tab!\");\n        // don't change anything\n        return OldState;\n    }\n}\n\n/**\n * Update a tab's attributes\n * @param {Object} OldState The pre-update state\n * @param {Object} payload Contains TabIndex, to indicate the tab to change, and updates that indicate what properties to set to what\n * @returns {Object} The state with the updated tab\n */\nfunction updateTab(OldState, {TabIndex, updates}) {\n    // get a new copy of the state to keep immutability\n    let newState = {...OldState};\n    // get the view to update\n    let view = newState.views[TabIndex];\n    // update that view\n    newState.views[TabIndex] = {\n        // use the previous properties\n        ...view,\n        // but override any specified properties\n        ...updates,\n    };\n    // return the state with the updated tab\n    return newState;\n}\n\n/**\n * Pin a tab to not be removed\n * @param {Object} OldState with the pre-updated state\n * @param {Number} TabIndex to pin\n * */\nfunction pinTab(OldState, TabIndex){\n    // save old state to a new state to keep immutability\n    let newState = {...OldState};\n    // get the view to pin\n    let view = newState.views[TabIndex];\n    // toggle pinned state\n    newState.views[TabIndex] = {\n        ...view,\n        pinned: !newState.views[TabIndex].pinned,\n    };\n    return newState;\n}\n\n","import {combineReducers} from \"redux\";\nimport navigator from \"./navigatorReducer\";\nimport search from \"./searchReducer\";\nimport tabViewer from \"./tabViewerReducer\";\n\nconst rootReducer = combineReducers({\n    navigator,\n    search,\n    tabViewer,\n});\n\nexport default rootReducer;\n","import {createStore, compose, applyMiddleware} from 'redux';\nimport rootReducer from '../reducers/rootReducer';\nimport thunk from 'redux-thunk';\n\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\n// Black magic, see https://stackoverflow.com/a/41260990\nconst asyncDispatchMiddleware = store => next => action => {\n    let syncActivityFinished = false;\n    let actionQueue = [];\n\n    function flushQueue() {\n        actionQueue.forEach(a => store.dispatch(a)); // flush queue\n        actionQueue = [];\n    }\n\n    function asyncDispatch(asyncAction) {\n        actionQueue = actionQueue.concat([asyncAction]);\n        if (syncActivityFinished) {\n            flushQueue();\n        }\n    }\n\n    const actionWithAsyncDispatch = Object.assign({}, action, {asyncDispatch});\n\n    next(actionWithAsyncDispatch);\n    syncActivityFinished = true;\n    flushQueue();\n};\n\n/**\n * Redux black magic\n */\nexport default function configureStore() {\n    return createStore(\n        rootReducer,\n        composeEnhancer(applyMiddleware(thunk, asyncDispatchMiddleware)),\n    );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nimport { Provider } from 'react-redux';\nimport configureStore from './data-stores/configureStore';\n\nconst store = configureStore();\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>\n    , document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}